"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4729],{7220:(e,t,a)=>{a.d(t,{Hr:()=>f,Ht:()=>m,I:()=>u,M5:()=>v,SQ:()=>c,_2:()=>p,lp:()=>g,lv:()=>b,mB:()=>h,nV:()=>N,rI:()=>i,ty:()=>l});var n=a(95155);a(12115);var o=a(56348),r=a(99051),s=a(27937),d=a(64936);function i(e){let{...t}=e;return(0,n.jsx)(o.bL,{"data-slot":"dropdown-menu",...t})}function l(e){let{...t}=e;return(0,n.jsx)(o.l9,{"data-slot":"dropdown-menu-trigger",...t})}function c(e){let{className:t,sideOffset:a=4,...r}=e;return(0,n.jsx)(o.ZL,{children:(0,n.jsx)(o.UC,{"data-slot":"dropdown-menu-content",sideOffset:a,className:(0,d.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...r})})}function u(e){let{...t}=e;return(0,n.jsx)(o.YJ,{"data-slot":"dropdown-menu-group",...t})}function p(e){let{className:t,inset:a,variant:r="default",...s}=e;return(0,n.jsx)(o.q7,{"data-slot":"dropdown-menu-item","data-inset":a,"data-variant":r,className:(0,d.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-pointer items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-disabled:pointer-events-none data-disabled:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function f(e){let{...t}=e;return(0,n.jsx)(o.z6,{"data-slot":"dropdown-menu-radio-group",...t})}function m(e){let{className:t,children:a,...s}=e;return(0,n.jsxs)(o.hN,{"data-slot":"dropdown-menu-radio-item",className:(0,d.cn)("focus:bg-accent focus:text-accent-foreground relative flex cursor-pointer items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-disabled:pointer-events-none data-disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s,children:[(0,n.jsx)("span",{className:"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center",children:(0,n.jsx)(o.VF,{children:(0,n.jsx)(r.A,{className:"size-2 fill-current"})})}),a]})}function g(e){let{className:t,inset:a,...r}=e;return(0,n.jsx)(o.JU,{"data-slot":"dropdown-menu-label","data-inset":a,className:(0,d.cn)("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...r})}function h(e){let{className:t,...a}=e;return(0,n.jsx)(o.wv,{"data-slot":"dropdown-menu-separator",className:(0,d.cn)("bg-border -mx-1 my-1 h-px",t),...a})}function b(e){let{...t}=e;return(0,n.jsx)(o.Pb,{"data-slot":"dropdown-menu-sub",...t})}function N(e){let{className:t,inset:a,children:r,...i}=e;return(0,n.jsxs)(o.ZP,{"data-slot":"dropdown-menu-sub-trigger","data-inset":a,className:(0,d.cn)("focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-pointer items-center rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8",t),...i,children:[r,(0,n.jsx)(s.A,{className:"ml-auto size-4"})]})}function v(e){let{className:t,...a}=e;return(0,n.jsx)(o.G5,{"data-slot":"dropdown-menu-sub-content",className:(0,d.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg",t),...a})}},20120:(e,t,a)=>{a.d(t,{$v:()=>g,EO:()=>u,Lt:()=>d,Rx:()=>h,Zr:()=>b,ck:()=>f,r7:()=>m,tv:()=>i,wd:()=>p});var n=a(95155);a(12115);var o=a(52498),r=a(64936),s=a(97003);function d(e){let{...t}=e;return(0,n.jsx)(o.bL,{"data-slot":"alert-dialog",...t})}function i(e){let{...t}=e;return(0,n.jsx)(o.l9,{"data-slot":"alert-dialog-trigger",...t})}function l(e){let{...t}=e;return(0,n.jsx)(o.ZL,{"data-slot":"alert-dialog-portal",...t})}function c(e){let{className:t,...a}=e;return(0,n.jsx)(o.hJ,{"data-slot":"alert-dialog-overlay",className:(0,r.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function u(e){let{className:t,...a}=e;return(0,n.jsxs)(l,{children:[(0,n.jsx)(c,{}),(0,n.jsx)(o.UC,{"data-slot":"alert-dialog-content",className:(0,r.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...a})]})}function p(e){let{className:t,...a}=e;return(0,n.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,r.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function f(e){let{className:t,...a}=e;return(0,n.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,r.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function m(e){let{className:t,...a}=e;return(0,n.jsx)(o.hE,{"data-slot":"alert-dialog-title",className:(0,r.cn)("text-lg font-semibold",t),...a})}function g(e){let{className:t,...a}=e;return(0,n.jsx)(o.VY,{"data-slot":"alert-dialog-description",className:(0,r.cn)("text-muted-foreground text-sm",t),...a})}function h(e){let{className:t,...a}=e;return(0,n.jsx)(o.rc,{className:(0,r.cn)((0,s.r)(),t),...a})}function b(e){let{className:t,...a}=e;return(0,n.jsx)(o.ZD,{className:(0,r.cn)((0,s.r)({variant:"outline"}),t),...a})}},30275:(e,t,a)=>{a.d(t,{a:()=>o});var n=a(12115);function o(){let[e,t]=(0,n.useState)(void 0);return(0,n.useEffect)(()=>{let e=window.matchMedia("(max-width: ".concat(767,"px)")),a=()=>{t(window.innerWidth<768)};return e.addEventListener("change",a),t(window.innerWidth<768),()=>e.removeEventListener("change",a)},[]),!!e}},31856:(e,t,a)=>{a.d(t,{Fm:()=>u,Qs:()=>m,XW:()=>p,cj:()=>d,h:()=>c,qp:()=>f});var n=a(95155);a(12115);var o=a(93409),r=a(65229),s=a(64936);function d(e){let{...t}=e;return(0,n.jsx)(o.bL,{"data-slot":"sheet",...t})}function i(e){let{...t}=e;return(0,n.jsx)(o.ZL,{"data-slot":"sheet-portal",...t})}function l(e){let{className:t,...a}=e;return(0,n.jsx)(o.hJ,{"data-slot":"sheet-overlay",className:(0,s.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function c(e){let{className:t,children:a,side:d="right",...c}=e;return(0,n.jsxs)(i,{children:[(0,n.jsx)(l,{}),(0,n.jsxs)(o.UC,{"data-slot":"sheet-content",className:(0,s.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===d&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===d&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===d&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===d&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...c,children:[a,(0,n.jsxs)(o.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[(0,n.jsx)(r.A,{className:"size-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function u(e){let{className:t,...a}=e;return(0,n.jsx)("div",{"data-slot":"sheet-header",className:(0,s.cn)("flex flex-col gap-1.5 p-4",t),...a})}function p(e){let{className:t,...a}=e;return(0,n.jsx)("div",{"data-slot":"sheet-footer",className:(0,s.cn)("mt-auto flex flex-col gap-2 p-4",t),...a})}function f(e){let{className:t,...a}=e;return(0,n.jsx)(o.hE,{"data-slot":"sheet-title",className:(0,s.cn)("text-foreground font-semibold",t),...a})}function m(e){let{className:t,...a}=e;return(0,n.jsx)(o.VY,{"data-slot":"sheet-description",className:(0,s.cn)("text-muted-foreground text-sm",t),...a})}},54664:(e,t,a)=>{a.d(t,{w:()=>s});var n=a(95155);a(12115);var o=a(47321),r=a(25016);function s(e){let{className:t,orientation:a="horizontal",decorative:s=!0,...d}=e;return(0,n.jsx)(o.b,{"data-slot":"separator",decorative:s,orientation:a,className:(0,r.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...d})}},55678:(e,t,a)=>{a.d(t,{s:()=>i,w:()=>l});var n=a(95155),o=a(12115),r=a(95657),s=a(18720);let d=(0,o.createContext)(void 0);function i(e){let{children:t,defaultUserId:a,defaultOrganizationId:i,initialProjects:l,userRole:c,memberRole:u}=e,p=(0,o.useCallback)(e=>e.map(e=>({...e,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt),scheduledTime:new Date(e.scheduledTime)})),[]),[f,m]=(0,o.useState)(()=>l?p(l):[]),[g,h]=(0,o.useState)(!l),[b,N]=(0,o.useState)(null),[v,E]=(0,o.useState)(null),[x,w]=(0,o.useState)(!1),[C,j]=(0,o.useState)(!1),[A,O]=(0,o.useState)(!1);(0,o.useEffect)(()=>{l&&m(p(l))},[l,p]),(0,o.useEffect)(()=>{c&&"AGENT"===c.toUpperCase()?r.F.organizations.setActiveOrganization(null):i&&r.F.organizations.setActiveOrganization(i)},[i,c]);let R=(0,o.useCallback)(async()=>{h(!0),N(null),!r.F.organizations.getActiveOrganization()&&i&&(null==c?void 0:c.toUpperCase())!=="AGENT"&&r.F.organizations.setActiveOrganization(i);try{let e=[];try{e=await r.F.projects.listForCurrentUser()}catch(t){console.warn("Failed to fetch user projects:",null==t?void 0:t.message),e=[]}let t=p(e);m(t)}catch(e){console.error("Error fetching jobs:",e),N(e),String(e).includes("org")||s.oR.error("Failed to load jobs")}finally{h(!1)}},[i,u,p,c]);(0,o.useEffect)(()=>{R()},[R]),(0,o.useEffect)(()=>{let e=async()=>{m([]),N(null),await new Promise(e=>setTimeout(e,100)),R()};return window.addEventListener("organizationChanged",e),()=>{window.removeEventListener("organizationChanged",e)}},[R]),(0,o.useEffect)(()=>{let e=()=>{R()};return window.addEventListener("orderCreated",e),()=>{window.removeEventListener("orderCreated",e)}},[R]),(0,o.useEffect)(()=>{let e=()=>{R()};return window.addEventListener("tourDemoProjectChanged",e),()=>{window.removeEventListener("tourDemoProjectChanged",e)}},[R]),(0,o.useEffect)(()=>{let e=e=>{var t;let a=null==(t=e.detail)?void 0:t.jobId;a&&(E(e=>(null==e?void 0:e.id)===a?(j(!1),O(!1),w(!1),null):e),m(e=>e.filter(e=>e.id!==a)))};return window.addEventListener("jobDeleted",e),()=>{window.removeEventListener("jobDeleted",e)}},[]);let I=(0,o.useCallback)(e=>{m(t=>t.some(t=>t.id===e.id)?t.map(t=>t.id===e.id?e:t):[e,...t])},[]),y=(0,o.useMemo)(()=>f.map(e=>r.F.mapProjectToJobCard(e)),[f]);(0,o.useEffect)(()=>{window.dispatchEvent(new CustomEvent("jobsUpdated",{detail:y}))},[y]),(0,o.useEffect)(()=>{if(v){let e=y.find(e=>e.id===v.id);e&&JSON.stringify(e)!==JSON.stringify(v)&&E(e)}},[y,v]),(0,o.useEffect)(()=>{let e=e=>{I(e.detail)};return window.addEventListener("jobCreated",e),()=>{window.removeEventListener("jobCreated",e)}},[I]);let M=(0,o.useCallback)(e=>y.find(t=>t.id===e),[y]),P=(0,o.useCallback)(e=>f.find(t=>t.id===e),[f]),T=(0,o.useCallback)((e,t)=>{m(a=>a.map(a=>a.id===e?{...a,...t}:a))},[]),z=(0,o.useCallback)((e,t,a)=>{(async()=>{try{let n=await r.F.projects.assignTechnician(e,t);T(e,n),w(!1),E(null),s.oR.success("Technician assigned successfully"),window.dispatchEvent(new CustomEvent("jobAssigned",{detail:{jobId:e,technicianId:t,score:a}}))}catch(e){console.error("Failed to assign technician",e),s.oR.error("Failed to assign technician")}})()},[T]),L=(0,o.useCallback)((e,t)=>{(async()=>{try{let a=await r.F.projects.updateStatus(e,t);T(e,a),window.dispatchEvent(new CustomEvent("jobStatusChanged",{detail:{jobId:e,newStatus:t}})),s.oR.success("Status updated")}catch(e){console.error("Failed to update status",e),s.oR.error("Failed to update status")}})()},[T]),D=(0,o.useCallback)(async e=>{let t=(null==c?void 0:c.toUpperCase())==="AGENT";try{if(t){let t=await r.F.orders.cancel(e);s.oR.success("deleted"===t.action?"Order deleted":"Order cancelled")}else await r.F.projects.delete(e),s.oR.success("Job deleted");m(t=>t.filter(t=>t.id!==e)),E(t=>(null==t?void 0:t.id)===e?null:t),j(!1),O(!1),w(!1),window.dispatchEvent(new CustomEvent("jobDeleted",{detail:{jobId:e}}))}catch(e){throw console.error("Failed to delete/cancel project",e),s.oR.error(t?"Failed to cancel order":"Failed to delete project"),e}},[c]),k=(0,o.useCallback)(async e=>{let t=e.orgId||i;if(!t)throw s.oR.error("No organization selected. Please select an organization before creating a project."),Error("Missing organization");try{let a=await r.F.projects.create({address:e.address||e.propertyAddress||"",scheduledTime:e.scheduledTime||new Date,notes:e.notes,customerId:e.customerId,projectManagerId:e.projectManagerId,technicianId:e.technicianId,editorId:e.editorId,orgId:t}),n={...a,createdAt:new Date(a.createdAt),updatedAt:new Date(a.updatedAt),scheduledTime:new Date(a.scheduledTime)};return I(n),window.dispatchEvent(new CustomEvent("jobCreated",{detail:n})),n}catch(e){throw console.error("Failed to create project",e),s.oR.error("Failed to create project"),e}},[a,i,I]),S=(0,o.useCallback)(e=>{E(e)},[]),_=(0,o.useCallback)(e=>{E(t=>(null==t?void 0:t.id)===e.id?null:e)},[]),F=(0,o.useCallback)(e=>{E(e),w(!0)},[]),J=(0,o.useCallback)(()=>{w(!1),E(null)},[]),W=(0,o.useCallback)(e=>{E(e),j(!0),window.dispatchEvent(new CustomEvent("jobTaskViewOpened",{detail:{id:e.id}}))},[]),G=(0,o.useCallback)(()=>{j(!1),E(null)},[]),U=(0,o.useCallback)(()=>{j(!1),O(!0)},[]),Y=(0,o.useCallback)(()=>{O(!1),E(null)},[]),H=(0,o.useCallback)(e=>{e||G()},[G]),V=(0,o.useCallback)(e=>{e||Y()},[Y]),Z=(0,o.useCallback)(()=>{v&&(j(!1),E(v),w(!0))},[v]),K=(0,o.useCallback)(()=>{v&&(C&&j(!1),A&&O(!1),E(v),w(!0))},[v,C,A]);return(0,n.jsx)(d.Provider,{value:{projects:f,jobCards:y,jobs:y,isLoadingJobs:g,jobsError:b,refreshJobs:R,getJobById:M,getProjectById:P,updateJob:T,assignJob:z,changeJobStatus:L,createJob:k,deleteJob:D,selectedJob:v,selectJob:S,toggleJobSelection:_,showRankings:x,openRankings:F,closeRankings:J,showTaskView:C,showTaskDialog:A,openTaskView:W,closeTaskView:G,openTaskDialog:U,closeTaskDialog:Y,handleTaskViewClose:H,handleTaskDialogClose:V,handleAssignTechnician:Z,handleChangeTechnician:K},children:t})}function l(){let e=(0,o.useContext)(d);if(void 0===e)throw Error("useJobManagement must be used within a JobManagementProvider");return e}},75701:(e,t,a)=>{a.d(t,{hq:()=>o,in:()=>r,zE:()=>s});var n=a(80408);let o=(e,t)=>{var a;if(!e)return(0,n.FK)(t);if("PERSONAL"===((null==(a=e.organization)?void 0:a.type)||e.organizationType||""))return"COMPANY";let o=e.orgRole||e.role||(null==e?void 0:e.organizationRole)||t;return(0,n.FK)(o)},r=(e,t)=>{var a,n;let o=e.find(e=>e.orgId===t),r=null!=(n=null!=(a=null==o?void 0:o.orgRole)?a:null==o?void 0:o.role)?n:null;return r?r.toUpperCase():null},s=e=>{let t=(0,n.FK)(e);return"COMPANY"===t||"AGENT"===t||"TECHNICIAN"===t?"/dashboard":"/"}},76457:(e,t,a)=>{a.d(t,{$K:()=>c,BO:()=>g,Ib:()=>b,Kh:()=>s,ZZ:()=>l,aN:()=>i,jC:()=>d,lN:()=>m,mR:()=>f,nS:()=>p,qc:()=>h});let n=["PERSONAL_OWNER","OWNER","ADMIN"],o=["PERSONAL_OWNER","OWNER","ADMIN","PROJECT_MANAGER"],r=["PERSONAL_OWNER","OWNER","ADMIN"];function s(e,t,a){return!!e&&"NONE"!==e&&!!t&&(!!n.includes(e)||"PROJECT_MANAGER"===e&&t.projectManagerId===a)}function d(e){return!!e&&"NONE"!==e&&n.includes(e)}function i(e){return!!e&&"NONE"!==e&&n.includes(e)}function l(e,t,a){return s(e,t,a)}function c(e){return!!e&&"NONE"!==e&&o.includes(e)}function u(e){return!!e&&"NONE"!==e}function p(e){return!!e&&"NONE"!==e&&"EDITOR"!==e&&"TECHNICIAN"!==e&&["PERSONAL_OWNER","OWNER","ADMIN","PROJECT_MANAGER"].includes(e)}function f(e,t,a,o){return(null==o?void 0:o.userAccountType)==="AGENT"&&null!=o&&!!o.customerUserId&&o.customerUserId===a||!!e&&"NONE"!==e&&!!t&&(!!n.includes(e)||"PROJECT_MANAGER"===e&&t.projectManagerId===a)}function m(e){return!!e&&"NONE"!==e&&r.includes(e)}function g(e){return!!e&&"NONE"!==e&&["PERSONAL_OWNER","OWNER","ADMIN","PROJECT_MANAGER"].includes(e)}function h(e){return!!e&&"NONE"!==e&&n.includes(e)}function b(e,t,a){return{canViewProject:!!e&&"NONE"!==e&&(!!["PERSONAL_OWNER","OWNER","ADMIN","PROJECT_MANAGER"].includes(e)||("TECHNICIAN"===e?(null==t?void 0:t.technicianId)===a:"EDITOR"===e&&(null==t?void 0:t.editorId)===a)),canEditProject:s(e,t,a),canDeleteProject:d(e),canChangeCustomer:i(e),canAssignTechnician:"PERSONAL_OWNER"!==e&&s(e,t,a),canAssignEditor:"PERSONAL_OWNER"!==e&&s(e,t,a),canChangeStatus:s(e,t,a),canReschedule:s(e,t,a),canWriteTeamChat:u(e),canReadTeamChat:u(e),canWriteCustomerChat:f(e,t,a),canReadCustomerChat:p(e),isAssignedPM:!!t&&!!a&&t.projectManagerId===a,isAssignedTechnician:!!t&&!!a&&t.technicianId===a,isAssignedEditor:!!t&&!!a&&t.editorId===a}}},80408:(e,t,a)=>{a.d(t,{EL:()=>u,FK:()=>i,UD:()=>c,aJ:()=>l});let n=[{path:"/dashboard",label:"Dashboard",icon:"LayoutDashboard"},{path:"/calendar",label:"Calendar",icon:"Calendar"}],o=[{path:"/dashboard",label:"Dashboard",icon:"LayoutDashboard"},{path:"/jobs/all-jobs",label:"Jobs",icon:"Briefcase"},{path:"/map",label:"Map",icon:"Map"},{path:"/calendar",label:"Calendar",icon:"Calendar"}],r=[{path:"/dashboard",label:"Dashboard",icon:"LayoutDashboard"},{path:"/jobs/all-jobs",label:"My Jobs",icon:"Briefcase"},{path:"/map",label:"Map",icon:"Map"},{path:"/calendar",label:"Calendar",icon:"Calendar"}],s=[{path:"/dashboard",label:"Dashboard",icon:"LayoutDashboard"},{path:"/jobs/all-jobs",label:"My Jobs",icon:"Briefcase"},{path:"/jobs/job-management",label:"Job Board",icon:"Kanban"},{path:"/map",label:"Map",icon:"Map"},{path:"/calendar",label:"Calendar",icon:"Calendar"}],d=["OWNER","ADMIN","PROJECT_MANAGER","EDITOR"],i=e=>{let t=(e||"").toUpperCase();return"COMPANY"===t||d.includes(t)?"COMPANY":"TECHNICIAN"===t||"PROVIDER"===t?"TECHNICIAN":"AGENT"},l=(e,t,a)=>{if(!e)return null;let n=u(e,t,a);return n?n.showSidebar?"COMPANY":"AGENT"===n.accountType?"AGENT":"PERSONAL"===n.orgType?"COMPANY":"TECHNICIAN":null},c=e=>"COMPANY"===e;function u(e,t,a){var d;if(!e)return null;let i=t.find(e=>e.orgId===a),l=(null==i||null==(d=i.organization)?void 0:d.type)||(null==i?void 0:i.organizationType)||"PERSONAL",c="PERSONAL"===l?"PERSONAL_OWNER":(null==i?void 0:i.orgRole)||(null==i?void 0:i.role)||null,u=e.accountType||"PROVIDER",p=(c||"").toString().toUpperCase(),f="COMPANY"===l&&["OWNER","ADMIN","PROJECT_MANAGER"].includes(p),m=[],g=!1,h="New Job",b="",N=["OWNER","ADMIN","PERSONAL_OWNER"].includes(p)||"PERSONAL"===l;return f?(g=["OWNER","ADMIN"].includes(p),h="New Job",b=""):"AGENT"===u?(m=n,g=!0,h="Create Order",b="/booking"):"COMPANY"===l&&"EDITOR"===p?(m=s,g=!1):"COMPANY"===l&&"TECHNICIAN"===p?(m=r,g=!1):("PROVIDER"===u||"COMPANY"===u)&&(m=o,g=!1),{accountType:u,orgType:l,orgRole:c,showSidebar:f,isElevatedRole:f,navItems:m,canCreateOrder:g,createActionLabel:h,createActionPath:b,canManageCustomers:N}}},97450:(e,t,a)=>{a.d(t,{AM:()=>s,Wv:()=>d,hl:()=>i});var n=a(95155);a(12115);var o=a(31138),r=a(64936);function s(e){let{...t}=e;return(0,n.jsx)(o.bL,{"data-slot":"popover",...t})}function d(e){let{...t}=e;return(0,n.jsx)(o.l9,{"data-slot":"popover-trigger",...t})}function i(e){let{className:t,align:a="center",sideOffset:s=4,...d}=e;return(0,n.jsx)(o.ZL,{children:(0,n.jsx)(o.UC,{"data-slot":"popover-content",align:a,sideOffset:s,className:(0,r.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...d})})}}}]);