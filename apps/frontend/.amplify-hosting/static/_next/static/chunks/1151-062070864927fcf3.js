"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1151],{35722:(e,s,a)=>{a.d(s,{NV:()=>c,ft:()=>i});var l=a(95657);let t={lat:51.0447,lng:-114.0719},n=new Map;async function i(e){let s="pk.eyJ1IjoiZHVyb2RwIiwiYSI6ImNtaHplcW53cDA4dHQycnB6dnhqeGtveXgifQ.6GR-s3V7vfGRsoVlhSTFhg";if(!s||!e)return null;try{var a,l;let t="https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(e),".json?access_token=").concat(s,"&limit=1"),n=await fetch(t);if(!n.ok)return null;let i=await n.json(),r=null==i||null==(a=i.features)?void 0:a[0];if((null==r||null==(l=r.center)?void 0:l.length)===2){let[e,s]=r.center;return{lat:s,lng:e}}}catch(e){console.error("Failed to geocode address",e)}return null}async function r(e){if(!e.user)return null;let s=e.user,a=e.personalOrg,l=a?[a.addressLine1,a.addressLine2,a.city,a.region,a.postalCode,a.countryCode].filter(Boolean).join(", "):"",r=(null==a?void 0:a.lat)!==void 0&&(null==a?void 0:a.lng)!==void 0?{lat:a.lat,lng:a.lng}:t;if(l){let e=n.get(l);if(e)r=e;else{let e=await i(l);e&&(r=e,n.set(l,e))}}return{id:s.id,userId:s.id,orgMemberId:e.id,orgId:e.orgId,memberId:e.id,role:e.role||e.orgRole||"TECHNICIAN",name:s.name||"Unnamed",email:s.email||"",phone:(null==a?void 0:a.phone)||"",organizationId:s.organizationId||void 0,isIndependent:!0,companyId:void 0,companyName:void 0,homeLocation:{lat:r.lat,lng:r.lng,address:{street:(null==a?void 0:a.addressLine1)||"",city:(null==a?void 0:a.city)||"",stateProvince:(null==a?void 0:a.region)||"",country:(null==a?void 0:a.countryCode)||"",postalCode:(null==a?void 0:a.postalCode)||""}},availability:[],reliability:{totalJobs:0,noShows:0,lateDeliveries:0,onTimeRate:0,averageDeliveryTime:0},skills:{residential:0,commercial:0,aerial:0,twilight:0,video:0},rating:{overall:0,count:0,recent:[]},preferredClients:[],status:"active",createdAt:e.createdAt?new Date(e.createdAt):new Date,avatar:s.avatarUrl,bio:"",services:{photography:!0,video:!1,aerial:!1,floorplan:!1,measurement:!1,twilight:!1,editing:!1,virtualStaging:!1},portfolio:[],certifications:[]}}async function c(){let e=await l.F.organizations.listMembers();return e&&0!==e.length?(await Promise.all(e.map(e=>r(e)))).filter(e=>!!e):[]}},42456:(e,s,a)=>{a.d(s,{I2:()=>_,ZJ:()=>k,_Q:()=>F}),a(89129);var l=a(95155),t=a(12115),n=a(96633),i=a(33884),r=a(67812),c=a(86651),d=a(66955),o=a(26989),m=a(93341),x=a(21873),h=a(39347),u=a(29633),j=a(37135),p=a(25016),g=a(33789),v=a(47507),f=a(97003),N=a(82180),b=a(51631);function y(e){let{technicians:s,onRowClick:a,onRemove:y,onRoleChange:w,updatingRoleId:A,currentUserId:C,currentUserMemberId:k,currentUserRole:I}=e,S=s||s||[],[R,T]=(0,t.useState)(""),[M,E]=(0,t.useState)("name-asc"),[L,J]=(0,t.useState)("all"),[P,D]=(0,t.useState)("all"),[O,U]=(0,t.useState)(1),[z,B]=(0,t.useState)(10),H=(I||"").toUpperCase(),Z="PROJECT_MANAGER"===H||"EDITOR"===H,_=(0,t.useMemo)(()=>{let e=[...S];if(R){let s=R.toLowerCase();e=e.filter(e=>{let a=e.name.toLowerCase(),l=e.email.toLowerCase(),t=(0,p.w)(e.homeLocation.address,!0).toLowerCase();return a.includes(s)||l.includes(s)||t.includes(s)})}return"all"!==L&&(e=e.filter(e=>e.status===L)),"all"!==P&&("company"===P?e=e.filter(e=>!e.isIndependent):"independent"===P&&(e=e.filter(e=>e.isIndependent))),e.sort((e,s)=>{switch(M){case"name-asc":return e.name.localeCompare(s.name);case"name-desc":return s.name.localeCompare(e.name);case"rating-asc":return e.rating.overall-s.rating.overall;case"rating-desc":return s.rating.overall-e.rating.overall;case"jobs-asc":return e.reliability.totalJobs-s.reliability.totalJobs;case"jobs-desc":return s.reliability.totalJobs-e.reliability.totalJobs;case"onTime-asc":return e.reliability.onTimeRate-s.reliability.onTimeRate;case"onTime-desc":return s.reliability.onTimeRate-e.reliability.onTimeRate;case"status-asc":return e.status.localeCompare(s.status);case"status-desc":return s.status.localeCompare(e.status);default:return 0}}),e},[S,R,M,L,P]),q=Math.max(1,Math.ceil(_.length/z)),F=(O-1)*z,$=F+z,W=_.slice(F,$);(0,t.useEffect)(()=>{let e=Math.max(1,Math.ceil(_.length/z));O>e?U(e):O<1&&U(1)},[_.length,z,O]);let V=e=>{U(Math.min(Math.max(e,1),q))};return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsxs)("div",{className:"relative flex-1 min-w-0",children:[(0,l.jsx)(c.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground/60"}),(0,l.jsx)(g.p,{type:"text",variant:"muted",placeholder:"Search by name, email, or location...",value:R,onChange:e=>T(e.target.value),className:"pl-10"})]}),(0,l.jsxs)(v.l6,{value:L,onValueChange:J,children:[(0,l.jsxs)(v.bq,{variant:"muted",className:"w-10 md:w-[140px] shrink-0 [&>svg:last-child]:hidden md:[&>svg:last-child]:block",children:[(0,l.jsx)(d.A,{className:"h-4 w-4 md:mr-2"}),(0,l.jsx)(v.yv,{placeholder:"Status",className:"hidden md:inline"})]}),(0,l.jsxs)(v.gC,{children:[(0,l.jsx)(v.eb,{value:"all",children:"All Status"}),(0,l.jsx)(v.eb,{value:"active",children:"Active"}),(0,l.jsx)(v.eb,{value:"inactive",children:"Inactive"})]})]}),(0,l.jsxs)(v.l6,{value:P,onValueChange:D,children:[(0,l.jsxs)(v.bq,{variant:"muted",className:"w-10 md:w-[140px] shrink-0 [&>svg:last-child]:hidden md:[&>svg:last-child]:block",children:[(0,l.jsx)(o.A,{className:"h-4 w-4 md:mr-2"}),(0,l.jsx)(v.yv,{placeholder:"Type",className:"hidden md:inline"})]}),(0,l.jsxs)(v.gC,{children:[(0,l.jsx)(v.eb,{value:"all",children:"All Types"}),(0,l.jsx)(v.eb,{value:"company",children:"Company"}),(0,l.jsx)(v.eb,{value:"independent",children:"Independent"})]})]}),(0,l.jsxs)(v.l6,{value:M,onValueChange:E,children:[(0,l.jsxs)(v.bq,{variant:"muted",className:"w-10 md:w-[180px] shrink-0 [&>svg:last-child]:hidden md:[&>svg:last-child]:block",children:[(0,l.jsx)(m.A,{className:"h-4 w-4 md:mr-2"}),(0,l.jsx)(v.yv,{placeholder:"Sort by",className:"hidden md:inline"})]}),(0,l.jsxs)(v.gC,{children:[(0,l.jsx)(v.eb,{value:"name-asc",children:"Name (A-Z)"}),(0,l.jsx)(v.eb,{value:"name-desc",children:"Name (Z-A)"}),(0,l.jsx)(v.eb,{value:"rating-desc",children:"Rating (High-Low)"}),(0,l.jsx)(v.eb,{value:"rating-asc",children:"Rating (Low-High)"}),(0,l.jsx)(v.eb,{value:"jobs-desc",children:"Jobs (Most)"}),(0,l.jsx)(v.eb,{value:"jobs-asc",children:"Jobs (Least)"}),(0,l.jsx)(v.eb,{value:"onTime-desc",children:"On-Time (High-Low)"}),(0,l.jsx)(v.eb,{value:"onTime-asc",children:"On-Time (Low-High)"}),(0,l.jsx)(v.eb,{value:"status-asc",children:"Status (A-Z)"}),(0,l.jsx)(v.eb,{value:"status-desc",children:"Status (Z-A)"})]})]})]}),_.length>0&&(0,l.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",_.length," of ",S.length," technicians"]}),(0,l.jsxs)(n.XI,{children:[(0,l.jsx)(n.A0,{children:(0,l.jsxs)(n.Hj,{children:[(0,l.jsx)(n.nd,{children:"Team Member"}),(0,l.jsx)(n.nd,{children:"Location"}),(0,l.jsx)(n.nd,{children:"Rating"}),(0,l.jsx)(n.nd,{children:"Jobs"}),(0,l.jsx)(n.nd,{children:"On-Time"}),(0,l.jsx)(n.nd,{children:"Status"}),(0,l.jsx)(n.nd,{children:"Joined"}),(0,l.jsx)(n.nd,{children:"Role"}),(0,l.jsx)(n.nd,{className:"text-right",children:"Actions"})]})}),(0,l.jsx)(n.BF,{children:0===_.length?(0,l.jsx)(n.Hj,{children:(0,l.jsx)(n.nA,{colSpan:9,className:"text-center py-12 text-muted-foreground",children:"No team members found"})}):W.map(e=>(0,l.jsxs)(n.Hj,{className:a?"cursor-pointer hover:bg-muted/50":"",onClick:()=>null==a?void 0:a(e),children:[(0,l.jsx)(n.nA,{children:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)(i.eu,{className:"size-10 border-2 border-border",children:[(0,l.jsx)(i.BK,{src:e.avatar}),(0,l.jsx)(i.q5,{className:"bg-primary text-primary-foreground text-xs",children:e.name.split(" ").map(e=>e[0]).join("")})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-medium",children:e.name}),(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:e.email})]})]})}),(0,l.jsx)(n.nA,{children:e.role&&"TECHNICIAN"!==e.role?(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:"N/A"}):(0,l.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,l.jsx)(x.A,{className:"h-4 w-4 text-muted-foreground/60"}),(0,l.jsx)("span",{className:"text-muted-foreground",children:(0,p.w)(e.homeLocation.address,!0)})]})}),(0,l.jsx)(n.nA,{children:["OWNER","ADMIN"].includes(e.role||"")?(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:"N/A"}):(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)(h.A,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),(0,l.jsx)("span",{children:e.rating.overall}),(0,l.jsxs)("span",{className:"text-sm text-muted-foreground",children:["(",e.rating.count,")"]})]})}),(0,l.jsx)(n.nA,{children:["OWNER","ADMIN"].includes(e.role||"")?(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:"N/A"}):(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)(u.A,{className:"h-4 w-4 text-muted-foreground/60"}),(0,l.jsx)("span",{children:e.reliability.totalJobs})]})}),(0,l.jsx)(n.nA,{children:["OWNER","ADMIN"].includes(e.role||"")?(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:"N/A"}):(0,l.jsxs)(r.E,{variant:"outline",children:[(100*e.reliability.onTimeRate).toFixed(0),"%"]})}),(0,l.jsx)(n.nA,{children:(0,l.jsx)(r.E,{variant:"active"===e.status?"default":"secondary",children:e.status})}),(0,l.jsx)(n.nA,{children:(0,l.jsxs)(N.m_,{children:[(0,l.jsx)(N.k$,{asChild:!0,children:(0,l.jsx)("span",{className:"text-sm text-muted-foreground cursor-default",children:(e=>{if(!e)return"—";let s="string"==typeof e?new Date(e):e;return Number.isNaN(s.getTime())?"—":s.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})})(e.createdAt)})}),(0,l.jsx)(N.ZI,{children:e.createdAt?new Date(e.createdAt).toISOString():"Unknown"})]})}),(0,l.jsx)(n.nA,{children:(0,l.jsxs)(v.l6,{value:e.role||"TECHNICIAN",onValueChange:s=>{Z||"OWNER"!==e.role&&(null==w||w(e,s))},disabled:!w||A===e.id||!!C&&e.id===C||"OWNER"===e.role||Z,children:[(0,l.jsx)(v.bq,{className:"w-[150px]",children:(0,l.jsx)(v.yv,{})}),(0,l.jsxs)(v.gC,{children:[(0,l.jsx)(v.eb,{value:"OWNER",children:"Owner"}),(0,l.jsx)(v.eb,{value:"ADMIN",children:"Admin"}),(0,l.jsx)(v.eb,{value:"TECHNICIAN",children:"Technician"}),(0,l.jsx)(v.eb,{value:"PROJECT_MANAGER",children:"Project Manager"}),(0,l.jsx)(v.eb,{value:"EDITOR",children:"Editor"})]})]})}),(0,l.jsx)(n.nA,{children:(0,l.jsx)("div",{className:"flex justify-end",children:(0,l.jsx)(f.$,{variant:"ghost",size:"icon-sm",onClick:s=>{s.stopPropagation(),Z||null==y||y(e)},disabled:!y||Z||C&&e.id===C||k&&e.memberId===k||"OWNER"===e.role||"ADMIN"===e.role&&"OWNER"!==I,children:(0,l.jsx)(j.A,{className:"h-4 w-4 text-destructive"})})})})]},e.id))})]}),_.length?(0,l.jsxs)("div",{className:"flex items-center justify-between gap-4 mt-3",children:[(0,l.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",F+1,"-",Math.min($,_.length)," of ",_.length]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)(v.l6,{value:z.toString(),onValueChange:e=>{B(Number(e)),U(1)},children:[(0,l.jsx)(v.bq,{className:"w-[140px]",children:(0,l.jsx)(v.yv,{placeholder:"Per page"})}),(0,l.jsxs)(v.gC,{children:[(0,l.jsx)(v.eb,{value:"10",children:"10 per page"}),(0,l.jsx)(v.eb,{value:"25",children:"25 per page"}),(0,l.jsx)(v.eb,{value:"50",children:"50 per page"}),(0,l.jsx)(v.eb,{value:"100",children:"100 per page"})]})]}),q>1&&(0,l.jsx)(b.dK,{children:(0,l.jsxs)(b.Iu,{children:[(0,l.jsx)(b.cU,{children:(0,l.jsx)(b.Eb,{onClick:()=>V(O-1),className:1===O?"pointer-events-none opacity-50":"cursor-pointer"})}),(()=>{let e=[];if(q<=5)for(let s=1;s<=q;s++)e.push(s);else{e.push(1),O>3&&e.push("ellipsis");let s=Math.max(2,O-1),a=Math.min(q-1,O+1);for(let l=s;l<=a;l++)e.push(l);O<q-2&&e.push("ellipsis"),e.push(q)}return e})().map((e,s)=>(0,l.jsx)(b.cU,{children:"ellipsis"===e?(0,l.jsx)(b.M_,{}):(0,l.jsx)(b.n$,{onClick:()=>V(e),isActive:O===e,className:"cursor-pointer",children:e})},"".concat(e,"-").concat(s))),(0,l.jsx)(b.cU,{children:(0,l.jsx)(b.WA,{onClick:()=>V(O+1),className:O===q?"pointer-events-none opacity-50":"cursor-pointer"})})]})})]})]}):null]})}a(64563);var w=a(91169),A=a(1524),C=a(48432);function k(e){let{technicians:s,onRemove:a,onRoleChange:t,updatingRoleId:n,currentUserId:i,currentUserMemberId:r,currentUserRole:c}=e,d=s.filter(e=>"active"===e.status&&"TECHNICIAN"===e.role),o=new Set(["TECHNICIAN","PROJECT_MANAGER","EDITOR"]),m=s.filter(e=>o.has(e.role)),x=m.length>0?m.reduce((e,s)=>e+s.rating.overall,0)/m.length:0,u=m.length>0?m.reduce((e,s)=>e+s.reliability.onTimeRate,0)/m.length:0;return(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,l.jsx)(C.CN,{icon:w.A,value:d.length,label:"Active Technicians",iconBgColor:"bg-accent",iconColor:"text-primary"}),(0,l.jsx)(C.CN,{icon:h.A,value:x.toFixed(1),label:"Average Rating",iconBgColor:"bg-yellow-100",iconColor:"text-yellow-600"}),(0,l.jsx)(C.CN,{icon:A.A,value:(100*u).toFixed(0),label:"Avg On-Time Rate",valueSuffix:"%",iconBgColor:"bg-emerald-100",iconColor:"text-emerald-600"}),(0,l.jsx)("div",{className:"@container md:col-span-3 mt-md",children:(0,l.jsx)("div",{className:"",children:(0,l.jsx)(y,{technicians:s,onRemove:a,onRoleChange:t,updatingRoleId:n,currentUserId:i,currentUserMemberId:r,currentUserRole:c})})})]})}var I=a(83209),S=a(55850),R=a(51089),T=a(52472),M=a(19408),E=a(83457),L=a(23327),J=a(81130),P=a(49518),D=a(26411),O=a(69242),U=a(88230),z=a(63296),B=a(54664),H=a(73344);let Z={score:{label:"Score"}};function _(e){var s;let{technician:a,ranking:t,score:n,recommended:c,onAssign:d,onClick:o,showFullAddress:m=!1,allowOverride:j=!1}=e,g=!t||100===t.availability,v=(0,p.w)(a.homeLocation.address,m),b=void 0!==n?[{name:"score",value:n,fill:n>=80?"hsl(142, 76%, 36%)":n>=60?"hsl(38, 92%, 50%)":"hsl(0, 84%, 60%)"}]:[];return(0,l.jsx)(J.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},className:"h-full",children:(0,l.jsxs)(I.Zp,{className:"relative h-full flex flex-col overflow-hidden transition-all duration-200 hover:shadow-xl cursor-pointer border-2 gap-0 ".concat(c?"border-green-500 shadow-lg shadow-green-100":"border-transparent hover:border-border"),onClick:o,children:[(0,l.jsx)(I.aR,{className:"pb-4 w-full",children:(0,l.jsxs)("div",{className:"relative flex items-start gap-4 w-full min-w-0 overflow-hidden",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)(i.eu,{className:"size-16",children:[(0,l.jsx)(i.BK,{src:a.avatar,alt:a.name}),(0,l.jsx)(i.q5,{className:"bg-primary text-primary-foreground",children:a.name.split(" ").map(e=>e[0]).join("")})]}),(0,l.jsx)("div",{className:"absolute bottom-0 right-0 size-4 rounded-full border-2 border-white ".concat(g?"bg-emerald-500":"bg-gray-400")})]}),(0,l.jsx)("div",{className:"relative flex-1 min-w-0 overflow-hidden",children:(0,l.jsxs)("div",{className:"flex items-start justify-between gap-2 min-w-0",children:[(0,l.jsxs)("div",{className:"relative flex flex-col min-w-0 flex-1 overflow-hidden",children:[(0,l.jsxs)(I.ZB,{className:"flex items-center gap-2 mb-1 min-w-0",children:[(0,l.jsx)("span",{className:"truncate min-w-0",children:a.name}),c&&(0,l.jsx)(T.A,{className:"h-4 w-4 text-emerald-600 shrink-0"})]}),!a.isIndependent&&a.companyName&&(0,l.jsxs)("div",{className:"flex items-center gap-1 mt-1.5",children:[(0,l.jsx)(M.A,{className:"h-3 w-3 text-primary"}),(0,l.jsx)("span",{className:"text-xs text-primary",children:a.companyName})]}),a.isIndependent&&(0,l.jsx)(r.E,{variant:"outline",className:"text-xs mt-1.5 h-5 w-fit",children:"Independent"}),t&&t.preferredRelationship>0&&(0,l.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,l.jsx)(E.A,{className:"h-3 w-3 fill-red-500 text-red-500"}),(0,l.jsx)("span",{className:"text-xs text-destructive",children:"Preferred Vendor"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1 mt-2 text-xs text-muted-foreground/80 min-w-0 w-full overflow-hidden",children:[(0,l.jsx)(x.A,{className:"h-3 w-3 shrink-0"}),m?(0,l.jsxs)(N.m_,{children:[(0,l.jsx)(N.k$,{asChild:!0,children:(0,l.jsx)("span",{className:"truncate block min-w-0",children:v})}),(0,l.jsx)(N.ZI,{side:"top",className:"max-w-xs",children:(0,l.jsx)(H.P,{className:"wrap-break-word",children:(0,p.w)(a.homeLocation.address,!0)})})]}):(0,l.jsx)("span",{className:"truncate block min-w-0",children:v})]})]}),void 0!==n&&(0,l.jsx)("div",{className:"flex flex-col items-end gap-1 shrink-0",children:(0,l.jsxs)(N.m_,{children:[(0,l.jsx)(N.k$,{asChild:!0,children:(0,l.jsx)("div",{children:(0,l.jsx)(R.at,{config:Z,className:"size-16 cursor-help",children:(0,l.jsxs)(P.D,{data:b,startAngle:90,endAngle:90-n/100*360,innerRadius:25,outerRadius:30,children:[(0,l.jsx)(D.z,{gridType:"circle",radialLines:!1,stroke:"none",className:"first:fill-muted last:fill-background",polarRadius:[24,30]}),(0,l.jsx)(O.ZB,{dataKey:"value",background:!0,cornerRadius:10,fill:null==(s=b[0])?void 0:s.fill}),(0,l.jsx)(U.E,{tick:!1,tickLine:!1,axisLine:!1,children:(0,l.jsx)(z.JU,{content:e=>{let{viewBox:s}=e;if(s&&"cx"in s&&"cy"in s)return(0,l.jsx)("text",{x:s.cx,y:s.cy,textAnchor:"middle",dominantBaseline:"middle",children:(0,l.jsx)("tspan",{x:s.cx,y:s.cy,className:"fill-foreground text-lg font-semibold",children:n.toFixed(0)})})}})})]})})})}),(0,l.jsx)(N.ZI,{children:(0,l.jsx)(H.P,{className:"max-w-xs",children:"Overall match score calculated from availability, distance, skill match, and reliability. Higher scores indicate better fit for the job."})})]})})]})})]})}),(0,l.jsxs)(I.Wu,{className:"flex-1 flex flex-col space-y-4 justify-end",children:[t&&(0,l.jsxs)("div",{className:"space-y-2.5",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded-lg",children:[(0,l.jsx)("span",{className:"text-muted-foreground",children:"Distance"}),(0,l.jsxs)("span",{className:"text-foreground",children:[t.distanceKm.toFixed(1),"km"]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded-lg",children:[(0,l.jsx)("span",{className:"text-muted-foreground",children:"Reliability"}),(0,l.jsxs)("span",{className:"text-foreground",children:[(100*a.reliability.onTimeRate).toFixed(0),"%"]})]})]}),(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,l.jsx)("span",{className:"text-muted-foreground",children:"Skill Match"}),(0,l.jsxs)(N.m_,{children:[(0,l.jsx)(N.k$,{asChild:!0,children:(0,l.jsx)(L.A,{className:"h-3 w-3 text-muted-foreground/60 hover:text-muted-foreground cursor-help"})}),(0,l.jsx)(N.ZI,{side:"top",className:"max-w-xs",children:(0,l.jsx)(H.P,{className:"text-xs",children:"Calculated by averaging the technician's skill ratings (1-5 scale) for each media type required by the job. The average is converted to a percentage (multiplied by 20)."})})]})]}),(0,l.jsxs)("span",{className:"text-foreground",children:[t.skillMatch.toFixed(0),"%"]})]}),(0,l.jsx)(S.k,{value:t.skillMatch,className:"h-1.5"})]})]}),(0,l.jsxs)("div",{className:"flex w-full",children:[(0,l.jsxs)("div",{className:"text-center py-2 border-r border-border flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,l.jsx)(h.A,{className:"h-3.5 w-3.5 fill-muted-foreground/60 text-muted-foreground/60"}),(0,l.jsx)("span",{className:"text-sm font-semibold text-foreground",children:a.rating.overall})]}),(0,l.jsx)("div",{className:"text-xs text-muted-foreground/80 mt-0.5",children:"Rating"})]}),(0,l.jsx)(B.w,{orientation:"vertical",className:"h-1/2 self-center"}),(0,l.jsxs)("div",{className:"text-center py-2 border-r border-border flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,l.jsx)(u.A,{className:"h-3.5 w-3.5 fill-muted-foreground/60 text-muted-foreground/60"}),(0,l.jsx)("span",{className:"text-sm font-semibold text-foreground",children:a.reliability.totalJobs})]}),(0,l.jsx)("div",{className:"text-xs text-muted-foreground/80 mt-0.5",children:"jobs"})]}),(0,l.jsx)(B.w,{orientation:"vertical",className:"h-1/2 self-center"}),(0,l.jsxs)("div",{className:"text-center py-2 flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,l.jsx)(A.A,{className:"h-3.5 w-3.5 fill-muted-foreground/60 text-muted-foreground/60"}),(0,l.jsxs)("span",{className:"text-sm font-semibold text-foreground",children:[a.reliability.averageDeliveryTime,"h"]})]}),(0,l.jsx)("div",{className:"text-xs text-muted-foreground/80 mt-0.5",children:"avg delivery"})]})]})]}),(0,l.jsx)(I.wL,{className:"flex flex-col gap-3 p-6",children:d&&(0,l.jsxs)(N.m_,{children:[(0,l.jsx)(N.k$,{asChild:!0,children:(0,l.jsx)("span",{className:"w-full",children:(0,l.jsxs)(f.$,{onClick:e=>{e.stopPropagation(),d()},disabled:!g&&!j,className:"w-full ".concat(c?"bg-emerald-600 ":"bg-primary "," shadow-md disabled:opacity-50 disabled:cursor-not-allowed"),children:[c&&(0,l.jsx)(T.A,{className:"h-4 w-4 mr-2"}),c?"Assign (Recommended)":"Assign Technician"]})})}),!g&&!j&&(0,l.jsx)(N.ZI,{children:(0,l.jsx)(H.P,{children:"This technician is not available for assignment"})})]})})]})})}var q=a(20508);function F(e){let{technicians:s,companies:a,onSelect:n,preferredVendors:d=[]}=e,[o,m]=(0,t.useState)(""),[x,u]=(0,t.useState)("technician"),j="technician"===x?s.filter(e=>e.name.toLowerCase().includes(o.toLowerCase())):[],p="company"===x?a.filter(e=>"COMPANY"===e.type&&e.name.toLowerCase().includes(o.toLowerCase())):[];return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex gap-2 p-1 bg-muted rounded-lg",children:[(0,l.jsx)("button",{onClick:()=>u("technician"),className:"flex-1 px-4 py-2 rounded-lg text-sm transition-all ".concat("technician"===x?"bg-card shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:(0,l.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,l.jsx)(q.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{children:"Search Technicians"})]})}),(0,l.jsx)("button",{onClick:()=>u("company"),className:"flex-1 px-4 py-2 rounded-lg text-sm transition-all ".concat("company"===x?"bg-card shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:(0,l.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,l.jsx)(M.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{children:"Search Companies"})]})})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(c.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground/60"}),(0,l.jsx)(g.p,{value:o,onChange:e=>m(e.target.value),placeholder:"technician"===x?"Search technicians by name...":"Search media companies...",className:"pl-12 h-12"})]}),(0,l.jsxs)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:["technician"===x&&j.map(e=>{let s=d.includes(e.companyId||e.id);return(0,l.jsx)(J.P.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},onClick:()=>n(e.id),className:"w-full p-4 border-2 border-border rounded-xl hover:border-indigo-300 transition-all text-left",children:(0,l.jsxs)("div",{className:"flex items-start gap-4",children:[(0,l.jsxs)(i.eu,{className:"size-14 border-2 border-white shadow-md",children:[(0,l.jsx)(i.BK,{src:e.avatar}),(0,l.jsx)(i.q5,{className:"bg-primary text-primary-foreground",children:e.name.split(" ").map(e=>e[0]).join("")})]}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,l.jsx)("h4",{className:"text-sm truncate",children:e.name}),s&&(0,l.jsx)(E.A,{className:"h-4 w-4 fill-red-500 text-red-500 flex-shrink-0"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-2",children:[(0,l.jsx)(h.A,{className:"h-3.5 w-3.5 fill-yellow-400 text-yellow-400"}),(0,l.jsx)("span",{children:e.rating.overall}),(0,l.jsx)("span",{className:"text-muted-foreground/60",children:"•"}),e.isIndependent?(0,l.jsx)(r.E,{variant:"outline",className:"text-xs h-5",children:"Independent"}):(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)(M.A,{className:"h-3 w-3"}),(0,l.jsx)("span",{children:e.companyName})]})]}),e.bio&&(0,l.jsx)(H.P,{className:"text-xs text-muted-foreground/80 line-clamp-2",children:e.bio})]})]})},e.id)}),"company"===x&&p.map(e=>{let a=d.includes(e.id),t=s.filter(s=>s.companyId===e.id);return(0,l.jsxs)(J.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 border-2 border-border rounded-xl",children:[(0,l.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[(0,l.jsxs)(i.eu,{className:"size-14 border-2 border-white shadow-md",children:[(0,l.jsx)(i.BK,{src:e.avatar}),(0,l.jsx)(i.q5,{children:e.name.split(" ").map(e=>e[0]).join("")})]}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,l.jsx)("h4",{className:"text-sm",children:e.name}),a&&(0,l.jsxs)(r.E,{className:"bg-gradient-to-r from-red-500 to-pink-500 text-xs h-5",children:[(0,l.jsx)(E.A,{className:"h-3 w-3 mr-1"}),"Preferred"]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-2",children:[e.rating&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.A,{className:"h-3.5 w-3.5 fill-yellow-400 text-yellow-400"}),(0,l.jsx)("span",{children:e.rating}),(0,l.jsx)("span",{className:"text-muted-foreground/60",children:"•"})]}),(0,l.jsxs)("span",{children:[e.technicianCount," technicians"]})]}),(0,l.jsx)(H.P,{className:"text-xs text-muted-foreground/80",children:e.description})]})]}),(0,l.jsxs)("div",{className:"space-y-2 pl-4 border-l-2 border-border",children:[(0,l.jsx)("div",{className:"text-xs text-muted-foreground/80 mb-2",children:"Available technicians:"}),t.slice(0,3).map(e=>(0,l.jsxs)("button",{onClick:()=>n(e.id),className:"w-full flex items-center gap-3 p-2 hover:bg-accent rounded-lg transition-colors text-left",children:[(0,l.jsxs)(i.eu,{className:"h-8 w-8",children:[(0,l.jsx)(i.BK,{src:e.avatar}),(0,l.jsx)(i.q5,{className:"text-xs",children:e.name.split(" ").map(e=>e[0]).join("")})]}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("div",{className:"text-xs text-foreground truncate",children:e.name}),(0,l.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground/80",children:[(0,l.jsx)(h.A,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),(0,l.jsx)("span",{children:e.rating.overall})]})]})]},e.id))]})]},e.id)}),o&&("technician"===x&&0===j.length||"company"===x&&0===p.length)&&(0,l.jsxs)("div",{className:"text-center py-8 text-muted-foreground/80",children:[(0,l.jsx)(c.A,{className:"size-12 mx-auto mb-2 text-muted-foreground/40"}),(0,l.jsx)(H.P,{className:"text-sm",children:"No results found"})]}),!o&&(0,l.jsxs)("div",{className:"text-center py-8 text-muted-foreground/80",children:[(0,l.jsx)(c.A,{className:"size-12 mx-auto mb-2 text-muted-foreground/40"}),(0,l.jsx)(H.P,{className:"text-sm",children:"technician"===x?"Search for a specific technician":"Search for a media company"})]})]})]})}},51539:(e,s,a)=>{a.d(s,{$m:()=>d,As:()=>c,nD:()=>r,ub:()=>o});var l=a(95155);a(12115);var t=a(58609),n=a(24033),i=a(64936);function r(e){let{...s}=e;return(0,l.jsx)(t.bL,{"data-slot":"accordion",...s})}function c(e){let{className:s,...a}=e;return(0,l.jsx)(t.q7,{"data-slot":"accordion-item",className:(0,i.cn)("border-b last:border-b-0",s),...a})}function d(e){let{className:s,children:a,...r}=e;return(0,l.jsx)(t.Y9,{className:"flex",children:(0,l.jsxs)(t.l9,{"data-slot":"accordion-trigger",className:(0,i.cn)("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",s),...r,children:[a,(0,l.jsx)(n.A,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function o(e){let{className:s,children:a,...n}=e;return(0,l.jsx)(t.UC,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...n,children:(0,l.jsx)("div",{className:(0,i.cn)("pt-0 pb-4",s),children:a})})}},64563:(e,s,a)=>{a.d(s,{I:()=>b});var l=a(95155),t=a(12115),n=a(96633),i=a(33884),r=a(86651),c=a(93341),d=a(23664),o=a(29633),m=a(18514),x=a(46858),h=a(37135),u=a(33789),j=a(47507),p=a(68122),g=a(97003),v=a(82180),f=a(84916),N=a(51631);function b(e){let{customers:s=[],onRowClick:a,isLoading:b=!1,onEdit:y,onDelete:w,deletingId:A,isDeleting:C=!1,selectedIds:k=[],onToggleSelect:I,onToggleSelectAll:S}=e,[R,T]=(0,t.useState)(""),[M,E]=(0,t.useState)("name-asc"),[L,J]=(0,t.useState)(1),[P,D]=(0,t.useState)(10),O=(0,t.useMemo)(()=>{let e=[...s];if(R){let s=R.toLowerCase();e=e.filter(e=>{let a=e.name.toLowerCase(),l=(e.email||"").toLowerCase(),t=(e.notes||"").toLowerCase(),n=(e.phone||"").toLowerCase();return a.includes(s)||l.includes(s)||t.includes(s)||n.includes(s)})}return e.sort((e,s)=>{switch(M){case"name-asc":return e.name.localeCompare(s.name);case"name-desc":return s.name.localeCompare(e.name);case"notes-asc":return(e.notes||"").localeCompare(s.notes||"");case"notes-desc":return(s.notes||"").localeCompare(e.notes||"");case"jobs-asc":return(e.totalJobs||0)-(s.totalJobs||0);case"jobs-desc":return(s.totalJobs||0)-(e.totalJobs||0);default:return 0}}),e},[s,R,M]),U=Math.max(1,Math.ceil(O.length/P)),z=(L-1)*P,B=z+P,H=O.slice(z,B),Z=H.length>0&&H.every(e=>k.includes(e.id));H.some(e=>k.includes(e.id)),(0,t.useEffect)(()=>{let e=Math.max(1,Math.ceil(O.length/P));L>e?J(e):L<1&&J(1)},[O.length,P,L]);let _=e=>{J(Math.min(Math.max(e,1),U))};return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsxs)("div",{className:"relative flex-1 min-w-0",children:[(0,l.jsx)(r.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground/60"}),(0,l.jsx)(u.p,{type:"text",variant:"muted",placeholder:"Search by name, email, or brokerage...",value:R,onChange:e=>T(e.target.value),className:"pl-10"})]}),(0,l.jsxs)(j.l6,{value:M,onValueChange:E,children:[(0,l.jsxs)(j.bq,{variant:"muted",className:"w-10 md:w-[180px] shrink-0 [&>svg:last-child]:hidden md:[&>svg:last-child]:block",children:[(0,l.jsx)(c.A,{className:"h-4 w-4 md:mr-2"}),(0,l.jsx)(j.yv,{placeholder:"Sort by",className:"hidden md:inline"})]}),(0,l.jsxs)(j.gC,{children:[(0,l.jsx)(j.eb,{value:"name-asc",children:"Name (A-Z)"}),(0,l.jsx)(j.eb,{value:"name-desc",children:"Name (Z-A)"}),(0,l.jsx)(j.eb,{value:"notes-asc",children:"Notes (A-Z)"}),(0,l.jsx)(j.eb,{value:"notes-desc",children:"Notes (Z-A)"}),(0,l.jsx)(j.eb,{value:"jobs-desc",children:"Jobs (Most)"}),(0,l.jsx)(j.eb,{value:"jobs-asc",children:"Jobs (Least)"})]})]})]}),O.length>0&&(0,l.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",O.length," of ",s.length," customers"]}),(0,l.jsxs)(n.XI,{children:[(0,l.jsx)(n.A0,{children:(0,l.jsxs)(n.Hj,{children:[(0,l.jsx)(n.nd,{className:"w-10",children:(0,l.jsx)(f.S,{"aria-label":"Select all",checked:Z,onCheckedChange:e=>null==S?void 0:S(O.map(e=>e.id),!!e),disabled:0===O.length})}),(0,l.jsx)(n.nd,{children:"Customer"}),(0,l.jsx)(n.nd,{children:"Email"}),(0,l.jsx)(n.nd,{children:"Phone"}),(0,l.jsx)(n.nd,{children:"Jobs"}),(0,l.jsx)(n.nd,{children:"Last Job"}),(0,l.jsx)(n.nd,{children:"Created"}),(0,l.jsx)(n.nd,{className:"text-right",children:"Actions"})]})}),(0,l.jsx)(n.BF,{children:b?Array.from({length:5}).map((e,s)=>(0,l.jsxs)(n.Hj,{children:[(0,l.jsx)(n.nA,{children:(0,l.jsx)(p.E,{className:"h-4 w-4"})}),(0,l.jsx)(n.nA,{children:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)(i.eu,{className:"size-10 border-2 border-border",children:[(0,l.jsx)(i.BK,{}),(0,l.jsx)(i.q5,{className:"bg-muted"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(p.E,{className:"h-4 w-32"}),(0,l.jsx)(p.E,{className:"h-3 w-24"})]})]})}),(0,l.jsx)(n.nA,{children:(0,l.jsx)(p.E,{className:"h-4 w-32"})}),(0,l.jsx)(n.nA,{children:(0,l.jsx)(p.E,{className:"h-4 w-24"})}),(0,l.jsx)(n.nA,{children:(0,l.jsx)(p.E,{className:"h-4 w-12"})}),(0,l.jsx)(n.nA,{children:(0,l.jsx)(p.E,{className:"h-4 w-20"})}),(0,l.jsx)(n.nA,{children:(0,l.jsx)(p.E,{className:"h-4 w-24"})}),(0,l.jsx)(n.nA,{children:(0,l.jsx)(p.E,{className:"h-4 w-16 ml-auto"})})]},"customer-skeleton-".concat(s))):0===O.length?(0,l.jsx)(n.Hj,{children:(0,l.jsx)(n.nA,{colSpan:8,className:"text-center py-12 text-muted-foreground",children:"No customers found"})}):H.map(e=>{var s;return(0,l.jsxs)(n.Hj,{className:a?"cursor-pointer hover:bg-muted/50":"",onClick:()=>null==a?void 0:a(e),children:[(0,l.jsx)(n.nA,{onClick:e=>e.stopPropagation(),children:(0,l.jsx)(f.S,{"aria-label":"Select ".concat(e.name),checked:k.includes(e.id),onCheckedChange:s=>null==I?void 0:I(e.id,!!s)})}),(0,l.jsx)(n.nA,{children:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)(i.eu,{className:"size-10 border-2 border-border",children:[(0,l.jsx)(i.BK,{src:e.avatar}),(0,l.jsx)(i.q5,{className:"bg-primary text-primary-foreground text-xs",children:e.name.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-medium",children:e.name}),e.lastJob&&(0,l.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Last job: ",new Date(e.lastJob).toLocaleDateString()]})]})]})}),(0,l.jsx)(n.nA,{children:(0,l.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,l.jsx)(d.A,{className:"h-4 w-4 text-muted-foreground/60"}),(0,l.jsx)("span",{className:"text-muted-foreground",children:e.email||"—"})]})}),(0,l.jsx)(n.nA,{children:(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:e.phone||"—"})}),(0,l.jsx)(n.nA,{children:(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)(o.A,{className:"h-4 w-4 text-muted-foreground/60"}),(0,l.jsx)("span",{children:null!=(s=e.totalJobs)?s:0})]})}),(0,l.jsx)(n.nA,{children:(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:e.lastJob?new Date(e.lastJob).toLocaleDateString():"—"})}),(0,l.jsx)(n.nA,{children:(0,l.jsxs)(v.m_,{children:[(0,l.jsx)(v.k$,{asChild:!0,children:(0,l.jsx)("span",{className:"text-sm text-muted-foreground cursor-default",children:(e=>{if(!e)return"—";let s="string"==typeof e?new Date(e):e;return Number.isNaN(s.getTime())?"—":s.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})})(e.createdAt)})}),(0,l.jsx)(v.ZI,{children:e.createdAt?new Date(e.createdAt).toISOString():"Unknown"})]})}),(0,l.jsx)(n.nA,{children:(0,l.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,l.jsx)(g.$,{variant:"ghost",size:"icon-sm",onClick:s=>{s.stopPropagation(),e.userId||null==y||y(e)},disabled:!!e.userId||!y,children:(0,l.jsx)(m.A,{className:"h-4 w-4"})}),(0,l.jsxs)(v.m_,{children:[(0,l.jsx)(v.k$,{asChild:!0,children:(0,l.jsx)(g.$,{variant:"ghost",size:"icon-sm",onClick:s=>{s.stopPropagation(),null==w||w(e)},disabled:!w||A===e.id||"bulk"===A||C,children:e.userId?(0,l.jsx)(x.A,{className:"h-4 w-4 text-destructive"}):(0,l.jsx)(h.A,{className:"h-4 w-4 text-destructive"})})}),(0,l.jsx)(v.ZI,{children:e.userId?"Remove from organization":"Delete customer"})]})]})})]},e.id)})})]}),!b&&O.length>0&&(0,l.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,l.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",z+1,"-",Math.min(B,O.length)," of ",O.length]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)(j.l6,{value:P.toString(),onValueChange:e=>{D(Number(e)),J(1)},children:[(0,l.jsx)(j.bq,{className:"w-[140px]",children:(0,l.jsx)(j.yv,{placeholder:"Per page"})}),(0,l.jsxs)(j.gC,{children:[(0,l.jsx)(j.eb,{value:"10",children:"10 per page"}),(0,l.jsx)(j.eb,{value:"25",children:"25 per page"}),(0,l.jsx)(j.eb,{value:"50",children:"50 per page"}),(0,l.jsx)(j.eb,{value:"100",children:"100 per page"})]})]}),U>1&&(0,l.jsx)(N.dK,{children:(0,l.jsxs)(N.Iu,{children:[(0,l.jsx)(N.cU,{children:(0,l.jsx)(N.Eb,{onClick:()=>_(L-1),className:1===L?"pointer-events-none opacity-50":"cursor-pointer"})}),(()=>{let e=[];if(U<=5)for(let s=1;s<=U;s++)e.push(s);else{e.push(1),L>3&&e.push("ellipsis");let s=Math.max(2,L-1),a=Math.min(U-1,L+1);for(let l=s;l<=a;l++)e.push(l);L<U-2&&e.push("ellipsis"),e.push(U)}return e})().map((e,s)=>(0,l.jsx)(N.cU,{children:"ellipsis"===e?(0,l.jsx)(N.M_,{}):(0,l.jsx)(N.n$,{onClick:()=>_(e),isActive:L===e,className:"cursor-pointer",children:e})},"".concat(e,"-").concat(s))),(0,l.jsx)(N.cU,{children:(0,l.jsx)(N.WA,{onClick:()=>_(L+1),className:L===U?"pointer-events-none opacity-50":"cursor-pointer"})})]})})]})]})]})}},84916:(e,s,a)=>{a.d(s,{S:()=>r});var l=a(95155);a(12115);var t=a(38162),n=a(5917),i=a(25016);function r(e){let{className:s,...a}=e;return(0,l.jsx)(t.bL,{"data-slot":"checkbox",className:(0,i.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:(0,l.jsx)(t.C1,{"data-slot":"checkbox-indicator",className:"grid place-content-center text-current transition-none",children:(0,l.jsx)(n.A,{className:"size-3.5"})})})}},89129:(e,s,a)=>{a.d(s,{_:()=>A});var l=a(95155);a(24960);var t=a(83209),n=a(48432),i=a(62816),r=a(94876),c=a(29633),d=a(61362),o=a(39347),m=a(1524),x=a(16485);function h(e){let{upcomingJobs:s,totalJobs:a,rating:h,onTimeRate:u}=e;return(0,l.jsxs)("main",{className:"container mx-auto p-6 h-full space-y-6","data-tour":"jobs-view",children:[(0,l.jsx)(n.MD,{stats:[{icon:c.A,value:s.length,label:"Upcoming Jobs",iconBgColor:"bg-accent",iconColor:"text-primary"},{icon:d.A,value:a,label:"Total Completed",iconBgColor:"bg-emerald-100",iconColor:"text-emerald-600"},{icon:o.A,value:h.toFixed(1),label:"Rating",iconBgColor:"bg-yellow-100",iconColor:"text-yellow-600"},{icon:m.A,value:u,label:"On-Time Rate",valueSuffix:"%",iconBgColor:"bg-accent",iconColor:"text-primary"}]}),(0,l.jsxs)(t.Zp,{className:"p-6",children:[(0,l.jsx)("h2",{className:"text-xl mb-4",children:"Upcoming Shoots"}),(0,l.jsx)(i.bm,{title:"All Upcoming Shoots",items:s,itemCount:5,searchPlaceholder:"Search by address, client, Order #...",searchFields:e=>"".concat(e.propertyAddress," ").concat(e.clientName," ").concat(e.scheduledDate," ").concat(e.orderNumber),filterOptions:[{label:"Urgent",value:"urgent"},{label:"Rush",value:"rush"},{label:"Standard",value:"standard"}],onFilterChange:e=>s.filter(s=>"all"===e||s.priority===e),renderItem:e=>(0,l.jsx)(r.De,{job:e},e.id),emptyMessage:"No upcoming shoots",emptyIcon:x.A,emptyTitle:"No upcoming shoots",emptyDescription:"New jobs will appear here"})]})]})}var u=a(80492);function j(e){let{provider:s,onUpdateProfile:a,organizationSettingsPath:t}=e;return(0,l.jsx)("main",{className:"container mx-auto p-6 h-full space-y-6",children:(0,l.jsx)("div",{className:"container mx-auto px-6",style:{maxWidth:"896px",marginLeft:"auto",marginRight:"auto"},children:(0,l.jsx)(u.p,{provider:s,organizationSettingsPath:t,onSave:a})})})}var p=a(12115),g=a(97003),v=a(27346),f=a(54679),N=a(73344),b=a(86651),y=a(19408);function w(e){let{provider:s,companies:a,applications:n,onApplyToCompany:i}=e,[c,d]=(0,p.useState)(!1),o=a.filter(e=>"COMPANY"===e.type),m=n.filter(e=>e.userId===s.userId&&"pending"===e.status);return(0,l.jsxs)("main",{className:"container mx-auto p-6 h-full space-y-6",children:[(0,l.jsxs)("div",{className:"container mx-auto px-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(N.H2,{className:"text-2xl border-0",children:"Media Companies"}),s.isIndependent&&(0,l.jsxs)(g.$,{onClick:()=>d(!0),children:[(0,l.jsx)(b.A,{className:"h-4 w-4 mr-2"}),"Browse Companies"]})]}),m.length>0&&(0,l.jsxs)(t.Zp,{className:"p-6",children:[(0,l.jsx)(N.H3,{className:"text-lg mb-4",children:"Pending Applications"}),(0,l.jsx)("div",{className:"space-y-3",children:m.map(e=>(0,l.jsx)(r.XY,{application:e},e.id))})]}),!s.isIndependent&&s.companyId&&(0,l.jsx)(t.Zp,{className:"p-6",children:(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("div",{className:"p-4 bg-primary rounded-xl",children:(0,l.jsx)(y.A,{className:"h-8 w-8 text-primary-foreground"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)(N.H3,{className:"text-lg",children:s.companyName}),(0,l.jsx)(N.Oc,{className:"text-muted-foreground",children:"Your current company"})]})]})})]}),(0,l.jsx)(f.lG,{open:c,onOpenChange:d,children:(0,l.jsxs)(f.Cf,{className:"max-w-4xl max-h-[90vh]",children:[(0,l.jsx)(f.c7,{children:(0,l.jsx)(f.L3,{children:"Browse Media Companies"})}),(0,l.jsx)(v.F,{className:"max-h-[calc(90vh-120px)]",children:(0,l.jsx)("div",{className:"space-y-4 p-1",children:o.map(e=>{let a=n.some(a=>a.userId===s.userId&&a.companyId===e.id&&"pending"===a.status);return(0,l.jsx)(r.I2,{company:e,onApply:i,isApplied:a,showApplyButton:!0},e.id)})})})]})})]})}function A(e){let{provider:s,jobs:a,companies:t,applications:n,onUpdateProfile:i,onApplyToCompany:r,activeView:c="jobs",organizationSettingsPath:d}=e,o=a.filter(e=>e.assignedTechnicianId===s.userId).filter(e=>"assigned"===e.status);return(0,l.jsxs)("div",{className:"size-full overflow-x-hidden",children:["jobs"===c&&(0,l.jsx)(h,{upcomingJobs:o,totalJobs:s.reliability.totalJobs,rating:s.rating.overall,onTimeRate:100*s.reliability.onTimeRate}),"profile"===c&&(0,l.jsx)(j,{provider:s,onUpdateProfile:i,organizationSettingsPath:d}),"companies"===c&&(0,l.jsx)(w,{provider:s,companies:t,applications:n,onApplyToCompany:r})]})}}}]);