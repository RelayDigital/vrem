(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2892,9980],{24632:(e,s,a)=>{"use strict";a.d(s,{l:()=>n});var t=a(12115),r=a(20063),l=a(65939),i=a(75701),c=a(80408);function n(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(0,r.useRouter)(),{user:n,isLoading:d,activeOrganizationId:o,memberships:m}=(0,l.A)(),{redirectTo:x,enforceRedirect:h}=s,u=(0,t.useCallback)(()=>(0,i.in)(m,o),[m,o]);return(0,t.useEffect)(()=>{if(d)return;if(!n)return void a.push("/");let s=e.map(e=>(0,c.FK)(e)),t=(0,c.FK)(n.accountType),r=m.find(e=>e.orgId===o),l=(0,i.hq)(r,t);if(!s.includes(l)){if(!1===h)return;if(x)a.push(x);else{let e=(0,i.zE)(l);a.push(e)}}},[n,d,e,a,x,h,m,o]),{user:n,organizationId:o,memberships:m,isLoading:d,getActiveOrgRole:u}}},39877:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>eE});var t=a(95155),r=a(12115),l=a(20063),i=a(24632),c=a(18720),n=a(26497),d=a(73344),o=a(97003),m=a(33789),x=a(36838),h=a(86651),u=a(95740),p=a(6132),j=a(21873),f=a(81130);function g(e){let{onAddressSelect:s}=e,[a,l]=(0,r.useState)(""),[i,c]=(0,r.useState)(!1),[o,g]=(0,r.useState)([]),[N,y]=(0,r.useState)(!1),[v,b]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(!a||a.length<3)return void g([]);let e="pk.eyJ1IjoiZHVyb2RwIiwiYSI6ImNtaHplcW53cDA4dHQycnB6dnhqeGtveXgifQ.6GR-s3V7vfGRsoVlhSTFhg";if(!e){b("Mapbox token not configured"),console.warn("Please add NEXT_PUBLIC_MAPBOX_TOKEN to your .env.local file");return}y(!0),b(null);let s=setTimeout(()=>{fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(a),".json?access_token=").concat(e,"&types=address&country=us,ca&limit=5")).then(e=>{if(!e.ok)throw Error("Geocoding request failed");return e.json()}).then(e=>{y(!1),g(e.features||[])}).catch(e=>{console.error("Geocoding error:",e),y(!1),b("Failed to search addresses"),g([])})},300);return()=>clearTimeout(s)},[a]);let w=(0,r.useCallback)(e=>{var s,a,t;let r,l,i,c,n=e.context||[],d=(null==(s=e.properties)?void 0:s.address)||"",o=e.text||"",m=d?"".concat(d," ").concat(o).trim():o||e.place_name.split(",")[0]||"";for(let e of n)switch(e.id.split(".")[0]){case"place":case"locality":r=e.text;break;case"region":l=(null==(a=e.short_code)?void 0:a.split("-")[1])||e.text;break;case"postcode":i=e.text;break;case"country":c=(null==(t=e.short_code)?void 0:t.toUpperCase())||e.text}return{addressLine1:m,city:r,region:l,postalCode:i,countryCode:c}},[]),A=(0,r.useCallback)(async e=>{l(e.place_name),g([]),c(!1);let[a,t]=e.center,r=w(e);s(e.place_name,{lat:t,lng:a},r)},[s,w]);return(0,t.jsx)("div",{className:"relative w-full max-w-3xl mx-auto",children:(0,t.jsxs)(f.P.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute left-5 top-1/2 -translate-y-1/2 flex items-center gap-3",children:(0,t.jsx)(h.A,{className:"h-6 w-6 text-muted-foreground/60"})}),(0,t.jsx)(m.p,{value:a,onChange:e=>l(e.target.value),onFocus:()=>c(!0),onBlur:()=>{setTimeout(()=>c(!1),150)},placeholder:"Enter property address...",className:"h-16 pl-16 pr-6 text-lg rounded-2xl transition-all md:rounded-3xl",variant:"muted",disabled:!!v}),N?(0,t.jsx)(f.P.div,{initial:{scale:0},animate:{scale:1},className:"absolute right-5 top-1/2 -translate-y-1/2",children:(0,t.jsx)(x.y,{className:"h-5 w-5 text-foreground"})}):a&&(0,t.jsx)(f.P.div,{initial:{scale:0},animate:{scale:1},className:"absolute right-5 top-1/2 -translate-y-1/2",children:(0,t.jsx)(u.A,{className:"h-5 w-5 text-foreground"})})]}),v&&(0,t.jsxs)(f.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mt-2 p-3 bg-destructive/10 border border-destructive/30 rounded-lg flex items-start gap-2",children:[(0,t.jsx)(p.A,{className:"h-5 w-5 text-destructive flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.P,{className:"text-sm text-red-800",children:v}),(0,t.jsx)(d.P,{className:"text-xs text-destructive mt-1",children:"Add NEXT_PUBLIC_MAPBOX_TOKEN to your .env.local file"})]})]}),(0,t.jsx)(n.N,{children:i&&o.length>0&&(0,t.jsx)(f.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute top-full mt-2 w-full bg-card rounded-2xl border-2 border-border shadow-2xl overflow-hidden z-50",children:(0,t.jsx)("div",{className:"p-3",children:(0,t.jsx)("div",{className:"space-y-1 max-h-80 overflow-y-auto",children:o.map((e,s)=>(0,t.jsx)(f.P.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*s},onClick:()=>A(e),className:"w-full text-left p-3 rounded-xl hover:bg-muted/50 transition-colors group",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-muted rounded-lg group-hover:bg-primary/5 transition-colors",children:(0,t.jsx)(j.A,{className:"h-5 w-5 text-muted-foreground group-hover:text-foreground"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"text-sm text-foreground font-medium",children:e.text||e.place_name.split(",")[0]||""}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground/80 mt-0.5 truncate",children:(e=>{let s=e.place_name.split(",");return s.length>1?s.slice(1).join(",").trim():""})(e)})]})]})},e.id))})})})}),i&&a.length>=3&&0===o.length&&!N&&!v&&(0,t.jsxs)(f.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"absolute top-full mt-2 w-full bg-card rounded-2xl border-2 border-border shadow-2xl overflow-hidden z-50 p-6 text-center",children:[(0,t.jsx)(j.A,{className:"size-12 mx-auto mb-2 text-muted-foreground/40"}),(0,t.jsx)(d.P,{className:"text-sm text-muted-foreground",children:"No addresses found"}),(0,t.jsx)(d.P,{className:"text-xs text-muted-foreground/80 mt-1",children:"Try a different search term"})]}),i&&(0,t.jsx)("div",{className:"fixed inset-0 -z-10",onClick:()=>c(!1)})]})})}var N=a(47507),y=a(35626);function v(e){let{onAddressSelect:s,selectedProviderName:a,onBack:r}=e;return(0,t.jsx)(f.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center justify-center container mx-auto px-6 py-12 h-full",children:(0,t.jsxs)("div",{className:"w-full container mx-auto space-y-8",style:{maxWidth:"896px"},children:[(0,t.jsxs)(f.P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},className:"text-center space-y-3",children:[(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-muted rounded-full text-foreground/90 text-sm mb-2",children:[(0,t.jsx)(j.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:a?"Booking with ".concat(a):"Property Location"})]}),(0,t.jsx)(d.H1,{className:"text-4xl md:text-5xl font-bold text-foreground",children:"Where's the property?"}),(0,t.jsx)(d.P,{className:"text-lg text-muted-foreground",children:"Enter the address to get started with your photo shoot booking"})]}),(0,t.jsx)(f.P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:(0,t.jsx)(g,{onAddressSelect:s})}),r&&(0,t.jsx)(f.P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"flex justify-center",children:(0,t.jsxs)(o.$,{variant:"ghost",onClick:r,className:"text-muted-foreground",children:[(0,t.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Back"]})})]})},"address")}var b=a(90235),w=a(67001),A=a(55725),k=a(97450),P=a(67812),C=a(71163),S=a(61362),E=a(52987),T=a(65993),D=a(16485),I=a(26983),z=a(26617),M=a(86868),O=a(43123),F=a(93366),$=a(92381),q=a(95657),R=a(25016),W=a(68122),_=a(89559);function L(e){let{selectedDate:s,selectedTime:a,onTimeSelect:l,technicianId:i,durationMins:c=60,className:n}=e,[d,m]=(0,r.useState)([]),[x,h]=(0,r.useState)(!1),[u,j]=(0,r.useState)(null),[f,g]=(0,r.useState)(null),N=(0,r.useCallback)(async()=>{if(s){h(!0),j(null);try{let e=(0,F.o)(s),a=(0,$.f)(e,1),t=((await q.F.nylas.getAvailability({start:e.toISOString(),end:a.toISOString(),durationMins:c,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,technicianId:i})).allSlots||[]).map(e=>({start:new Date(e.start),end:new Date(e.end),available:e.available}));m(t),g(t.length>0)}catch(e){console.error("Failed to fetch availability:",e),j("Could not load availability"),g(!1)}finally{h(!1)}}},[s,i,c]);if((0,r.useEffect)(()=>{s&&i?N():(m([]),g(null))},[s,i,N]),!i)return null;if(x)return(0,t.jsxs)("div",{className:(0,R.cn)("space-y-3",n),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(I.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Loading available times..."})]}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-2",children:Array.from({length:8}).map((e,s)=>(0,t.jsx)(W.E,{className:"h-10 w-full"},s))})]});if(u)return(0,t.jsx)("div",{className:(0,R.cn)("space-y-3",n),children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-destructive",children:[(0,t.jsx)(p.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:u}),(0,t.jsxs)(o.$,{variant:"ghost",size:"sm",onClick:N,className:"ml-2 h-7 px-2",children:[(0,t.jsx)(_.A,{className:"h-3 w-3 mr-1"}),"Retry"]})]})});if(!s)return(0,t.jsx)("div",{className:(0,R.cn)("space-y-3",n),children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(D.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Select a date to see available times"})]})});if(0===d.length)return(0,t.jsxs)("div",{className:(0,R.cn)("space-y-3",n),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(I.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"No availability data for this date"})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"The technician may not have connected their calendar or set work hours for this day."})]});let y=d.filter(e=>e.available),v=d.filter(e=>!e.available).length;return(0,t.jsxs)("div",{className:(0,R.cn)("space-y-3",n),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(I.A,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"Available times for"}),(0,t.jsx)(P.E,{variant:"outline",className:"font-normal",children:(0,C.GP)(s,"EEE, MMM d")})]}),v>0&&(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:[v," slots busy"]})]}),0===y.length?(0,t.jsxs)("div",{className:"p-4 rounded-lg bg-muted/50 text-center",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"No available times on this date"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Try selecting a different day"})]}):(0,t.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-2",children:d.map((e,s)=>{let r=(0,C.GP)(e.start,"HH:mm"),i=(0,C.GP)(e.start,"h:mm a"),c=a===r;return(0,t.jsx)(o.$,{variant:c?"default":"outline",size:"sm",disabled:!e.available,onClick:()=>l(r),className:(0,R.cn)("relative",!e.available&&"opacity-50 cursor-not-allowed line-through",c&&"ring-2 ring-primary ring-offset-2"),children:i},s)})})]})}var H=a(42303);function B(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"usd";return new Intl.NumberFormat("en-US",{style:"currency",currency:s.toUpperCase()}).format(e/100)}function U(e){let{selectedAddress:s,jobDetails:a,onJobDetailsChange:l,onBack:i,onNext:c,selectedProviderName:n,selectedPackage:m,selectedAddOns:x=[],totalPrice:h=0,technicianId:p,estimatedDuration:j=60,schedulingMode:g="scheduled",onSchedulingModeChange:v}=e,F=!!n,$=!!m,[q,R]=(0,r.useState)(g),W=v?g:q,_=e=>{v?v(e):R(e),"requested"===e&&l({...a,scheduledDate:"",scheduledTime:""})},U=a.scheduledDate?(()=>{try{let e=new Date(a.scheduledDate+"T00:00:00");return isNaN(e.getTime())?null:e}catch(e){return null}})():null;return(0,t.jsx)(f.P.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},className:"container mx-auto p-6 h-full",children:(0,t.jsxs)("div",{className:"container mx-auto space-y-6",style:{maxWidth:"896px",marginLeft:"auto",marginRight:"auto"},children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground flex-wrap",children:[F&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.A,{className:"h-5 w-5 text-green-500"}),(0,t.jsx)("span",{children:"Provider"}),(0,t.jsx)(E.A,{className:"h-4 w-4 mx-1"}),(0,t.jsx)(S.A,{className:"h-5 w-5 text-green-500"}),(0,t.jsx)("span",{children:"Package"}),(0,t.jsx)(E.A,{className:"h-4 w-4 mx-1"})]}),(0,t.jsx)(S.A,{className:"h-5 w-5 text-green-500"}),(0,t.jsx)("span",{children:"Address"}),(0,t.jsx)(E.A,{className:"h-4 w-4 mx-1"}),(0,t.jsx)("span",{className:"text-primary font-medium",children:"Schedule"}),(0,t.jsx)(E.A,{className:"h-4 w-4 mx-1"}),(0,t.jsx)("span",{className:"text-muted-foreground/60",children:F?"Confirm":"Find technician"})]}),(0,t.jsx)("div",{className:"bg-card rounded-2xl border-2 border-border p-6 shadow-sm",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"p-3 bg-emerald-100 rounded-xl",children:(0,t.jsx)(T.A,{className:"h-6 w-6 text-emerald-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground/80 mb-1",children:"Property Location"}),(0,t.jsx)("div",{className:"text-lg text-foreground",children:s})]})]}),(0,t.jsx)(o.$,{variant:"ghost",size:"sm",onClick:i,children:"Change"})]})}),(0,t.jsxs)("div",{className:"bg-card rounded-2xl border-2 border-border p-8 shadow-sm space-y-6",children:[(0,t.jsx)(d.H2,{className:"text-2xl border-0",children:$?"Schedule your shoot":"Tell us about the shoot"}),F&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(b.J,{className:"text-sm",children:"How would you like to schedule?"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>_("scheduled"),className:"flex items-start gap-3 p-4 rounded-xl border-2 transition-all text-left ".concat("scheduled"===W?"border-primary bg-primary/5":"border-border hover:border-primary/50"),children:[(0,t.jsx)("div",{className:"p-2 rounded-lg ".concat("scheduled"===W?"bg-primary":"bg-muted"),children:(0,t.jsx)(D.A,{className:"h-5 w-5 ".concat("scheduled"===W?"text-primary-foreground":"text-muted-foreground")})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"font-medium",children:"Pick a specific time"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Choose your preferred date and time"})]}),"scheduled"===W&&(0,t.jsx)(S.A,{className:"h-5 w-5 text-primary flex-shrink-0"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>_("requested"),className:"flex items-start gap-3 p-4 rounded-xl border-2 transition-all text-left ".concat("requested"===W?"border-primary bg-primary/5":"border-border hover:border-primary/50"),children:[(0,t.jsx)("div",{className:"p-2 rounded-lg ".concat("requested"===W?"bg-primary":"bg-muted"),children:(0,t.jsx)(I.A,{className:"h-5 w-5 ".concat("requested"===W?"text-primary-foreground":"text-muted-foreground")})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"font-medium",children:"Request scheduling"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Let the provider contact you to schedule"})]}),"requested"===W&&(0,t.jsx)(S.A,{className:"h-5 w-5 text-primary flex-shrink-0"})]})]})]}),"scheduled"===W&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.J,{children:"Shoot Date *"}),(0,t.jsxs)(k.AM,{children:[(0,t.jsx)(k.Wv,{asChild:!0,children:(0,t.jsxs)(o.$,{variant:"outline",className:"relative w-full justify-start text-left font-normal h-12 pl-11",children:[(0,t.jsx)(D.A,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground/60"}),a.scheduledDate?(()=>{try{let e=new Date(a.scheduledDate+"T00:00:00");if(!isNaN(e.getTime()))return(0,C.GP)(e,"PPP")}catch(e){}return a.scheduledDate})():(0,t.jsx)("span",{className:"text-muted-foreground",children:"Pick a date"})]})}),(0,t.jsx)(k.hl,{className:"w-auto p-0",align:"start",children:(0,t.jsx)(A.V,{mode:"single",selected:a.scheduledDate?(()=>{try{let e=new Date(a.scheduledDate+"T00:00:00");return isNaN(e.getTime())?void 0:e}catch(e){return}})():void 0,onSelect:e=>{e&&l({...a,scheduledDate:(0,C.GP)(e,"yyyy-MM-dd")})},disabled:e=>e<new Date(new Date().setHours(0,0,0,0)),initialFocus:!0})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.J,{children:"Start Time *"}),(0,t.jsxs)(k.AM,{children:[(0,t.jsx)(k.Wv,{asChild:!0,children:(0,t.jsxs)(o.$,{variant:"outline",className:"relative w-full justify-start text-left font-normal h-12 pl-11",children:[(0,t.jsx)(I.A,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground/60"}),a.scheduledTime?(()=>{try{let[e,s]=a.scheduledTime.split(":"),t=parseInt(e,10);return"".concat(0===t?12:t>12?t-12:t,":").concat(s," ").concat(t>=12?"PM":"AM")}catch(e){return a.scheduledTime}})():(0,t.jsx)("span",{className:"text-muted-foreground",children:"Pick a time"})]})}),(0,t.jsx)(k.hl,{className:"w-auto p-4",align:"start",children:(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,t.jsxs)(N.l6,{value:a.scheduledTime?(()=>{let[e]=a.scheduledTime.split(":"),s=parseInt(e,10);return(0===s?12:s>12?s-12:s).toString()})():"9",onValueChange:e=>{let s=a.scheduledTime&&a.scheduledTime.split(":")[1]||"00",t=(a.scheduledTime?parseInt(a.scheduledTime.split(":")[0],10):9)>=12,r="12"===e?12*!!t:t?parseInt(e,10)+12:parseInt(e,10);l({...a,scheduledTime:"".concat(r.toString().padStart(2,"0"),":").concat(s)})},children:[(0,t.jsx)(N.bq,{className:"w-full",children:(0,t.jsx)(N.yv,{placeholder:"Hour"})}),(0,t.jsx)(N.gC,{children:Array.from({length:12},(e,s)=>(0,t.jsx)(N.eb,{value:(s+1).toString(),children:s+1},s+1))})]}),(0,t.jsxs)(N.l6,{value:a.scheduledTime&&a.scheduledTime.split(":")[1]||"00",onValueChange:e=>{let s=a.scheduledTime?parseInt(a.scheduledTime.split(":")[0],10):9;l({...a,scheduledTime:"".concat(s.toString().padStart(2,"0"),":").concat(e.padStart(2,"0"))})},children:[(0,t.jsx)(N.bq,{className:"w-full",children:(0,t.jsx)(N.yv,{placeholder:"Minute"})}),(0,t.jsx)(N.gC,{children:[0,15,30,45].map(e=>(0,t.jsx)(N.eb,{value:e.toString().padStart(2,"0"),children:e.toString().padStart(2,"0")},e))})]}),(0,t.jsxs)(N.l6,{value:a.scheduledTime?(()=>{let[e]=a.scheduledTime.split(":");return parseInt(e,10)>=12?"PM":"AM"})():"AM",onValueChange:e=>{let s=a.scheduledTime&&a.scheduledTime.split(":")[1]||"00",t=a.scheduledTime?parseInt(a.scheduledTime.split(":")[0],10):9,r=0===t?12:t>12?t-12:t;l({...a,scheduledTime:"".concat(("PM"===e?12===r?12:r+12:12===r?0:r).toString().padStart(2,"0"),":").concat(s)})},children:[(0,t.jsx)(N.bq,{className:"w-full",children:(0,t.jsx)(N.yv,{placeholder:"AM/PM"})}),(0,t.jsxs)(N.gC,{children:[(0,t.jsx)(N.eb,{value:"AM",children:"AM"}),(0,t.jsx)(N.eb,{value:"PM",children:"PM"})]})]})]})})})]})]})]}),!!p&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.J,{children:"Available Times"}),(0,t.jsx)(L,{selectedDate:U,selectedTime:a.scheduledTime,onTimeSelect:e=>l({...a,scheduledTime:e}),technicianId:p,durationMins:j})]})]}),"requested"===W&&F&&(0,t.jsx)("div",{className:"bg-muted/50 rounded-xl p-4 border border-border",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/30 rounded-lg",children:(0,t.jsx)(I.A,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"Scheduling to be arranged"}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground mt-0.5",children:[n," will contact you to schedule the shoot at a mutually convenient time."]})]})]})}),$?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(b.J,{className:"text-sm",children:"Selected Package"}),(0,t.jsxs)("div",{className:"bg-muted/50 rounded-xl p-4 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg",children:(0,t.jsx)(z.A,{className:"h-5 w-5 text-primary"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:m.name}),m.description&&(0,t.jsx)("div",{className:"text-sm text-muted-foreground mt-0.5",children:m.description}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1.5 mt-2",children:m.mediaTypes.map(e=>(0,t.jsx)(P.E,{variant:"secondary",className:"text-xs",children:e},e))})]})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsx)("div",{className:"font-semibold",children:B(m.price,m.currency)})})]}),x.length>0&&(0,t.jsxs)("div",{className:"border-t border-border pt-3 space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(u.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Add-ons included:"})]}),x.map(e=>{let{addOn:s,quantity:a}=e;return(0,t.jsxs)("div",{className:"flex justify-between text-sm pl-6",children:[(0,t.jsxs)("span",{children:[s.name,a>1&&(0,t.jsxs)("span",{className:"text-muted-foreground ml-1",children:["\xd7 ",a]})]}),(0,t.jsxs)("span",{className:"text-muted-foreground",children:["+",B(s.price*a,s.currency)]})]},s.id)})]}),(0,t.jsxs)("div",{className:"border-t border-border pt-3 flex justify-between items-center",children:[(0,t.jsx)("span",{className:"font-medium",children:"Total"}),(0,t.jsx)("span",{className:"text-lg font-bold text-primary",children:B(h,m.currency)})]})]})]}):(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.J,{className:"text-sm",children:"What media do you need? *"}),(0,t.jsx)(O.O,{type:"multiple",value:a.mediaTypes,onValueChange:e=>{l({...a,mediaTypes:e})},className:"grid grid-cols-2 gap-3 w-full",children:M.H.map(e=>{let s=e.icon;return(0,t.jsxs)(O.d,{value:e.id,className:"flex items-center gap-3 p-4 h-auto data-[state=on]:bg-accent data-[state=on]:border-primary",children:[(0,t.jsx)("div",{className:"p-2.5 rounded-lg bg-primary",children:(0,t.jsx)(s,{className:"h-5 w-5 text-primary-foreground"})}),(0,t.jsx)("div",{className:"flex-1 text-left",children:(0,t.jsx)("div",{className:"text-sm font-medium",children:e.label})})]},e.id)})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.J,{htmlFor:"requirements",children:"Special Instructions (Optional)"}),(0,t.jsx)(w.T,{id:"requirements",value:a.requirements,onChange:e=>l({...a,requirements:e.target.value}),placeholder:"Any special requests, access codes, or details...",rows:4,className:"resize-none"})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsxs)(o.$,{variant:"outline",onClick:i,className:"flex-1",children:[(0,t.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Back"]}),(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsxs)(o.$,{onClick:c,className:"w-full bg-primary",children:[F?"Review Order":"Find Technician",(0,t.jsx)(E.A,{className:"h-4 w-4 ml-2"})]}),(0,t.jsx)(H.A,{size:40,duration:3,borderWidth:1.5})]})]})]})]})},"details")}var V=a(83209),G=a(19408),Y=a(23664),Z=a(93499),J=a(39068);function Q(e){let{selectedProviderId:s,onProviderSelect:a,onBack:l}=e,[i,c]=(0,r.useState)([]),[n,m]=(0,r.useState)(!0),[x,h]=(0,r.useState)(null);return((0,r.useEffect)(()=>{let e=!1;return(async()=>{m(!0),h(null);try{let s=q.F.organizations.getActiveOrganization();q.F.organizations.setActiveOrganization(null);let a=await q.F.me.customerOrganizations();s&&q.F.organizations.setActiveOrganization(s),e||c(a)}catch(s){console.error("Failed to fetch provider organizations:",s),e||h("Failed to load service providers. Please try again.")}finally{e||m(!1)}})(),()=>{e=!0}},[]),n)?(0,t.jsx)(f.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center justify-center container mx-auto px-6 py-12 h-full",children:(0,t.jsxs)("div",{className:"w-full container mx-auto space-y-8",style:{maxWidth:"896px"},children:[(0,t.jsxs)("div",{className:"text-center space-y-3",children:[(0,t.jsx)(W.E,{className:"h-8 w-64 mx-auto"}),(0,t.jsx)(W.E,{className:"h-12 w-96 mx-auto"}),(0,t.jsx)(W.E,{className:"h-6 w-80 mx-auto"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[1,2,3,4].map(e=>(0,t.jsx)(W.E,{className:"h-40 rounded-2xl"},e))})]})},"provider-loading"):x?(0,t.jsx)(f.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center justify-center container mx-auto px-6 py-12 h-full",children:(0,t.jsxs)("div",{className:"w-full container mx-auto space-y-8 text-center",style:{maxWidth:"896px"},children:[(0,t.jsx)(p.A,{className:"h-16 w-16 text-destructive mx-auto"}),(0,t.jsx)(d.H2,{children:x}),(0,t.jsx)(o.$,{onClick:()=>window.location.reload(),children:"Try Again"})]})},"provider-error"):0===i.length?(0,t.jsx)(f.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center justify-center container mx-auto px-6 py-12 h-full",children:(0,t.jsxs)("div",{className:"w-full container mx-auto space-y-8",style:{maxWidth:"896px"},children:[(0,t.jsxs)(f.P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},className:"text-center space-y-4",children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-muted mb-4",children:(0,t.jsx)(G.A,{className:"h-10 w-10 text-muted-foreground"})}),(0,t.jsx)(d.H1,{className:"text-3xl md:text-4xl font-bold text-foreground",children:"No Service Providers Yet"}),(0,t.jsx)(d.P,{className:"text-lg text-muted-foreground max-w-md mx-auto",children:"You are not yet a customer of any media companies. You must be added as a customer by a company before you can place orders here."}),(0,t.jsx)("div",{className:"pt-4 border-t border-border mt-6",children:(0,t.jsxs)(d.QX,{className:"text-sm max-w-lg mx-auto",children:[(0,t.jsx)("span",{className:"font-medium text-foreground/80",children:"Coming Soon:"})," ","An open marketplace where you can place orders without needing to be part of a company organization. Providers will be automatically matched and assigned to fulfill your orders based on availability and location."]})})]}),(0,t.jsx)(f.P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"flex justify-center",children:l&&(0,t.jsxs)(o.$,{variant:"outline",onClick:l,children:[(0,t.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Go Back"]})})]})},"provider-empty"):(0,t.jsx)(f.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center justify-center container mx-auto px-6 py-12 h-full",children:(0,t.jsxs)("div",{className:"w-full container mx-auto space-y-8",style:{maxWidth:"896px"},children:[(0,t.jsxs)(f.P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},className:"text-center space-y-3",children:[(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-muted rounded-full text-foreground/90 text-sm mb-2",children:[(0,t.jsx)(G.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Select Your Media Company"})]}),(0,t.jsx)(d.H1,{className:"text-4xl md:text-5xl font-bold text-foreground",children:"Who should handle this shoot?"}),(0,t.jsx)(d.P,{className:"text-lg text-muted-foreground",children:"Choose a media company to fulfill your order"})]}),(0,t.jsx)(f.P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.map(e=>{let r=s===e.orgId,l=[e.city,e.region,e.countryCode].filter(Boolean).join(", ");return(0,t.jsx)(V.Zp,{className:(0,R.cn)("cursor-pointer transition-all duration-200 hover:shadow-md","border-2",r?"border-primary bg-primary/5 shadow-md":"border-border hover:border-primary/50"),onClick:()=>a(e),children:(0,t.jsxs)(V.Wu,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:e.logoUrl?(0,t.jsx)("img",{src:e.logoUrl,alt:e.orgName,className:"w-14 h-14 rounded-xl object-cover"}):(0,t.jsx)("div",{className:"w-14 h-14 rounded-xl bg-primary/10 flex items-center justify-center",children:(0,t.jsx)(G.A,{className:"h-7 w-7 text-primary"})})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg truncate",children:e.orgName}),r&&(0,t.jsx)(S.A,{className:"h-5 w-5 text-primary flex-shrink-0"})]}),l&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-sm text-muted-foreground mt-1",children:[(0,t.jsx)(j.A,{className:"h-3.5 w-3.5"}),(0,t.jsx)("span",{className:"truncate",children:l})]}),e.primaryEmail&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-sm text-muted-foreground mt-1",children:[(0,t.jsx)(Y.A,{className:"h-3.5 w-3.5"}),(0,t.jsx)("span",{className:"truncate",children:e.primaryEmail})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-border",children:[(0,t.jsxs)(o.$,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground",onClick:s=>{var a;return a=e.orgId,void(s.stopPropagation(),window.open("/organizations/".concat(a,"/public"),"_blank"))},children:[(0,t.jsx)(Z.A,{className:"h-4 w-4 mr-1.5"}),"View Details"]}),e.websiteUrl&&(0,t.jsxs)("a",{href:e.websiteUrl,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"text-sm text-muted-foreground hover:text-foreground flex items-center gap-1",children:[(0,t.jsx)(J.A,{className:"h-3.5 w-3.5"}),"Website"]})]})]})},e.orgId)})}),(0,t.jsx)(f.P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"flex justify-center pt-4",children:l&&(0,t.jsxs)(o.$,{variant:"outline",onClick:l,children:[(0,t.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Cancel"]})})]})},"provider")}var X=a(27346),K=a(68072),ee=a(64936);let es=r.createContext(null);function ea(){let e=r.useContext(es);if(!e)throw Error("useCarousel must be used within a <Carousel />");return e}function et(e){let{orientation:s="horizontal",opts:a,setApi:l,plugins:i,className:c,children:n,...d}=e,[o,m]=(0,K.A)({...a,axis:"horizontal"===s?"x":"y"},i),[x,h]=r.useState(!1),[u,p]=r.useState(!1),j=r.useCallback(e=>{e&&(h(e.canScrollPrev()),p(e.canScrollNext()))},[]),f=r.useCallback(()=>{null==m||m.scrollPrev()},[m]),g=r.useCallback(()=>{null==m||m.scrollNext()},[m]),N=r.useCallback(e=>{"ArrowLeft"===e.key?(e.preventDefault(),f()):"ArrowRight"===e.key&&(e.preventDefault(),g())},[f,g]);return r.useEffect(()=>{m&&l&&l(m)},[m,l]),r.useEffect(()=>{if(m)return j(m),m.on("reInit",j),m.on("select",j),()=>{null==m||m.off("select",j)}},[m,j]),(0,t.jsx)(es.Provider,{value:{carouselRef:o,api:m,opts:a,orientation:s||((null==a?void 0:a.axis)==="y"?"vertical":"horizontal"),scrollPrev:f,scrollNext:g,canScrollPrev:x,canScrollNext:u},children:(0,t.jsx)("div",{onKeyDownCapture:N,className:(0,ee.cn)("relative",c),role:"region","aria-roledescription":"carousel","data-slot":"carousel",...d,children:n})})}function er(e){let{className:s,...a}=e,{carouselRef:r,orientation:l}=ea();return(0,t.jsx)("div",{ref:r,className:"overflow-hidden","data-slot":"carousel-content",children:(0,t.jsx)("div",{className:(0,ee.cn)("flex","horizontal"===l?"-ml-4":"-mt-4 flex-col",s),...a})})}function el(e){let{className:s,...a}=e,{orientation:r}=ea();return(0,t.jsx)("div",{role:"group","aria-roledescription":"slide","data-slot":"carousel-item",className:(0,ee.cn)("min-w-0 shrink-0 grow-0 basis-full","horizontal"===r?"pl-4":"pt-4",s),...a})}function ei(e){let{className:s,variant:a="outline",size:r="icon",...l}=e,{orientation:i,scrollPrev:c,canScrollPrev:n}=ea();return(0,t.jsxs)(o.$,{"data-slot":"carousel-previous",variant:a,size:r,className:(0,ee.cn)("absolute size-8 rounded-full","horizontal"===i?"top-1/2 -left-12 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",s),disabled:!n,onClick:c,...l,children:[(0,t.jsx)(y.A,{}),(0,t.jsx)("span",{className:"sr-only",children:"Previous slide"})]})}function ec(e){let{className:s,variant:a="outline",size:r="icon",...l}=e,{orientation:i,scrollNext:c,canScrollNext:n}=ea();return(0,t.jsxs)(o.$,{"data-slot":"carousel-next",variant:a,size:r,className:(0,ee.cn)("absolute size-8 rounded-full","horizontal"===i?"top-1/2 -right-12 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",s),disabled:!n,onClick:c,...l,children:[(0,t.jsx)(E.A,{}),(0,t.jsx)("span",{className:"sr-only",children:"Next slide"})]})}var en=a(95664),ed=a(60890),eo=a(42196),em=a(7125),ex=a(6191),eh=a(61771),eu=a(82180);function ep(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"usd";return new Intl.NumberFormat("en-US",{style:"currency",currency:s.toUpperCase()}).format(e/100)}function ej(e){let{images:s}=e,[a,l]=(0,r.useState)(),[i,c]=(0,r.useState)(0);return((0,r.useEffect)(()=>{a&&(c(a.selectedScrollSnap()),a.on("select",()=>{c(a.selectedScrollSnap())}))},[a]),0===s.length)?(0,t.jsx)("div",{className:"aspect-video bg-muted rounded-t-lg flex items-center justify-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[(0,t.jsx)(eo.A,{className:"size-8"}),(0,t.jsx)("span",{className:"text-xs",children:"No images"})]})}):(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)(et,{setApi:l,className:"w-full",children:[(0,t.jsx)(er,{className:"ml-0",children:s.map((e,s)=>(0,t.jsx)(el,{className:"pl-0",children:(0,t.jsx)("div",{className:"aspect-video relative overflow-hidden rounded-t-lg",children:(0,t.jsx)("img",{src:e,alt:"Package image ".concat(s+1),className:"w-full h-full object-cover",onError:e=>{e.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="225"%3E%3Crect fill="%23f0f0f0" width="400" height="225"/%3E%3Ctext x="200" y="112" text-anchor="middle" dy=".3em" fill="%23999"%3EImage unavailable%3C/text%3E%3C/svg%3E'}})})},s))}),s.length>1&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ei,{className:"left-2 size-7 opacity-0 group-hover:opacity-100 transition-opacity"}),(0,t.jsx)(ec,{className:"right-2 size-7 opacity-0 group-hover:opacity-100 transition-opacity"})]})]}),s.length>1&&(0,t.jsx)("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1.5",children:s.map((e,s)=>(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),null==a||a.scrollTo(s)},className:(0,R.cn)("size-1.5 rounded-full transition-all",i===s?"bg-white w-3":"bg-white/50 hover:bg-white/75")},s))})]})}function ef(e){let{providerOrgId:s,providerName:a,selectedPackageId:l,selectedAddOnQuantities:i={},onPackageSelect:c,onBack:m}=e,[x,h]=(0,r.useState)([]),[j,g]=(0,r.useState)([]),[N,v]=(0,r.useState)(!0),[b,w]=(0,r.useState)(null),[A,k]=(0,r.useState)(null),[C,T]=(0,r.useState)(i),[D,M]=(0,r.useState)("package");(0,r.useEffect)(()=>{let e=!1;return(async()=>{v(!0),w(null);try{let[a,t]=await Promise.all([q.F.packages.getForOrg(s),q.F.packages.getAddOnsForOrg(s)]);if(!e&&(h(a),g(t),l)){let e=a.find(e=>e.id===l);e&&(k(e),t.length>0&&M("addons"))}}catch(s){console.error("Failed to fetch packages:",s),e||w("Failed to load packages. Please try again.")}finally{e||v(!1)}})(),()=>{e=!0}},[s,l]);let O=(e,s)=>{T(a=>{let t=Math.max(0,(a[e]||0)+s);if(0===t){let{[e]:s,...t}=a;return t}return{...a,[e]:t}})},F=()=>{if(!A)return 0;let e=j.reduce((e,s)=>{let a=C[s.id]||0;return e+s.price*a},0);return A.price+e},$=()=>{if(A)c(A,j.filter(e=>(C[e.id]||0)>0).map(e=>({addOn:e,quantity:C[e.id]})),F())};if(N)return(0,t.jsx)(f.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center justify-center container mx-auto px-6 py-12 h-full",children:(0,t.jsxs)("div",{className:"w-full container mx-auto space-y-8",style:{maxWidth:"1024px"},children:[(0,t.jsxs)("div",{className:"text-center space-y-3",children:[(0,t.jsx)(W.E,{className:"h-8 w-64 mx-auto"}),(0,t.jsx)(W.E,{className:"h-12 w-96 mx-auto"}),(0,t.jsx)(W.E,{className:"h-6 w-80 mx-auto"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(e=>(0,t.jsx)(W.E,{className:"h-64 rounded-2xl"},e))})]})},"package-loading");if(b)return(0,t.jsx)(f.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center justify-center container mx-auto px-6 py-12 h-full",children:(0,t.jsxs)("div",{className:"w-full container mx-auto space-y-8 text-center",style:{maxWidth:"896px"},children:[(0,t.jsx)(p.A,{className:"h-16 w-16 text-destructive mx-auto"}),(0,t.jsx)(d.H1,{className:"text-2xl",children:b}),(0,t.jsx)(o.$,{onClick:()=>window.location.reload(),children:"Try Again"})]})},"package-error");if(0===x.length)return(0,t.jsx)(f.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center justify-center container mx-auto px-6 py-12 h-full",children:(0,t.jsxs)("div",{className:"w-full container mx-auto space-y-8",style:{maxWidth:"896px"},children:[(0,t.jsxs)(f.P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},className:"text-center space-y-4",children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-muted mb-4",children:(0,t.jsx)(z.A,{className:"h-10 w-10 text-muted-foreground"})}),(0,t.jsx)(d.H1,{className:"text-3xl md:text-4xl font-bold text-foreground",children:"No Packages Available"}),(0,t.jsxs)(d.P,{className:"text-lg text-muted-foreground max-w-md mx-auto",children:[a," has not set up any service packages yet. Please contact them directly to book services."]})]}),(0,t.jsx)(f.P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"flex justify-center",children:m&&(0,t.jsxs)(o.$,{variant:"outline",onClick:m,children:[(0,t.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Choose Another Provider"]})})]})},"package-empty");let _=F();return(0,t.jsx)("div",{className:"flex flex-col h-full container mx-auto px-6 py-8",style:{maxWidth:"1024px"},children:(0,t.jsxs)(n.N,{mode:"wait",children:["package"===D&&(0,t.jsxs)(f.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"flex flex-col h-full",children:[(0,t.jsxs)("div",{className:"text-center space-y-3 shrink-0 pb-6",children:[(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-muted rounded-full text-foreground/90 text-sm mb-2",children:[(0,t.jsx)(z.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:a})]}),(0,t.jsx)(d.H1,{className:"text-4xl md:text-5xl font-bold text-foreground",children:"Choose Your Package"}),(0,t.jsx)(d.P,{className:"text-lg text-muted-foreground",children:"Select a photography package for your property"})]}),(0,t.jsx)("div",{className:"flex-1 min-h-0",children:(0,t.jsx)(X.F,{className:"h-full",children:(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 pb-4",children:x.map(e=>{let s=(null==A?void 0:A.id)===e.id;return(0,t.jsxs)(V.Zp,{className:(0,R.cn)("group cursor-pointer transition-all duration-200 hover:shadow-md relative overflow-hidden","border-2",s?"border-primary bg-primary/5 shadow-md":"border-border hover:border-primary/50"),onClick:()=>{k(e)},children:[e.images&&e.images.length>0&&(0,t.jsx)(ej,{images:e.images}),(0,t.jsxs)(V.Wu,{className:(0,R.cn)("p-6 space-y-4",e.images&&e.images.length>0&&"pt-4"),children:[s&&(0,t.jsx)("div",{className:"absolute top-2 right-2 z-10",children:(0,t.jsx)("div",{className:"bg-primary text-primary-foreground rounded-full p-1 shadow-md",children:(0,t.jsx)(S.A,{className:"h-5 w-5"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-xl",children:e.name}),(0,t.jsx)("div",{className:"text-3xl font-bold text-primary mt-2",children:ep(e.price,e.currency)})]}),e.description&&(0,t.jsxs)(eu.m_,{children:[(0,t.jsx)(eu.k$,{asChild:!0,children:(0,t.jsx)(d.P,{className:"text-sm text-muted-foreground line-clamp-2 cursor-default",children:e.description})}),(0,t.jsx)(eu.ZI,{side:"bottom",className:"max-w-xs",children:(0,t.jsx)("p",{children:e.description})})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:e.mediaTypes.map(e=>{let s=function(e){switch(e){case eh.zu.PHOTO:return en.A;case eh.zu.VIDEO:return ed.A;default:return en.A}}(e);return(0,t.jsxs)(P.E,{variant:"secondary",className:"gap-1",children:[(0,t.jsx)(s,{className:"h-3 w-3"}),e]},e)})}),(0,t.jsxs)("div",{className:"pt-2 border-t border-border",children:[(0,t.jsxs)("div",{className:"space-y-1.5",children:[e.turnaroundDays&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(I.A,{className:"size-4 shrink-0"}),(0,t.jsxs)("span",{children:[e.turnaroundDays," day turnaround"]})]}),e.photoCount&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(en.A,{className:"size-4 shrink-0"}),(0,t.jsxs)("span",{children:["Up to ",e.photoCount," photos"]})]}),e.videoMinutes&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(ed.A,{className:"size-4 shrink-0"}),(0,t.jsxs)("span",{children:[e.videoMinutes," min video"]})]})]}),e.features.length>0&&(0,t.jsx)("div",{className:"mt-2 max-h-24 overflow-y-auto space-y-1.5",children:e.features.map((e,s)=>(0,t.jsxs)(eu.m_,{children:[(0,t.jsx)(eu.k$,{asChild:!0,children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground cursor-default",children:[(0,t.jsx)(u.A,{className:"size-4 shrink-0"}),(0,t.jsx)("span",{className:"truncate",children:e})]})}),(0,t.jsx)(eu.ZI,{side:"bottom",className:"max-w-xs",children:(0,t.jsx)("p",{children:e})})]},s))})]})]})]},e.id)})})})}),(0,t.jsxs)("div",{className:"flex justify-between items-center pt-6 border-t border-border shrink-0",children:[(0,t.jsx)("div",{children:m&&(0,t.jsxs)(o.$,{variant:"outline",onClick:m,children:[(0,t.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Back"]})}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[A&&(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)(d.P,{className:"text-sm text-muted-foreground",children:"Package Price"}),(0,t.jsx)("div",{className:"text-xl font-bold text-foreground",children:ep(A.price,A.currency)})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)(o.$,{size:"lg",onClick:()=>{A&&(j.length>0?M("addons"):$())},disabled:!A,children:[j.length>0?"Continue to Add-ons":"Continue",(0,t.jsx)(E.A,{className:"h-4 w-4 ml-2"})]}),A&&(0,t.jsx)(H.A,{size:40,duration:3,borderWidth:1.5})]})]})]})]},"package-step"),"addons"===D&&A&&(0,t.jsxs)(f.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"flex flex-col h-full",children:[(0,t.jsxs)("div",{className:"text-center space-y-3 shrink-0 pb-6",children:[(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-muted rounded-full text-foreground/90 text-sm mb-2",children:[(0,t.jsx)(S.A,{className:"h-4 w-4 text-primary"}),(0,t.jsx)("span",{children:A.name}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"â€¢"}),(0,t.jsx)("span",{className:"font-medium",children:ep(A.price,A.currency)})]}),(0,t.jsx)(d.H1,{className:"text-4xl md:text-5xl font-bold text-foreground",children:"Enhance Your Package"}),(0,t.jsx)(d.P,{className:"text-lg text-muted-foreground",children:"Add optional services to your booking"})]}),(0,t.jsx)("div",{className:"flex-1 min-h-0",children:(0,t.jsx)(X.F,{className:"h-full",children:(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 pb-4",children:j.map(e=>{let s=C[e.id]||0,a=s>0;return(0,t.jsx)(V.Zp,{className:(0,R.cn)("transition-all duration-200","border",a?"border-primary bg-primary/5":"border-border hover:border-primary/50"),children:(0,t.jsx)(V.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"font-medium",children:e.name}),(0,t.jsxs)("span",{className:"font-semibold text-primary",children:["+",ep(e.price,e.currency)]})]}),(0,t.jsx)(P.E,{variant:"outline",className:"mt-1 text-xs",children:function(e){switch(e){case eh.xw.AERIAL:return"Aerial";case eh.xw.TWILIGHT:return"Twilight";case eh.xw.VIRTUAL_TOUR:return"3D Tour";case eh.xw.FLOORPLAN:return"Floor Plan";case eh.xw.RUSH:return"Rush";default:return"Add-on"}}(e.category)}),e.description&&(0,t.jsxs)(eu.m_,{children:[(0,t.jsx)(eu.k$,{asChild:!0,children:(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2 cursor-default",children:e.description})}),(0,t.jsx)(eu.ZI,{side:"bottom",className:"max-w-xs",children:(0,t.jsx)("p",{children:e.description})})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-border",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Quantity"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(o.$,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:s=>{s.stopPropagation(),O(e.id,-1)},disabled:0===s,children:(0,t.jsx)(em.A,{className:"h-4 w-4"})}),(0,t.jsx)("span",{className:"w-8 text-center font-medium",children:s}),(0,t.jsx)(o.$,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:s=>{s.stopPropagation(),O(e.id,1)},children:(0,t.jsx)(ex.A,{className:"h-4 w-4"})})]})]}),a&&(0,t.jsxs)("div",{className:"text-right text-sm font-medium text-primary",children:["Subtotal: ",ep(e.price*s,e.currency)]})]})})},e.id)})})})}),(0,t.jsxs)("div",{className:"flex justify-between items-center pt-6 border-t border-border shrink-0",children:[(0,t.jsxs)(o.$,{variant:"outline",onClick:()=>{M("package")},children:[(0,t.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Change Package"]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)(d.P,{className:"text-sm text-muted-foreground",children:"Estimated Total"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-foreground",children:ep(_,A.currency)})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)(o.$,{size:"lg",onClick:$,children:["Continue",(0,t.jsx)(E.A,{className:"h-4 w-4 ml-2"})]}),(0,t.jsx)(H.A,{size:40,duration:3,borderWidth:1.5})]})]})]})]},"addons-step")]})})}var eg=a(42456),eN=a(18085);function ey(e){let{selectedAddress:s,jobDetails:a,rankings:r,showProviderSearch:l,technicians:i,companies:c,preferredVendors:n,onToggleSearch:m,onTechnicianSelect:x,onBack:p,selectedProvider:g,schedulingMode:N="scheduled"}=e,v=!!g;return(0,t.jsx)(f.P.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},className:"container mx-auto p-6 h-full",children:(0,t.jsxs)("div",{className:"container mx-auto space-y-6",style:{maxWidth:"896px"},children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground flex-wrap",children:[v&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.A,{className:"h-5 w-5 text-green-500"}),(0,t.jsx)("span",{children:"Provider selected"}),(0,t.jsx)(E.A,{className:"h-4 w-4 mx-2"})]}),(0,t.jsx)(S.A,{className:"h-5 w-5 text-green-500"}),(0,t.jsx)("span",{children:"Address selected"}),(0,t.jsx)(E.A,{className:"h-4 w-4 mx-2"}),(0,t.jsx)(S.A,{className:"h-5 w-5 text-green-500"}),(0,t.jsx)("span",{children:"Job details"}),(0,t.jsx)(E.A,{className:"h-4 w-4 mx-2"}),(0,t.jsx)("span",{className:"text-primary font-medium",children:v?"Confirm order":"Choose technician"})]}),(0,t.jsxs)(V.Zp,{className:"bg-card rounded-2xl border-2 border-border p-6 shadow-sm gap-0",children:[(0,t.jsxs)(V.aR,{className:"flex items-start justify-between mb-4 p-0",children:[(0,t.jsx)("h2",{className:"text-xl",children:"Your Shoot Details"}),(0,t.jsx)(o.$,{variant:"ghost",size:"sm",onClick:p,children:"Edit"})]}),(0,t.jsxs)(V.Wu,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-0",children:[g&&(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(G.A,{className:"h-5 w-5 text-muted-foreground/60 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground/80",children:"Provider"}),(0,t.jsx)("div",{className:"text-sm text-foreground font-medium",children:g.orgName})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(j.A,{className:"h-5 w-5 text-muted-foreground/60 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground/80",children:"Location"}),(0,t.jsx)("div",{className:"text-sm text-foreground",children:s})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(D.A,{className:"h-5 w-5 text-muted-foreground/60 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground/80",children:"Date & Time"}),(0,t.jsx)("div",{className:"text-sm text-foreground",children:"requested"===N?(0,t.jsx)("span",{className:"text-amber-600 dark:text-amber-400",children:"To be scheduled by provider"}):(0,t.jsxs)(t.Fragment,{children:[a.scheduledDate," at ",a.scheduledTime]})})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(en.A,{className:"h-5 w-5 text-muted-foreground/60 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground/80",children:"Media Types"}),(0,t.jsx)("div",{className:"flex gap-1 mt-1 flex-wrap",children:a.mediaTypes.map(e=>(0,t.jsx)(P.E,{variant:"outline",children:e},e))})]})]})]})]}),v?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(V.Zp,{className:"bg-primary rounded-2xl p-6 text-primary-foreground gap-0",children:[(0,t.jsx)(V.aR,{className:"flex items-center justify-between mb-2 p-0",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(G.A,{className:"h-6 w-6"}),(0,t.jsx)("h3",{className:"text-xl",children:"Ready to Submit"})]})}),(0,t.jsx)(V.Wu,{className:"p-0",children:(0,t.jsxs)(d.P,{className:"text-primary-foreground/80",children:["Your order will be sent to ",(0,t.jsx)("strong",{children:g.orgName})," for fulfillment. They will assign a technician and confirm your booking."]})})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center pt-4",children:[(0,t.jsxs)(o.$,{variant:"outline",onClick:p,className:"min-w-[200px]",children:[(0,t.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Back to Details"]}),(0,t.jsxs)(o.$,{onClick:()=>x("confirm"),className:"min-w-[200px] bg-primary",size:"lg",children:[(0,t.jsx)(eN.A,{className:"h-4 w-4 mr-2"}),"Submit Order"]})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(V.Zp,{className:"bg-primary rounded-2xl p-6 text-primary-foreground gap-0",children:[(0,t.jsxs)(V.aR,{className:"flex items-center justify-between mb-2 p-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(u.A,{className:"h-6 w-6"}),(0,t.jsx)("h3",{className:"text-xl",children:"AI-Matched Technicians"})]}),(0,t.jsxs)(o.$,{variant:"secondary",size:"sm",onClick:m,className:"bg-card/20 hover:bg-card/30 text-primary-foreground border-white/30",children:[(0,t.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Search Specific"]})]}),(0,t.jsx)(V.Wu,{className:"p-0",children:(0,t.jsx)(d.P,{className:"text-primary-foreground/80",children:l?"Search for a specific technician or your preferred media company":"We've ranked technicians based on availability, proximity, reliability, and your preferred vendors"})})]}),l?(0,t.jsx)("div",{className:"bg-card rounded-2xl border-2 border-border p-6 shadow-sm",children:(0,t.jsx)(eg._Q,{technicians:i||[],companies:c,preferredVendors:n,onSelect:x})}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map((e,s)=>{let a=e.provider||e.technician;return a?(0,t.jsx)(eg.I2,{technician:a,ranking:e.factors,score:e.score,recommended:e.recommended&&0===s,onAssign:()=>x(a.id)},a.id):null})}),(0,t.jsx)("div",{className:"flex justify-center pt-4",children:(0,t.jsxs)(o.$,{variant:"outline",onClick:p,className:"min-w-[200px]",children:[(0,t.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Back to Details"]})})]})]})},"technician")}var ev=a(54679),eb=a(59865),ew=a(96583);function eA(e){let{open:s,onClose:a,onLogin:r}=e;return(0,t.jsx)(ev.lG,{open:s,onOpenChange:a,children:(0,t.jsxs)(ev.Cf,{className:"sm:max-w-md",children:[(0,t.jsxs)(ev.c7,{children:[(0,t.jsxs)(ev.L3,{className:"flex items-center gap-2",children:[(0,t.jsx)(eb.A,{className:"h-5 w-5 text-primary"}),"Sign in to confirm booking"]}),(0,t.jsx)(ev.rr,{children:"You've selected your technician! Sign in or create an account to confirm your booking and get started."})]}),(0,t.jsxs)("div",{className:"space-y-3 pt-4",children:[(0,t.jsxs)(o.$,{onClick:()=>{a(),r()},className:"w-full bg-primary ",children:[(0,t.jsx)(eb.A,{className:"h-4 w-4 mr-2"}),"Sign In"]}),(0,t.jsxs)(o.$,{variant:"outline",onClick:()=>{a(),r()},className:"w-full",children:[(0,t.jsx)(ew.A,{className:"h-4 w-4 mr-2"}),"Create Account"]}),(0,t.jsx)(o.$,{variant:"ghost",onClick:a,className:"w-full",children:"Go Back"})]})]})})}function ek(e){let{technicians:s,companies:a,preferredVendors:l,onJobCreate:i,isAuthenticated:d=!0,onLoginRequired:o,onCancel:m,initialAddress:x,initialLocation:h}=e,u=s||[],[p,j]=(0,r.useState)("provider"),[f,g]=(0,r.useState)(!1),[N,y]=(0,r.useState)(x||""),[b,w]=(0,r.useState)(h||null),[A,k]=(0,r.useState)({}),[P,C]=(0,r.useState)(null),[S,E]=(0,r.useState)(null),[T,D]=(0,r.useState)([]),[I,z]=(0,r.useState)(0),[M,O]=(0,r.useState)({clientName:"",scheduledDate:"",scheduledTime:"",mediaTypes:[],priority:"standard",estimatedDuration:120,requirements:""}),[F,$]=(0,r.useState)("scheduled"),q={id:"temp",orderNumber:"TEMP",organizationId:(null==P?void 0:P.orgId)||"",clientName:M.clientName||"Agent Booking",propertyAddress:N,location:b||{lat:0,lng:0},scheduledDate:M.scheduledDate,scheduledTime:M.scheduledTime,mediaType:M.mediaTypes,priority:M.priority,status:"pending",estimatedDuration:M.estimatedDuration,requirements:M.requirements,createdBy:"",createdAt:new Date},R="confirm"===p&&b?function(e,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.filter(e=>"active"===e.status).map(e=>{let t=function(e,s,a,t){let r=(a-e)*Math.PI/180,l=(t-s)*Math.PI/180,i=Math.sin(r/2)*Math.sin(r/2)+Math.cos(e*Math.PI/180)*Math.cos(a*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371}(e.homeLocation.lat,e.homeLocation.lng,s.location.lat,s.location.lng),r={availability:function(e,s){let a=e.availability.find(e=>e.date===s);return 100*(null!=a&&!!a.available)}(e,s.scheduledDate),distance:t<=5?100:t<=15?75:t<=30?50:25*(t<=50),distanceKm:t,reliability:function(e){let{onTimeRate:s,noShows:a,totalJobs:t}=e.reliability;return 0===t?50:Math.max(0,Math.min(100,100*s-a/t*100))}(e),skillMatch:function(e,s){let a={photo:"residential",video:"video",aerial:"aerial",twilight:"twilight"},t=0,r=0;for(let l of s.mediaType){let s=a[l];s&&void 0!==e.skills[s]&&(t+=e.skills[s],r++)}return r>0?t/r*20:50}(e,s),preferredRelationship:function(e,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.companyId&&a.includes(e.companyId)||e.preferredClients.includes(s.organizationId)?100:0}(e,s,a)},l=.3*r.availability+.25*r.preferredRelationship+.2*r.reliability+.15*r.distance+.1*r.skillMatch;return{provider:e,technician:e,score:l,factors:r,recommended:l>=60&&100===r.availability}}).sort((e,s)=>s.score-e.score)}(u,q,l):[];return(0,t.jsxs)("div",{className:"bg-background size-full flex-1",children:[(0,t.jsxs)(n.N,{mode:"wait",children:["provider"===p&&(0,t.jsx)(Q,{selectedProviderId:null==P?void 0:P.orgId,onProviderSelect:e=>{C(e),E(null),D([]),z(0),j("package")},onBack:m}),"package"===p&&P&&(0,t.jsx)(ef,{providerOrgId:P.orgId,providerName:P.orgName,selectedPackageId:null==S?void 0:S.id,selectedAddOnQuantities:T.reduce((e,s)=>(e[s.addOn.id]=s.quantity,e),{}),onPackageSelect:(e,s,a)=>{E(e),D(s),z(a),x?j("details"):j("address")},onBack:()=>{j("provider")}}),"address"===p&&(0,t.jsx)(v,{onAddressSelect:(e,s,a)=>{y(e),w(s),a&&k(a),j("details")},selectedProviderName:null==P?void 0:P.orgName,onBack:()=>{j("package")}}),"details"===p&&(0,t.jsx)(U,{selectedAddress:N,jobDetails:M,onJobDetailsChange:O,onBack:()=>{x&&m?m():j("address")},onNext:()=>"scheduled"!==F||M.scheduledDate&&M.scheduledTime?S||0!==M.mediaTypes.length?void j("confirm"):void c.oR.error("Please select at least one media type"):void c.oR.error("Please select a date and time"),selectedProviderName:null==P?void 0:P.orgName,selectedPackage:S,selectedAddOns:T,totalPrice:I,schedulingMode:F,onSchedulingModeChange:$}),"confirm"===p&&(0,t.jsx)(ey,{selectedAddress:N,jobDetails:M,rankings:R,showProviderSearch:!1,technicians:u,companies:a,preferredVendors:l,onToggleSearch:()=>{},onTechnicianSelect:()=>{if(!d)return void g(!0);if(!P){c.oR.error("Please select a service provider"),j("provider");return}if(!S){c.oR.error("Please select a package"),j("package");return}let e=S?S.mediaTypes:M.mediaTypes,s=T.map(e=>e.addOn.id),a={};T.forEach(e=>{a[e.addOn.id]=e.quantity});let t={clientName:M.clientName||"Agent Booking",propertyAddress:N,location:b,scheduledDate:M.scheduledDate,scheduledTime:M.scheduledTime,mediaType:e,priority:M.priority,estimatedDuration:M.estimatedDuration,requirements:M.requirements,status:"pending",providerOrgId:P.orgId,providerName:P.orgName,addressLine1:A.addressLine1,city:A.city,region:A.region,postalCode:A.postalCode,countryCode:A.countryCode,packageId:S.id,packageName:S.name,addOnIds:s,addOnQuantities:a,totalPrice:I,schedulingMode:F};i(t),j("provider"),y(""),w(null),C(null),E(null),D([]),z(0),k({}),$("scheduled"),O({clientName:"",scheduledDate:"",scheduledTime:"",mediaTypes:[],priority:"standard",estimatedDuration:120,requirements:""})},onBack:()=>{j("details")},selectedProvider:P,schedulingMode:F})]}),(0,t.jsx)(eA,{open:f,onClose:()=>g(!1),onLogin:()=>{o&&o()}})]})}var eP=a(42892),eC=a(35722);function eS(e){let{data:s,onViewDashboard:a,onCreateAnother:r}=e,l="scheduled"===s.schedulingMode;return(0,t.jsx)(f.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"min-h-screen flex items-center justify-center p-6",children:(0,t.jsxs)("div",{className:"w-full max-w-lg space-y-8",children:[(0,t.jsx)(f.P.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"flex justify-center",children:(0,t.jsx)("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center",children:(0,t.jsx)(S.A,{className:"w-10 h-10 text-green-600 dark:text-green-400"})})}),(0,t.jsxs)(f.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-center space-y-2",children:[(0,t.jsx)(d.H1,{className:"text-2xl md:text-3xl",children:"Order Submitted!"}),(0,t.jsxs)(d.P,{className:"text-muted-foreground",children:["Your order has been sent to ",(0,t.jsx)("strong",{children:s.providerName})]})]}),(0,t.jsx)(f.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:(0,t.jsxs)(V.Zp,{className:"border-2",children:[(0,t.jsx)(V.aR,{className:"pb-3",children:(0,t.jsx)(d.H2,{className:"text-base border-0",children:"Order Summary"})}),(0,t.jsxs)(V.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(G.A,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.QX,{className:"text-xs",children:"Provider"}),(0,t.jsx)(d.P,{className:"text-sm font-medium",children:s.providerName})]})]}),s.packageName&&(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(z.A,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.QX,{className:"text-xs",children:"Package"}),(0,t.jsx)(d.P,{className:"text-sm font-medium",children:s.packageName})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(j.A,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.QX,{className:"text-xs",children:"Location"}),(0,t.jsx)(d.P,{className:"text-sm font-medium",children:s.address})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(D.A,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.QX,{className:"text-xs",children:"Schedule"}),l?(0,t.jsxs)(d.P,{className:"text-sm font-medium",children:[s.scheduledDate," at ",s.scheduledTime]}):(0,t.jsx)(d.P,{className:"text-sm font-medium text-amber-600 dark:text-amber-400",children:"To be scheduled by provider"})]})]})]})]})}),(0,t.jsxs)(f.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-muted/50 rounded-xl p-4 space-y-3",children:[(0,t.jsx)(d.H2,{className:"text-sm font-medium border-0",children:"What happens next?"}),(0,t.jsxs)("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)(E.A,{className:"h-4 w-4 mt-0.5 text-primary flex-shrink-0"}),(0,t.jsxs)("span",{children:[s.providerName," will review your order"]})]}),!l&&(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)(I.A,{className:"h-4 w-4 mt-0.5 text-primary flex-shrink-0"}),(0,t.jsx)("span",{children:"They will contact you to confirm the schedule"})]}),(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)(E.A,{className:"h-4 w-4 mt-0.5 text-primary flex-shrink-0"}),(0,t.jsx)("span",{children:"A technician will be assigned to your shoot"})]}),(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)(E.A,{className:"h-4 w-4 mt-0.5 text-primary flex-shrink-0"}),(0,t.jsx)("span",{children:"You will receive updates as the job progresses"})]})]})]}),(0,t.jsxs)(f.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"flex flex-col sm:flex-row gap-3",children:[(0,t.jsxs)(o.$,{variant:"outline",onClick:r,className:"flex-1",children:[(0,t.jsx)(ex.A,{className:"h-4 w-4 mr-2"}),"Create Another Order"]}),(0,t.jsxs)(o.$,{onClick:a,className:"flex-1",children:[(0,t.jsx)(T.A,{className:"h-4 w-4 mr-2"}),"View Dashboard"]})]})]})})}function eE(){var e;let s=(0,l.useRouter)(),{user:a,isLoading:n,organizationId:d,memberships:o}=(0,i.l)(["AGENT","COMPANY"]),[m,x]=(0,r.useState)([]),[h,u]=(0,r.useState)([]),[p,j]=(0,r.useState)(!0),[f,g]=(0,r.useState)(!1),[N,y]=(0,r.useState)(null),v=(null==a||null==(e=a.accountType)?void 0:e.toUpperCase())==="AGENT";(0,r.useEffect)(()=>{let e=!1;return(async()=>{if(a){j(!0);try{if(!v){let s=await (0,eC.NV)();e||x(s)}e||u([])}catch(s){console.error("Failed to load booking data:",s),e||(x([]),u([]))}finally{e||j(!1)}}})(),()=>{e=!0}},[a,v]);let b=(0,r.useMemo)(()=>[],[]),w=async e=>{if(!a)return void c.oR.error("Unable to create order. Please try again.");if(!e.providerOrgId)return void c.oR.error("Please select a service provider.");if(!e.packageId)return void c.oR.error("Please select a package.");g(!0);try{var s,t;let r="requested"===e.schedulingMode?new Date().toISOString():e.scheduledDate&&e.scheduledTime?new Date("".concat(e.scheduledDate,"T").concat(e.scheduledTime)).toISOString():new Date().toISOString(),l="".concat(a.id,"-").concat(e.providerOrgId,"-").concat(e.addressLine1||e.propertyAddress,"-").concat(Date.now()),i=await q.F.orders.create({providerOrgId:e.providerOrgId,addressLine1:e.addressLine1||e.propertyAddress||"",city:e.city,region:e.region,postalCode:e.postalCode,countryCode:e.countryCode,lat:null==(s=e.location)?void 0:s.lat,lng:null==(t=e.location)?void 0:t.lng,scheduledTime:r,estimatedDuration:e.estimatedDuration||120,schedulingMode:e.schedulingMode||"scheduled",mediaTypes:e.mediaType||[],priority:e.priority||"standard",notes:e.requirements||"",idempotencyKey:l});window.dispatchEvent(new CustomEvent("orderCreated")),y({project:i.project,providerName:e.providerName||"Provider",address:e.propertyAddress||e.addressLine1||"Address",scheduledDate:e.scheduledDate,scheduledTime:e.scheduledTime,packageName:e.packageName,schedulingMode:e.schedulingMode||"scheduled"}),c.oR.success("Order submitted successfully!")}catch(e){console.error("Failed to create order:",e),c.oR.error(e instanceof Error?e.message:"Failed to process order")}finally{g(!1)}};return n||p?(0,t.jsx)(eP.Eg,{}):a?N?(0,t.jsx)(eS,{data:N,onViewDashboard:()=>{s.push("/dashboard")},onCreateAnother:()=>{y(null)}}):(0,t.jsx)("div",{className:"size-full overflow-x-hidden",children:(0,t.jsx)(ek,{technicians:m,companies:h,preferredVendors:b,onJobCreate:w,isAuthenticated:!0,onCancel:()=>{s.push("/dashboard")}})}):null}},42303:(e,s,a)=>{"use strict";a.d(s,{A:()=>i});var t=a(95155),r=a(81130),l=a(25016);let i=e=>{let{className:s,size:a=50,delay:i=0,duration:c=6,colorFrom:n="#ffaa40",colorTo:d="#9c40ff",transition:o,style:m,reverse:x=!1,initialOffset:h=0,borderWidth:u=1}=e;return(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 rounded-[inherit]",style:{border:"".concat(u,"px solid transparent"),maskImage:"linear-gradient(transparent, transparent), linear-gradient(#000, #000)",maskComposite:"intersect",WebkitMaskComposite:"source-in",maskClip:"padding-box, border-box"},children:(0,t.jsx)(r.P.div,{className:(0,l.cn)("absolute aspect-square","bg-gradient-to-l from-[var(--color-from)] via-[var(--color-to)] to-transparent",s),style:{width:a,offsetPath:"rect(0 auto auto 0 round ".concat(a,"px)"),"--color-from":n,"--color-to":d,...m},initial:{offsetDistance:"".concat(h,"%")},animate:{offsetDistance:x?["".concat(100-h,"%"),"".concat(-h,"%")]:["".concat(h,"%"),"".concat(100+h,"%")]},transition:{repeat:1/0,ease:"linear",duration:c,delay:-i,...o}})})}},42892:(e,s,a)=>{"use strict";a.d(s,{Eg:()=>l,N3:()=>d,a1:()=>c,is:()=>i,jw:()=>n});var t=a(95155),r=a(68122);function l(){return(0,t.jsx)("main",{className:"container relative mx-auto",children:(0,t.jsxs)("article",{className:"flex flex-col gap-2xl md:gap-3xl px-md",children:[(0,t.jsx)("div",{className:"@container w-full mt-md",children:(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Array.from({length:4}).map((e,s)=>(0,t.jsxs)("div",{className:"p-4 border rounded-md",children:[(0,t.jsx)(r.E,{className:"h-4 w-24 mb-2"}),(0,t.jsx)(r.E,{className:"h-8 w-32"})]},s))})}),(0,t.jsxs)("div",{className:"@container w-full",children:[(0,t.jsxs)("div",{className:"mb-md flex items-baseline justify-between",children:[(0,t.jsx)(r.E,{className:"h-6 w-32"}),(0,t.jsx)(r.E,{className:"h-8 w-28"})]}),(0,t.jsxs)("div",{className:"border rounded-md overflow-hidden p-4",children:[(0,t.jsx)("div",{className:"grid grid-cols-7 gap-2 mb-2",children:Array.from({length:7}).map((e,s)=>(0,t.jsx)(r.E,{className:"h-8 w-full"},s))}),(0,t.jsx)("div",{className:"grid grid-cols-7 gap-2",children:Array.from({length:35}).map((e,s)=>(0,t.jsx)(r.E,{className:"h-16 w-full"},s))})]})]}),(0,t.jsxs)("div",{className:"@container w-full",children:[(0,t.jsxs)("div",{className:"mb-md flex items-baseline justify-between",children:[(0,t.jsx)(r.E,{className:"h-6 w-32"}),(0,t.jsx)(r.E,{className:"h-8 w-28"})]}),(0,t.jsx)("div",{className:"border rounded-md overflow-hidden",children:(0,t.jsx)(r.E,{className:"h-96 w-full"})})]}),(0,t.jsxs)("div",{className:"@container w-full mb-md",children:[(0,t.jsxs)("div",{className:"mb-md flex items-baseline justify-between",children:[(0,t.jsx)(r.E,{className:"h-6 w-32"}),(0,t.jsx)(r.E,{className:"h-8 w-24"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Array.from({length:4}).map((e,s)=>(0,t.jsxs)("div",{className:"border rounded-md p-4 space-y-3",children:[(0,t.jsx)(r.E,{className:"h-32 w-full rounded"}),(0,t.jsx)(r.E,{className:"h-4 w-3/4"}),(0,t.jsx)(r.E,{className:"h-4 w-1/2"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(r.E,{className:"h-6 w-16"}),(0,t.jsx)(r.E,{className:"h-6 w-20"})]})]},s))})]})]})})}function i(){return(0,t.jsxs)("main",{className:"fixed inset-0 overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute inset-0",children:(0,t.jsx)(r.E,{className:"h-full w-full"})}),(0,t.jsxs)("div",{className:"absolute right-0 top-0 bottom-0 w-80 border-l bg-background p-4",children:[(0,t.jsx)(r.E,{className:"h-8 w-32 mb-4"}),(0,t.jsx)("div",{className:"space-y-3",children:Array.from({length:5}).map((e,s)=>(0,t.jsxs)("div",{className:"border rounded-md p-3 space-y-2",children:[(0,t.jsx)(r.E,{className:"h-4 w-3/4"}),(0,t.jsx)(r.E,{className:"h-4 w-1/2"}),(0,t.jsx)(r.E,{className:"h-6 w-20"})]},s))})]})]})}function c(){return(0,t.jsxs)("div",{className:"flex flex-col size-full",children:[(0,t.jsx)("div",{className:"border-b p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(r.E,{className:"h-8 w-8"}),(0,t.jsx)(r.E,{className:"h-8 w-8"}),(0,t.jsx)(r.E,{className:"h-6 w-32"}),(0,t.jsx)(r.E,{className:"h-8 w-8"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(r.E,{className:"h-8 w-24"}),(0,t.jsx)(r.E,{className:"h-8 w-24"}),(0,t.jsx)(r.E,{className:"h-8 w-24"})]})]})}),(0,t.jsx)("div",{className:"flex-1 p-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-7 gap-2 h-full",children:[(0,t.jsx)("div",{className:"space-y-2",children:Array.from({length:24}).map((e,s)=>(0,t.jsx)(r.E,{className:"h-12 w-full"},s))}),Array.from({length:6}).map((e,s)=>(0,t.jsx)("div",{className:"space-y-2",children:Array.from({length:24}).map((e,s)=>(0,t.jsx)(r.E,{className:"h-12 w-full"},s))},s))]})})]})}function n(){return(0,t.jsx)("main",{className:"container relative mx-auto",children:(0,t.jsx)("article",{className:"flex flex-col gap-2xl md:gap-3xl px-md",children:(0,t.jsxs)("div",{className:"@container w-full mt-md mb-md",children:[(0,t.jsx)(r.E,{className:"h-10 w-32 mb-6"}),(0,t.jsxs)("div",{className:"flex gap-3 mb-6",children:[(0,t.jsx)(r.E,{className:"h-10 flex-1"}),(0,t.jsx)(r.E,{className:"h-10 w-32"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:6}).map((e,s)=>(0,t.jsxs)("div",{className:"border rounded-md p-4 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(r.E,{className:"size-12 rounded-full"}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsx)(r.E,{className:"h-4 w-32"}),(0,t.jsx)(r.E,{className:"h-3 w-24"})]})]}),(0,t.jsx)(r.E,{className:"h-4 w-full"}),(0,t.jsx)(r.E,{className:"h-4 w-3/4"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(r.E,{className:"h-6 w-16"}),(0,t.jsx)(r.E,{className:"h-6 w-16"})]})]},s))})]})})})}function d(){return(0,t.jsxs)("div",{className:"flex size-full",children:[(0,t.jsx)("div",{className:"w-64 border-r p-4 space-y-2",children:Array.from({length:8}).map((e,s)=>(0,t.jsx)(r.E,{className:"h-10 w-full"},s))}),(0,t.jsxs)("div",{className:"flex-1 p-6 space-y-6",children:[(0,t.jsx)(r.E,{className:"h-8 w-48"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(r.E,{className:"h-4 w-full"}),(0,t.jsx)(r.E,{className:"h-4 w-3/4"}),(0,t.jsx)(r.E,{className:"h-32 w-full"}),(0,t.jsx)(r.E,{className:"h-10 w-32"})]})]})]})}},59845:(e,s,a)=>{Promise.resolve().then(a.bind(a,39877))}},e=>{e.O(0,[4896,6143,240,547,5707,2110,8234,2619,4001,3409,1204,9360,1163,550,1130,7117,2303,4419,7770,6362,3161,2596,2305,4795,1742,5657,4802,4729,2816,6784,1279,4960,1151,8441,1255,7358],()=>e(e.s=59845)),_N_E=e.O()}]);