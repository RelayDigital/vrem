(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7131],{4788:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("link-2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]])},6132:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},7235:(e,a,t)=>{"use strict";t.d(a,{d:()=>n});var s=t(95155);t(12115);var r=t(27599),l=t(25016);function n(e){let{className:a,...t}=e;return(0,s.jsx)(r.bL,{"data-slot":"switch",className:(0,l.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...t,children:(0,s.jsx)(r.zi,{"data-slot":"switch-thumb",className:(0,l.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}},16485:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},23327:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},24632:(e,a,t)=>{"use strict";t.d(a,{l:()=>o});var s=t(12115),r=t(20063),l=t(65939),n=t(75701),i=t(80408);function o(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,r.useRouter)(),{user:o,isLoading:d,activeOrganizationId:c,memberships:u}=(0,l.A)(),{redirectTo:h,enforceRedirect:x}=a,m=(0,s.useCallback)(()=>(0,n.in)(u,c),[u,c]);return(0,s.useEffect)(()=>{if(d)return;if(!o)return void t.push("/");let a=e.map(e=>(0,i.FK)(e)),s=(0,i.FK)(o.accountType),r=u.find(e=>e.orgId===c),l=(0,n.hq)(r,s);if(!a.includes(l)){if(!1===x)return;if(h)t.push(h);else{let e=(0,n.zE)(l);t.push(e)}}},[o,d,e,t,h,x,u,c]),{user:o,organizationId:c,memberships:u,isLoading:d,getActiveOrgRole:m}}},26983:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},27599:(e,a,t)=>{"use strict";t.d(a,{bL:()=>w,zi:()=>k});var s=t(12115),r=t(92556),l=t(94446),n=t(3468),i=t(23558),o=t(78108),d=t(84288),c=t(88142),u=t(95155),h="Switch",[x,m]=(0,n.A)(h),[p,f]=x(h),y=s.forwardRef((e,a)=>{let{__scopeSwitch:t,name:n,checked:o,defaultChecked:d,required:x,disabled:m,value:f="on",onCheckedChange:y,form:g,...v}=e,[w,k]=s.useState(null),N=(0,l.s)(a,e=>k(e)),A=s.useRef(!1),C=!w||g||!!w.closest("form"),[R,F]=(0,i.i)({prop:o,defaultProp:null!=d&&d,onChange:y,caller:h});return(0,u.jsxs)(p,{scope:t,checked:R,disabled:m,children:[(0,u.jsx)(c.sG.button,{type:"button",role:"switch","aria-checked":R,"aria-required":x,"data-state":j(R),"data-disabled":m?"":void 0,disabled:m,value:f,...v,ref:N,onClick:(0,r.mK)(e.onClick,e=>{F(e=>!e),C&&(A.current=e.isPropagationStopped(),A.current||e.stopPropagation())})}),C&&(0,u.jsx)(b,{control:w,bubbles:!A.current,name:n,value:f,checked:R,required:x,disabled:m,form:g,style:{transform:"translateX(-100%)"}})]})});y.displayName=h;var g="SwitchThumb",v=s.forwardRef((e,a)=>{let{__scopeSwitch:t,...s}=e,r=f(g,t);return(0,u.jsx)(c.sG.span,{"data-state":j(r.checked),"data-disabled":r.disabled?"":void 0,...s,ref:a})});v.displayName=g;var b=s.forwardRef((e,a)=>{let{__scopeSwitch:t,control:r,checked:n,bubbles:i=!0,...c}=e,h=s.useRef(null),x=(0,l.s)(h,a),m=(0,o.Z)(n),p=(0,d.X)(r);return s.useEffect(()=>{let e=h.current;if(!e)return;let a=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(m!==n&&a){let t=new Event("click",{bubbles:i});a.call(e,n),e.dispatchEvent(t)}},[m,n,i]),(0,u.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...c,tabIndex:-1,ref:x,style:{...c.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function j(e){return e?"checked":"unchecked"}b.displayName="SwitchBubbleInput";var w=y,k=v},30924:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]])},32559:(e,a,t)=>{"use strict";t.d(a,{Fc:()=>i,TN:()=>d,XL:()=>o});var s=t(95155);t(12115);var r=t(83101),l=t(64936);let n=(0,r.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function i(e){let{className:a,variant:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,l.cn)(n({variant:t}),a),...r})}function o(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"alert-title",className:(0,l.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",a),...t})}function d(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"alert-description",className:(0,l.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a),...t})}},32894:(e,a,t)=>{"use strict";t.d(a,{b:()=>o});var s=t(12115);t(47650);var r=t(32467),l=t(95155),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{let t=(0,r.TL)(`Primitive.${a}`),n=s.forwardRef((e,s)=>{let{asChild:r,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,l.jsx)(r?t:a,{...n,ref:s})});return n.displayName=`Primitive.${a}`,{...e,[a]:n}},{}),i=s.forwardRef((e,a)=>(0,l.jsx)(n.label,{...e,ref:a,onMouseDown:a=>{var t;a.target.closest("button, input, select, textarea")||(null==(t=e.onMouseDown)||t.call(e,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));i.displayName="Label";var o=i},33789:(e,a,t)=>{"use strict";t.d(a,{p:()=>i});var s=t(95155);t(12115);var r=t(83101),l=t(64936);let n=(0,r.F)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground flex w-full min-w-0 rounded-md transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"border-input bg-input-background dark:bg-input/30 border px-3 py-1",outline:"border-2 bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50 border px-3 py-1",ghost:"border-0 bg-transparent hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 px-3 py-1",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80 px-3 py-1",muted:"border-transparent bg-muted text-foreground hover:bg-muted/80 px-3 py-1",flat:"border-0 bg-transparent px-3 py-1"},size:{default:"h-9 text-base md:text-sm",sm:"h-8 text-sm px-2.5 py-1",lg:"h-10 text-base px-4 py-2"}},defaultVariants:{variant:"default",size:"default"}});function i(e){let{className:a,type:t,variant:r,size:i,...o}=e;return(0,s.jsx)("input",{type:t,"data-slot":"input",className:(0,l.cn)(n({variant:r,size:i}),a),...o})}},35299:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},42529:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},54679:(e,a,t)=>{"use strict";t.d(a,{Cf:()=>u,Es:()=>x,L3:()=>m,c7:()=>h,lG:()=>i,rr:()=>p,zM:()=>o});var s=t(95155);t(12115);var r=t(93409),l=t(65229),n=t(64936);function i(e){let{...a}=e;return(0,s.jsx)(r.bL,{"data-slot":"dialog",...a})}function o(e){let{...a}=e;return(0,s.jsx)(r.l9,{"data-slot":"dialog-trigger",...a})}function d(e){let{...a}=e;return(0,s.jsx)(r.ZL,{"data-slot":"dialog-portal",...a})}function c(e){let{className:a,...t}=e;return(0,s.jsx)(r.hJ,{"data-slot":"dialog-overlay",className:(0,n.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...t})}function u(e){let{className:a,children:t,...i}=e;return(0,s.jsxs)(d,{"data-slot":"dialog-portal",children:[(0,s.jsx)(c,{}),(0,s.jsxs)(r.UC,{"data-slot":"dialog-content",className:(0,n.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border-none p-6 shadow-lg duration-200 sm:max-w-lg",a),...i,children:[t,(0,s.jsxs)(r.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(l.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function h(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,n.cn)("flex flex-col gap-2 text-center sm:text-left",a),...t})}function x(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"dialog-footer",className:(0,n.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...t})}function m(e){let{className:a,...t}=e;return(0,s.jsx)(r.hE,{"data-slot":"dialog-title",className:(0,n.cn)("text-lg leading-none font-semibold",a),...t})}function p(e){let{className:a,...t}=e;return(0,s.jsx)(r.VY,{"data-slot":"dialog-description",className:(0,n.cn)("text-muted-foreground text-sm",a),...t})}},64906:(e,a,t)=>{Promise.resolve().then(t.bind(t,84183))},65229:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},67001:(e,a,t)=>{"use strict";t.d(a,{T:()=>l});var s=t(95155);t(12115);var r=t(64936);function l(e){let{className:a,...t}=e;return(0,s.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...t})}},68122:(e,a,t)=>{"use strict";t.d(a,{E:()=>l});var s=t(95155),r=t(64936);function l(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"skeleton",className:(0,r.cn)("bg-accent animate-pulse rounded-md",a),...t})}},75426:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},75701:(e,a,t)=>{"use strict";t.d(a,{hq:()=>r,in:()=>l,zE:()=>n});var s=t(80408);let r=(e,a)=>{var t;if(!e)return(0,s.FK)(a);if("PERSONAL"===((null==(t=e.organization)?void 0:t.type)||e.organizationType||""))return"COMPANY";let r=e.orgRole||e.role||(null==e?void 0:e.organizationRole)||a;return(0,s.FK)(r)},l=(e,a)=>{var t,s;let r=e.find(e=>e.orgId===a),l=null!=(s=null!=(t=null==r?void 0:r.orgRole)?t:null==r?void 0:r.role)?s:null;return l?l.toUpperCase():null},n=e=>{let a=(0,s.FK)(e);return"COMPANY"===a||"AGENT"===a||"TECHNICIAN"===a?"/dashboard":"/"}},78108:(e,a,t)=>{"use strict";t.d(a,{Z:()=>r});var s=t(12115);function r(e){let a=s.useRef({value:e,previous:e});return s.useMemo(()=>(a.current.value!==e&&(a.current.previous=a.current.value,a.current.value=e),a.current.previous),[e])}},84183:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>U});var s=t(95155),r=t(12115),l=t(24632),n=t(20063),i=t(73344),o=t(33789),d=t(90235),c=t(97003),u=t(42892),h=t(18720),x=t(42713),m=t(95657),p=t(61771),f=t(16485),y=t(42529),g=t(6132),v=t(35299),b=t(26983),j=t(4788),w=t(89559),k=t(30924),N=t(23327),A=t(75426),C=t(93499),R=t(32559),F=t(54679),S=t(7235),z=t(67001);let M={[p.ob.MONDAY]:"Monday",[p.ob.TUESDAY]:"Tuesday",[p.ob.WEDNESDAY]:"Wednesday",[p.ob.THURSDAY]:"Thursday",[p.ob.FRIDAY]:"Friday",[p.ob.SATURDAY]:"Saturday",[p.ob.SUNDAY]:"Sunday"},E=[p.ob.MONDAY,p.ob.TUESDAY,p.ob.WEDNESDAY,p.ob.THURSDAY,p.ob.FRIDAY,p.ob.SATURDAY,p.ob.SUNDAY];function U(){var e,a;let{user:t,isLoading:p}=(0,l.l)(["COMPANY","PROVIDER","AGENT","TECHNICIAN","EDITOR","PROJECT_MANAGER"]),U=(0,n.useSearchParams)(),L=(0,n.useRouter)(),T=(null==t?void 0:t.accountType)==="AGENT",[D,H]=(0,r.useState)(null),[I,O]=(0,r.useState)(!0),[Y,P]=(0,r.useState)(!1),[B,$]=(0,r.useState)(!1),[_,X]=(0,r.useState)(!1),[G,J]=(0,r.useState)(null),[W,q]=(0,r.useState)(!1),[V,Q]=(0,r.useState)([]),[K,Z]=(0,r.useState)(!0),[ee,ea]=(0,r.useState)(!1),[et,es]=(0,r.useState)(null),[er,el]=(0,r.useState)(!1),[en,ei]=(0,r.useState)(!1),[eo,ed]=(0,r.useState)(!0),[ec,eu]=(0,r.useState)(!1),[eh,ex]=(0,r.useState)(""),[em,ep]=(0,r.useState)([]);(0,r.useEffect)(()=>{let e=U.get("success"),a=U.get("error");"true"===e?(h.oR.success("Calendar connected successfully!"),L.replace("/settings/calendar",{scroll:!1})):a&&(h.oR.error({oauth_failed:"Failed to connect calendar. Please try again.",missing_params:"Invalid OAuth response. Please try again."}[a]||"An error occurred"),L.replace("/settings/calendar",{scroll:!1}))},[U,L]),(0,r.useEffect)(()=>{let e=async()=>{try{O(!0),ed(!0),Z(!0);let[e,a,t,s]=await Promise.all([m.F.calendarIntegrations.getIcsFeed(),m.F.availability.get(),m.F.nylas.isConfigured().catch(()=>({configured:!1})),m.F.nylas.getConnectionStatus().catch(()=>({connected:!1,integrations:[]}))]);H(e),J(a),ex(a.status.availabilityNote||""),ep(a.workHours),q(t.configured),Q(s.integrations||[])}catch(e){console.error("Failed to fetch settings:",e),h.oR.error("Failed to load calendar settings")}finally{O(!1),ed(!1),Z(!1)}};t&&e()},[t]);let ef=async e=>{if(G)try{eu(!0);let a=await m.F.availability.updateStatus({isAvailable:e,availabilityNote:eh||null,autoDeclineBookings:G.status.autoDeclineBookings});J(a),h.oR.success(e?"You are now available":"You are now unavailable")}catch(e){console.error("Failed to update availability:",e),h.oR.error("Failed to update availability")}finally{eu(!1)}},ey=async e=>{if(G)try{eu(!0);let a=await m.F.availability.updateStatus({isAvailable:G.status.isAvailable,availabilityNote:eh||null,autoDeclineBookings:e});J(a),h.oR.success(e?"Auto-decline enabled":"Auto-decline disabled")}catch(e){console.error("Failed to update auto-decline:",e),h.oR.error("Failed to update setting")}finally{eu(!1)}},eg=async()=>{if(G)try{eu(!0);let e=await m.F.availability.updateStatus({isAvailable:G.status.isAvailable,availabilityNote:eh||null,autoDeclineBookings:G.status.autoDeclineBookings});J(e),h.oR.success("Availability note saved")}catch(e){console.error("Failed to save note:",e),h.oR.error("Failed to save note")}finally{eu(!1)}},ev=(e,a,t)=>{ep(s=>s.map(s=>s.dayOfWeek===e?{...s,[a]:t}:s))},eb=async()=>{try{eu(!0);let e=await m.F.availability.updateWorkHours(em);J(e),ep(e.workHours),h.oR.success("Work hours saved")}catch(e){console.error("Failed to save work hours:",e),h.oR.error("Failed to save work hours")}finally{eu(!1)}},ej=async e=>{try{ea(!0),el(!1);let{url:a}=await m.F.nylas.startOAuth(e);window.location.href=a}catch(e){console.error("Failed to start OAuth:",e),h.oR.error("Failed to start calendar connection"),ea(!1)}},ew=async e=>{try{es(e),await m.F.nylas.disconnect(e),Q(a=>a.filter(a=>a.id!==e)),h.oR.success("Calendar disconnected")}catch(e){console.error("Failed to disconnect calendar:",e),h.oR.error("Failed to disconnect calendar")}finally{es(null)}},ek=async()=>{try{ei(!0);let e=await m.F.nylas.syncAllProjects();e.synced>0?h.oR.success("Synced ".concat(e.synced," job").concat(e.synced>1?"s":""," to your calendar")):0===e.synced&&0===e.failed&&h.oR.info("No jobs to sync - you may not have any scheduled jobs assigned"),e.failed>0&&h.oR.error("Failed to sync ".concat(e.failed," job").concat(e.failed>1?"s":""))}catch(e){console.error("Failed to sync all projects:",e),h.oR.error("Failed to sync jobs to calendar")}finally{ei(!1)}};if(p||I||eo||K)return(0,s.jsx)(u.N3,{});if(!t)return null;let eN=async()=>{if(null==D?void 0:D.feedUrl)try{await navigator.clipboard.writeText(D.feedUrl),$(!0),h.oR.success("Calendar URL copied to clipboard"),setTimeout(()=>$(!1),2e3)}catch(e){h.oR.error("Failed to copy URL")}},eA=async()=>{try{P(!0);let e=await m.F.calendarIntegrations.regenerateIcsFeed();H(e),X(!1),h.oR.success("Calendar URL regenerated successfully")}catch(e){console.error("Failed to regenerate feed:",e),h.oR.error("Failed to regenerate calendar URL")}finally{P(!1)}};return(0,s.jsxs)("div",{className:"space-y-8",children:[!T&&(0,s.jsx)(x.U,{id:"availability-status",title:"Availability Status",description:"Control your overall availability for job assignments.",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(d.J,{children:"Available for work"}),(0,s.jsx)(i.QX,{className:"text-xs",children:"When disabled, you won't receive new job assignments."})]}),(0,s.jsx)(S.d,{checked:null==(e=null==G?void 0:G.status.isAvailable)||e,onCheckedChange:ef,disabled:ec})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(d.J,{children:"Auto-decline new assignments"}),(0,s.jsx)(i.QX,{className:"text-xs",children:"Automatically decline new job assignments when you're unavailable."})]}),(0,s.jsx)(S.d,{checked:null!=(a=null==G?void 0:G.status.autoDeclineBookings)&&a,onCheckedChange:ey,disabled:ec})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(d.J,{htmlFor:"availability-note",children:"Availability Note"}),(0,s.jsx)(z.T,{id:"availability-note",placeholder:"e.g., On vacation until Jan 15",value:eh,onChange:e=>ex(e.target.value),className:"resize-none",rows:2}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)(c.$,{size:"sm",onClick:eg,disabled:ec||eh===((null==G?void 0:G.status.availabilityNote)||""),children:ec?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):"Save Note"})})]})]})}),!T&&(0,s.jsx)(x.U,{id:"work-hours",title:"Work Hours",description:"Set your regular working hours for each day of the week.",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)(R.Fc,{children:[(0,s.jsx)(b.A,{className:"h-4 w-4"}),(0,s.jsx)(R.XL,{children:"Schedule your availability"}),(0,s.jsx)(R.TN,{children:"Jobs will only be assigned during your working hours. Disable days you don't work."})]}),(0,s.jsx)("div",{className:"space-y-3",children:E.map(e=>{let a=em.find(a=>a.dayOfWeek===e);return a?(0,s.jsxs)("div",{className:"flex items-center gap-4 p-3 rounded-lg border bg-card",children:[(0,s.jsxs)("div",{className:"w-28 flex items-center gap-3",children:[(0,s.jsx)(S.d,{checked:a.isEnabled,onCheckedChange:a=>ev(e,"isEnabled",a)}),(0,s.jsx)("span",{className:a.isEnabled?"font-medium":"text-muted-foreground",children:M[e]})]}),a.isEnabled?(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,s.jsx)(o.p,{type:"time",value:a.startTime,onChange:a=>ev(e,"startTime",a.target.value),className:"w-32"}),(0,s.jsx)("span",{className:"text-muted-foreground",children:"to"}),(0,s.jsx)(o.p,{type:"time",value:a.endTime,onChange:a=>ev(e,"endTime",a.target.value),className:"w-32"})]}):(0,s.jsx)("div",{className:"flex-1 text-muted-foreground text-sm",children:"Not working"})]},e):null})}),(0,s.jsx)("div",{className:"flex justify-end pt-4",children:(0,s.jsx)(c.$,{onClick:eb,disabled:ec,children:ec?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):"Save Work Hours"})})]})}),W&&(0,s.jsx)(x.U,{id:"connected-calendars",title:"Connected Calendars",description:"Connect your calendars to automatically sync job events.",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(R.Fc,{children:[(0,s.jsx)(j.A,{className:"h-4 w-4"}),(0,s.jsx)(R.XL,{children:"Two-way calendar sync"}),(0,s.jsx)(R.TN,{children:"When you're assigned to a job, it will automatically appear on your connected calendar. If someone modifies the event externally, we'll notify you of the change."})]}),V.length>0?(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(d.J,{children:"Your connected calendars"}),V.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border bg-card",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(e=>{switch(null==e?void 0:e.toLowerCase()){case"google":return(0,s.jsxs)("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,s.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,s.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,s.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]});case"microsoft":return(0,s.jsxs)("svg",{className:"h-4 w-4",viewBox:"0 0 23 23",children:[(0,s.jsx)("path",{fill:"#f25022",d:"M0 0h11v11H0z"}),(0,s.jsx)("path",{fill:"#00a4ef",d:"M0 12h11v11H0z"}),(0,s.jsx)("path",{fill:"#7fba00",d:"M12 0h11v11H12z"}),(0,s.jsx)("path",{fill:"#ffb900",d:"M12 12h11v11H12z"})]});default:return(0,s.jsx)(f.A,{className:"h-4 w-4"})}})(e.provider),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"font-medium flex items-center gap-2",children:[(e=>{switch(null==e?void 0:e.toLowerCase()){case"google":return"Google Calendar";case"microsoft":return"Microsoft Outlook";default:return e||"Calendar"}})(e.provider),(e=>{switch(null==e?void 0:e.toUpperCase()){case"ACTIVE":return(0,s.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",children:[(0,s.jsx)(y.A,{className:"h-3 w-3 mr-1"}),"Connected"]});case"EXPIRED":return(0,s.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",children:[(0,s.jsx)(g.A,{className:"h-3 w-3 mr-1"}),"Expired"]});default:return(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400",children:e})}})(e.status)]}),(0,s.jsx)(i.QX,{className:"text-xs",children:e.providerAccountId||e.calendarName||"Connected calendar"}),e.lastSyncAt&&(0,s.jsxs)(i.QX,{className:"text-xs",children:["Last synced: ",new Date(e.lastSyncAt).toLocaleString()]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c.$,{variant:"outline",size:"sm",onClick:ek,disabled:en,children:en?(0,s.jsx)(v.A,{className:"h-4 w-4 animate-spin"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Sync Jobs"]})}),(0,s.jsx)(c.$,{variant:"outline",size:"sm",onClick:()=>ew(e.id),disabled:et===e.id,children:et===e.id?(0,s.jsx)(v.A,{className:"h-4 w-4 animate-spin"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k.A,{className:"h-4 w-4 mr-2"}),"Disconnect"]})})]})]},e.id))]}):(0,s.jsxs)("div",{className:"text-center py-6 text-muted-foreground border rounded-lg bg-muted/20",children:[(0,s.jsx)(f.A,{className:"h-10 w-10 mx-auto mb-3 opacity-50"}),(0,s.jsx)("p",{className:"font-medium",children:"No calendars connected"}),(0,s.jsx)(i.QX,{className:"text-sm",children:"Connect a calendar to automatically sync job events."})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(d.J,{children:"Connect a calendar"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:(0,s.jsxs)(F.lG,{open:er,onOpenChange:el,children:[(0,s.jsx)(F.zM,{asChild:!0,children:(0,s.jsx)(c.$,{variant:"outline",disabled:ee,children:ee?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Connecting..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.A,{className:"h-4 w-4 mr-2"}),"Connect Calendar"]})})}),(0,s.jsxs)(F.Cf,{children:[(0,s.jsxs)(F.c7,{children:[(0,s.jsx)(F.L3,{children:"Connect Your Calendar"}),(0,s.jsx)(F.rr,{children:"Choose a calendar provider to connect. Your job assignments will automatically sync to the connected calendar."})]}),(0,s.jsxs)("div",{className:"grid gap-3 py-4",children:[(0,s.jsx)(c.$,{variant:"outline",className:"justify-start h-auto py-4",onClick:()=>ej("google"),children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("svg",{className:"h-6 w-6",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,s.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,s.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,s.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("div",{className:"font-medium",children:"Google Calendar"}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Connect your Google account"})]})]})}),(0,s.jsx)(c.$,{variant:"outline",className:"justify-start h-auto py-4",onClick:()=>ej("microsoft"),children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("svg",{className:"h-6 w-6",viewBox:"0 0 23 23",children:[(0,s.jsx)("path",{fill:"#f25022",d:"M0 0h11v11H0z"}),(0,s.jsx)("path",{fill:"#00a4ef",d:"M0 12h11v11H0z"}),(0,s.jsx)("path",{fill:"#7fba00",d:"M12 0h11v11H12z"}),(0,s.jsx)("path",{fill:"#ffb900",d:"M12 12h11v11H12z"})]}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("div",{className:"font-medium",children:"Microsoft Outlook"}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Connect your Microsoft account"})]})]})})]}),(0,s.jsx)(F.Es,{children:(0,s.jsx)(c.$,{variant:"outline",onClick:()=>el(!1),children:"Cancel"})})]})]})})]})]})}),(0,s.jsx)(x.U,{id:"calendar-subscribe",title:"Calendar Subscribe URL",description:"Subscribe to your job schedule using any calendar app that supports ICS feeds.",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(R.Fc,{children:[(0,s.jsx)(N.A,{className:"h-4 w-4"}),(0,s.jsx)(R.XL,{children:"How it works"}),(0,s.jsx)(R.TN,{children:"Add this URL to your calendar app (Google Calendar, Apple Calendar, Outlook, etc.) to automatically see all your assigned jobs. The calendar will update automatically when jobs are added, changed, or removed."})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(d.J,{htmlFor:"ics-url",children:"Your Calendar URL"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(o.p,{id:"ics-url",type:"text",value:(null==D?void 0:D.feedUrl)||"",readOnly:!0,className:"font-mono text-sm bg-muted"}),(0,s.jsx)(c.$,{variant:"outline",size:"icon",onClick:eN,className:"shrink-0",children:B?(0,s.jsx)(y.A,{className:"h-4 w-4 text-green-500"}):(0,s.jsx)(A.A,{className:"h-4 w-4"})})]}),(0,s.jsx)(i.QX,{className:"text-xs",children:"This URL is private and unique to you. Do not share it publicly."})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(d.J,{children:"Add to Calendar"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>{if(null==D?void 0:D.feedUrl){let e="https://calendar.google.com/calendar/r?cid=".concat(encodeURIComponent(D.feedUrl.replace("http://","webcal://").replace("https://","webcal://")));window.open(e,"_blank")}},children:[(0,s.jsx)(C.A,{className:"h-4 w-4 mr-2"}),"Google Calendar"]}),(0,s.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>{if(null==D?void 0:D.feedUrl){let e=D.feedUrl.replace("http://","webcal://").replace("https://","webcal://");window.location.href=e}},children:[(0,s.jsx)(C.A,{className:"h-4 w-4 mr-2"}),"Apple Calendar"]}),(0,s.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>{if(null==D?void 0:D.feedUrl){let e="https://outlook.live.com/calendar/0/addfromweb?url=".concat(encodeURIComponent(D.feedUrl),"&name=VREM%20Jobs");window.open(e,"_blank")}},children:[(0,s.jsx)(C.A,{className:"h-4 w-4 mr-2"}),"Outlook"]})]})]}),(null==D?void 0:D.lastAccessAt)&&(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Last synced: ",new Date(D.lastAccessAt).toLocaleString()]}),(0,s.jsx)("div",{className:"pt-4 border-t",children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(d.J,{children:"Regenerate URL"}),(0,s.jsx)(i.QX,{className:"text-xs",children:"If you accidentally shared your calendar URL, regenerate it to create a new private link. Your old URL will stop working immediately."})]}),(0,s.jsxs)(F.lG,{open:_,onOpenChange:X,children:[(0,s.jsx)(F.zM,{asChild:!0,children:(0,s.jsxs)(c.$,{variant:"outline",size:"sm",children:[(0,s.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Regenerate"]})}),(0,s.jsxs)(F.Cf,{children:[(0,s.jsxs)(F.c7,{children:[(0,s.jsx)(F.L3,{children:"Regenerate Calendar URL?"}),(0,s.jsx)(F.rr,{children:"This will create a new calendar URL. Your current URL will stop working immediately, and you'll need to re-add the calendar in all your apps."})]}),(0,s.jsxs)(F.Es,{children:[(0,s.jsx)(c.$,{variant:"outline",onClick:()=>X(!1),children:"Cancel"}),(0,s.jsx)(c.$,{variant:"destructive",onClick:eA,disabled:Y,children:Y?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Regenerating..."]}):"Regenerate URL"})]})]})]})]})})]})})]})}},84288:(e,a,t)=>{"use strict";t.d(a,{X:()=>l});var s=t(12115),r=t(4129);function l(e){let[a,t]=s.useState(void 0);return(0,r.N)(()=>{if(e){t({width:e.offsetWidth,height:e.offsetHeight});let a=new ResizeObserver(a=>{let s,r;if(!Array.isArray(a)||!a.length)return;let l=a[0];if("borderBoxSize"in l){let e=l.borderBoxSize,a=Array.isArray(e)?e[0]:e;s=a.inlineSize,r=a.blockSize}else s=e.offsetWidth,r=e.offsetHeight;t({width:s,height:r})});return a.observe(e,{box:"border-box"}),()=>a.unobserve(e)}t(void 0)},[e]),a}},89559:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},93499:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])}},e=>{e.O(0,[547,5707,2110,8234,3409,5657,5939,8698,2892,8441,1255,7358],()=>e(e.s=64906)),_N_E=e.O()}]);