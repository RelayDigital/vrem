(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{42303:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(95155),i=s(81130),n=s(25016);let r=e=>{let{className:t,size:s=50,delay:r=0,duration:l=6,colorFrom:o="#ffaa40",colorTo:d="#9c40ff",transition:c,style:u,reverse:m=!1,initialOffset:x=0,borderWidth:h=1}=e;return(0,a.jsx)("div",{className:"pointer-events-none absolute inset-0 rounded-[inherit]",style:{border:"".concat(h,"px solid transparent"),maskImage:"linear-gradient(transparent, transparent), linear-gradient(#000, #000)",maskComposite:"intersect",WebkitMaskComposite:"source-in",maskClip:"padding-box, border-box"},children:(0,a.jsx)(i.P.div,{className:(0,n.cn)("absolute aspect-square","bg-gradient-to-l from-[var(--color-from)] via-[var(--color-to)] to-transparent",t),style:{width:s,offsetPath:"rect(0 auto auto 0 round ".concat(s,"px)"),"--color-from":o,"--color-to":d,...u},initial:{offsetDistance:"".concat(x,"%")},animate:{offsetDistance:m?["".concat(100-x,"%"),"".concat(-x,"%")]:["".concat(x,"%"),"".concat(100+x,"%")]},transition:{repeat:1/0,ease:"linear",duration:l,delay:-r,...c}})})}},45330:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>et});var a=s(95155),i=s(54244),n=s(52619),r=s.n(n),l=s(12115),o=s(95657);let d=(0,l.createContext)(void 0),c=["email","otp","name","marketplace","calendar","invite","usecases","password"],u={email:"",otpToken:"",name:"",accountType:null,calendarConnected:!1,inviteCode:"",inviteOrganization:void 0,useCases:[],password:"",pendingInvitations:[]};function m(e){let{children:t}=e,[s,i]=(0,l.useState)("email"),[n,r]=(0,l.useState)(u),[m,x]=(0,l.useState)(!1),[h,v]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=new URL(window.location.href),t=e.searchParams.get("invite")||e.searchParams.get("code");t&&!n.inviteCode&&o.F.organizations.validateInviteCode(t).then(e=>{e.valid&&e.organization&&r(s=>({...s,inviteCode:t,inviteOrganization:{id:e.organization.id,name:e.organization.name,logoUrl:e.organization.logoUrl},pendingInvitations:[{id:"url-invite",token:t,organization:{id:e.organization.id,name:e.organization.name,logoUrl:e.organization.logoUrl,type:e.organization.type||"COMPANY"},role:e.role||"TECHNICIAN",inviteType:e.inviteType||"MEMBER"}]}))}).catch(e=>{console.error("Failed to validate invite code from URL:",e)})},[]);let f=(0,l.useCallback)(e=>{r(t=>({...t,...e}));{let t={...n,...e};sessionStorage.setItem("onboarding_data",JSON.stringify(t))}},[n]),g=(0,l.useCallback)(e=>{i(e),v(null);{let t=c.indexOf(e)+1,s=new URL(window.location.href);s.searchParams.set("step",t.toString()),window.history.replaceState({},"",s.toString())}},[]),p=(0,l.useCallback)(()=>{let e=c.indexOf(s)+1;"usecases"===c[e]&&"PROVIDER"!==n.accountType&&e++,e<c.length&&g(c[e])},[s,n.accountType,g]),j=(0,l.useCallback)(()=>{let e=c.indexOf(s)-1;"usecases"===c[e]&&"PROVIDER"!==n.accountType&&e--,e>=0&&g(c[e])},[s,n.accountType,g]),b=c.indexOf(s)>0;return(0,a.jsx)(d.Provider,{value:{currentStep:s,data:n,setStep:g,updateData:f,nextStep:p,prevStep:j,canGoBack:b,isLoading:m,setIsLoading:x,error:h,setError:v},children:t})}function x(){let e=(0,l.useContext)(d);if(void 0===e)throw Error("useOnboarding must be used within an OnboardingProvider");return e}var h=s(97003),v=s(33789),f=s(7249),g=s(42303);function p(){let{data:e,updateData:t,nextStep:s,setIsLoading:i,setError:n,isLoading:d}=x(),[c,u]=(0,l.useState)(e.email),m=async e=>{e.preventDefault(),n(null),i(!0);try{if((await o.F.otp.checkEmail(c)).registered){n("This email is already registered. Please sign in instead."),i(!1);return}await o.F.otp.send(c),t({email:c}),s()}catch(e){n(e.message||"Failed to send verification code")}finally{i(!1)}};return(0,a.jsx)("form",{onSubmit:m,children:(0,a.jsxs)(f.M_,{children:[(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 text-center mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Welcome to VREM"}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm text-balance",children:"Enter your email to get started"})]}),(0,a.jsxs)(f.D0,{children:[(0,a.jsx)(f.dh,{htmlFor:"email",children:"Email address"}),(0,a.jsx)(v.p,{id:"email",type:"email",placeholder:"you@example.com",value:c,onChange:e=>u(e.target.value),required:!0,autoFocus:!0,disabled:d}),(0,a.jsx)(f.ry,{children:"We'll send you a verification code"})]}),(0,a.jsx)(f.D0,{children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(h.$,{type:"submit",className:"w-full",disabled:d||!c,children:d?"Sending code...":"Continue"}),c&&!d&&(0,a.jsx)(g.A,{size:40,duration:3,borderWidth:1.5})]})}),(0,a.jsxs)("p",{className:"text-center text-sm text-muted-foreground",children:["Already have an account?"," ",(0,a.jsx)(r(),{href:"/",className:"text-primary underline underline-offset-4",children:"Sign in"})]})]})})}var j=s(71753),b=s(64936);function y(e){let{className:t,containerClassName:s,...i}=e;return(0,a.jsx)(j.wE,{"data-slot":"input-otp",containerClassName:(0,b.cn)("flex items-center gap-2 has-disabled:opacity-50",s),className:(0,b.cn)("disabled:cursor-not-allowed",t),...i})}function N(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"input-otp-group",className:(0,b.cn)("flex items-center gap-1",t),...s})}function w(e){var t;let{index:s,className:i,...n}=e,r=l.useContext(j.dK),{char:o,hasFakeCaret:d,isActive:c}=null!=(t=null==r?void 0:r.slots[s])?t:{};return(0,a.jsxs)("div",{"data-slot":"input-otp-slot","data-active":c,className:(0,b.cn)("data-[active=true]:border-ring data-[active=true]:ring-ring/50 data-[active=true]:aria-invalid:ring-destructive/20 dark:data-[active=true]:aria-invalid:ring-destructive/40 aria-invalid:border-destructive data-[active=true]:aria-invalid:border-destructive dark:bg-input/30 border-input relative flex h-9 w-9 items-center justify-center border-y border-r text-sm bg-input-background transition-all outline-none first:rounded-l-md first:border-l last:rounded-r-md data-[active=true]:z-10 data-[active=true]:ring-[3px]",i),...n,children:[o,d&&(0,a.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-caret-blink bg-foreground h-4 w-px duration-1000"})})]})}var C=s(35626);function k(){let{data:e,updateData:t,nextStep:s,prevStep:i,setIsLoading:n,setError:r,isLoading:d}=x(),[c,u]=(0,l.useState)(""),[m,v]=(0,l.useState)(30),g=(0,l.useRef)(null);(0,l.useEffect)(()=>(g.current=setInterval(()=>{v(e=>e<=1?(g.current&&clearInterval(g.current),0):e-1)},1e3),()=>{g.current&&clearInterval(g.current)}),[]);let p=async()=>{if(6===c.length){r(null),n(!0);try{let a=await o.F.otp.verify(e.email,c),i=[];try{i=(await o.F.organizations.getPendingInvitationsByEmail(e.email)).invitations||[]}catch(e){console.error("Failed to check pending invitations:",e)}let n=i[0],r={otpToken:a.token,pendingInvitations:i};n&&!e.inviteCode&&(r.inviteCode=n.token,r.inviteOrganization={id:n.organization.id,name:n.organization.name,logoUrl:n.organization.logoUrl}),t(r),s()}catch(e){r(e.message||"Invalid verification code")}finally{n(!1)}}},j=async()=>{if(!(m>0)){r(null),v(30),g.current&&clearInterval(g.current),g.current=setInterval(()=>{v(e=>e<=1?(g.current&&clearInterval(g.current),0):e-1)},1e3);try{await o.F.otp.send(e.email)}catch(e){r(e.message||"Failed to resend code")}}};return(0,a.jsxs)(f.M_,{children:[(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 text-center mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Check your email"}),(0,a.jsxs)("p",{className:"text-muted-foreground text-sm text-balance",children:["We sent a 6-digit code to"," ",(0,a.jsx)("span",{className:"font-medium text-foreground",children:e.email})]})]}),(0,a.jsxs)(f.D0,{children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(y,{maxLength:6,value:c,onChange:u,onComplete:p,disabled:d,children:(0,a.jsxs)(N,{children:[(0,a.jsx)(w,{index:0}),(0,a.jsx)(w,{index:1}),(0,a.jsx)(w,{index:2}),(0,a.jsx)(w,{index:3}),(0,a.jsx)(w,{index:4}),(0,a.jsx)(w,{index:5})]})})}),(0,a.jsx)(f.ry,{className:"text-center mt-4",children:"Enter the verification code from your email"})]}),(0,a.jsx)(f.D0,{children:(0,a.jsx)(h.$,{type:"button",className:"w-full",onClick:p,disabled:d||6!==c.length,children:d?"Verifying...":"Verify"})}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(h.$,{type:"button",variant:"ghost",size:"sm",onClick:i,disabled:d,children:[(0,a.jsx)(C.A,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,a.jsx)(h.$,{type:"button",variant:"link",size:"sm",onClick:j,disabled:m>0||d,children:m>0?"Resend in ".concat(m,"s"):"Resend code"})]})]})}function A(){let{data:e,updateData:t,nextStep:s,prevStep:i,isLoading:n}=x(),[r,o]=(0,l.useState)(e.name);return(0,a.jsx)("form",{onSubmit:e=>{e.preventDefault(),r.trim()&&(t({name:r.trim()}),s())},children:(0,a.jsxs)(f.M_,{children:[(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 text-center mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"What's your name?"}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm text-balance",children:"This is how you'll appear to others"})]}),(0,a.jsxs)(f.D0,{children:[(0,a.jsx)(f.dh,{htmlFor:"name",children:"Full name"}),(0,a.jsx)(v.p,{id:"name",type:"text",placeholder:"John Doe",value:r,onChange:e=>o(e.target.value),required:!0,autoFocus:!0,disabled:n})]}),r.trim()&&(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary text-primary-foreground flex items-center justify-center font-medium text-lg",children:r.trim().charAt(0).toUpperCase()}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:r.trim()}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Profile preview"})]})]}),(0,a.jsx)(f.D0,{children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(h.$,{type:"submit",className:"w-full",disabled:n||!r.trim(),children:"Continue"}),r.trim()&&!n&&(0,a.jsx)(g.A,{size:40,duration:3,borderWidth:1.5})]})}),(0,a.jsxs)(h.$,{type:"button",variant:"ghost",size:"sm",onClick:i,disabled:n,className:"self-start",children:[(0,a.jsx)(C.A,{className:"w-4 h-4 mr-2"}),"Back"]})]})})}var z=s(91169),E=s(25016);let S=[{value:"AGENT",label:"I'm an Agent",description:"Book photoshoots for your property listings"},{value:"PROVIDER",label:"I'm a Provider",description:"Provide photography and media services"}],I={OWNER:"Owner",ADMIN:"Admin",PROJECT_MANAGER:"Project Manager",TECHNICIAN:"Technician",EDITOR:"Editor"};function R(){var e,t;let{data:s,updateData:i,nextStep:n,prevStep:r,isLoading:o}=x(),[d,c]=(0,l.useState)(null),u=null==(e=s.pendingInvitations)?void 0:e[0],m=d||s.accountType,v=m?null==(t=S.find(e=>e.value===m))?void 0:t.description:"Hover over an option to learn more";return(0,a.jsxs)(f.M_,{children:[u&&(0,a.jsx)("div",{className:"mb-4 p-3 rounded-lg bg-primary/10 border border-primary/20",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(z.A,{className:"w-4 h-4 text-primary"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-foreground",children:["You've been invited to join"," ",(0,a.jsx)("span",{className:"text-primary",children:u.organization.name})]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-0.5",children:["as ",I[u.role]||u.role]})]})]})}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 text-center mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"How will you use VREM?"}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm text-balance",children:"Select your role to customize your experience"})]}),(0,a.jsx)("div",{className:"flex w-full rounded-lg border border-border overflow-hidden",children:S.map((e,t)=>(0,a.jsx)("button",{type:"button",onClick:()=>{i({accountType:e.value}),n()},onMouseEnter:()=>c(e.value),onMouseLeave:()=>c(null),disabled:o,className:(0,E.cn)("flex-1 py-3.5 px-4 text-sm font-medium transition-colors","focus:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-inset",t>0&&"border-l border-border",s.accountType===e.value?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground hover:bg-muted hover:text-foreground"),children:e.label},e.value))}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground text-center mt-3 h-4",children:v}),(0,a.jsxs)(h.$,{type:"button",variant:"ghost",size:"sm",onClick:r,disabled:o,className:"self-start mt-4",children:[(0,a.jsx)(C.A,{className:"w-4 h-4 mr-2"}),"Back"]})]})}var P=s(54679),O=s(16485),F=s(5917),T=s(52056);function M(){let{data:e,updateData:t,nextStep:s,prevStep:i,isLoading:n}=x(),[r,o]=(0,l.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(f.M_,{children:[(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 text-center mb-6",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mb-2",children:(0,a.jsx)(O.A,{className:"w-8 h-8 text-primary"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Connect your calendar"})]}),(0,a.jsx)("ul",{className:"space-y-2 mb-2",children:"PROVIDER"===e.accountType?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("li",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsx)(F.A,{className:"w-4 h-4 text-primary flex-shrink-0"}),(0,a.jsx)("span",{children:"Automatic availability sync"})]}),(0,a.jsxs)("li",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsx)(F.A,{className:"w-4 h-4 text-primary flex-shrink-0"}),(0,a.jsx)("span",{children:"Prevent double-bookings"})]}),(0,a.jsxs)("li",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsx)(F.A,{className:"w-4 h-4 text-primary flex-shrink-0"}),(0,a.jsx)("span",{children:"Client scheduling integration"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("li",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsx)(F.A,{className:"w-4 h-4 text-primary flex-shrink-0"}),(0,a.jsx)("span",{children:"Automatic shoot reminders"})]}),(0,a.jsxs)("li",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsx)(F.A,{className:"w-4 h-4 text-primary flex-shrink-0"}),(0,a.jsx)("span",{children:"Calendar event creation"})]}),(0,a.jsxs)("li",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsx)(F.A,{className:"w-4 h-4 text-primary flex-shrink-0"}),(0,a.jsx)("span",{children:"Schedule at a glance"})]})]})}),(0,a.jsxs)(h.$,{type:"button",className:"w-full",onClick:()=>{t({calendarConnected:!0}),s()},disabled:n,children:[(0,a.jsxs)("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),(0,a.jsx)("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),(0,a.jsx)("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),(0,a.jsx)("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Connect Google Calendar"]}),(0,a.jsx)(h.$,{type:"button",variant:"ghost",className:"w-full",onClick:()=>{o(!0)},disabled:n,children:"Skip for now"}),(0,a.jsxs)(h.$,{type:"button",variant:"ghost",size:"sm",onClick:i,disabled:n,className:"self-start",children:[(0,a.jsx)(C.A,{className:"w-4 h-4 mr-2"}),"Back"]})]}),(0,a.jsx)(P.lG,{open:r,onOpenChange:o,children:(0,a.jsxs)(P.Cf,{children:[(0,a.jsxs)(P.c7,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center",children:(0,a.jsx)(T.A,{className:"w-5 h-5 text-amber-600"})}),(0,a.jsx)(P.L3,{children:"Skip calendar connection?"})]}),(0,a.jsx)(P.rr,{className:"pt-2",children:"PROVIDER"===e.accountType?"Without calendar sync, you'll need to manually manage your availability. This may lead to double-bookings.":"Without calendar sync, you won't get automatic reminders for your scheduled shoots."})]}),(0,a.jsxs)(P.Es,{children:[(0,a.jsx)(h.$,{variant:"outline",onClick:()=>o(!1),children:"Go back"}),(0,a.jsx)(h.$,{variant:"default",onClick:()=>{o(!1),t({calendarConnected:!1}),s()},children:"Skip anyway"})]})]})})]})}var D=s(61362),_=s(78874),V=s(19408),$=s(23327);function U(){let{data:e,updateData:t,nextStep:s,prevStep:i,isLoading:n,setIsLoading:r}=x(),[d,c]=(0,l.useState)(e.inviteCode),[u,m]=(0,l.useState)(!1),[p,j]=(0,l.useState)(null),b=(0,l.useRef)(!1),y=e.pendingInvitations.length>0&&e.inviteCode;return(0,l.useEffect)(()=>{!b.current&&(b.current=!0,e.inviteCode&&e.inviteOrganization&&j({valid:!0,organization:e.inviteOrganization}))},[e.inviteCode,e.inviteOrganization]),(0,l.useEffect)(()=>{if(d===e.inviteCode&&(null==p?void 0:p.valid))return;if(!d.trim())return void j(null);let s=setTimeout(async()=>{m(!0);try{let e=await o.F.organizations.validateInviteCode(d.trim());j(e),e.valid&&e.organization&&t({inviteCode:d.trim(),inviteOrganization:e.organization})}catch(e){j({valid:!1})}finally{m(!1)}},500);return()=>clearTimeout(s)},[d,t,e.inviteCode,null==p?void 0:p.valid]),(0,a.jsx)("form",{onSubmit:e=>{e.preventDefault(),s()},children:(0,a.jsxs)(f.M_,{children:[(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 text-center mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Got an invite code?"}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm text-balance",children:"If someone invited you to join their organization, enter the code here"})]}),(0,a.jsxs)(f.D0,{children:[(0,a.jsx)(f.dh,{htmlFor:"invite-code",children:"Invite code (optional)"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(v.p,{id:"invite-code",type:"text",placeholder:"Enter invite code",value:d,onChange:e=>c(e.target.value),disabled:n,className:(0,E.cn)((null==p?void 0:p.valid)===!0&&"border-green-500",(null==p?void 0:p.valid)===!1&&d&&"border-destructive")}),u&&(0,a.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-primary border-t-transparent rounded-full animate-spin"})}),!u&&(null==p?void 0:p.valid)&&(0,a.jsx)(D.A,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-green-500"}),!u&&(null==p?void 0:p.valid)===!1&&d&&(0,a.jsx)(_.A,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-destructive"})]}),(0,a.jsx)(f.ry,{children:"Leave empty if you don't have one"})]}),(null==p?void 0:p.valid)&&p.organization&&(0,a.jsxs)("div",{className:"p-4 rounded-lg border bg-muted/50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[p.organization.logoUrl?(0,a.jsx)("img",{src:p.organization.logoUrl,alt:"",className:"w-10 h-10 rounded-lg object-cover"}):(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:(0,a.jsx)(V.A,{className:"w-5 h-5 text-primary"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:p.organization.name}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"You'll join this organization"})]})]}),y&&(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t flex items-start gap-2 text-xs text-muted-foreground",children:[(0,a.jsx)($.A,{className:"w-3.5 h-3.5 mt-0.5 flex-shrink-0"}),(0,a.jsx)("span",{children:"This invitation was detected from your email. You can change or remove it if needed."})]})]}),(null==p?void 0:p.valid)===!1&&d&&(0,a.jsx)("p",{className:"text-sm text-destructive text-center",children:"This invite code is invalid or has expired"}),(0,a.jsx)(f.D0,{children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(h.$,{type:"submit",className:"w-full",disabled:n||!!(d&&!(null==p?void 0:p.valid)),children:(null==p?void 0:p.valid)?"Continue":"Continue without code"}),!n&&!(d&&!(null==p?void 0:p.valid))&&(0,a.jsx)(g.A,{size:40,duration:3,borderWidth:1.5})]})}),d&&!(null==p?void 0:p.valid)&&(0,a.jsx)(h.$,{type:"button",variant:"ghost",className:"w-full",onClick:()=>{t({inviteCode:"",inviteOrganization:void 0}),s()},disabled:n,children:"Skip this step"}),(0,a.jsxs)(h.$,{type:"button",variant:"ghost",size:"sm",onClick:i,disabled:n,className:"self-start",children:[(0,a.jsx)(C.A,{className:"w-4 h-4 mr-2"}),"Back"]})]})})}let L=[{value:"PHOTOGRAPHY",label:"Photography",icon:"\uD83D\uDCF7"},{value:"VIDEOGRAPHY",label:"Videography",icon:"\uD83C\uDFAC"},{value:"DRONE_AERIAL",label:"Drone/Aerial",icon:"\uD83D\uDE81"},{value:"VIRTUAL_TOURS",label:"Virtual Tours",icon:"\uD83C\uDFE0"},{value:"FLOOR_PLANS",label:"Floor Plans",icon:"\uD83D\uDCD0"},{value:"EDITING",label:"Editing",icon:"\uD83D\uDDBC️"},{value:"STAGING",label:"Virtual Staging",icon:"\uD83D\uDECB️"},{value:"MEASUREMENTS",label:"Measurements",icon:"\uD83D\uDCCF"}];function B(){let{data:e,updateData:t,nextStep:s,prevStep:i,isLoading:n,setError:r}=x();return(0,a.jsxs)(f.M_,{children:[(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 text-center mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"What services do you offer?"}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm text-balance",children:"Select all the services you provide"})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:L.map(s=>{let i=e.useCases.includes(s.value);return(0,a.jsxs)("button",{type:"button",onClick:()=>(s=>{let a=e.useCases;t({useCases:a.includes(s)?a.filter(e=>e!==s):[...a,s]})})(s.value),disabled:n,className:(0,E.cn)("relative p-4 rounded-xl border-2 text-center transition-all","hover:border-primary hover:bg-primary/5","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",i?"border-primary bg-primary/10":"border-border"),children:[i&&(0,a.jsx)("div",{className:"absolute top-2 right-2 w-5 h-5 rounded-full bg-primary flex items-center justify-center",children:(0,a.jsx)(F.A,{className:"w-3 h-3 text-primary-foreground"})}),(0,a.jsx)("div",{className:"text-2xl mb-2",children:s.icon}),(0,a.jsx)("div",{className:"text-sm font-medium",children:s.label})]},s.value)})}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground text-center",children:[e.useCases.length," service",1!==e.useCases.length?"s":""," ","selected"]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(h.$,{type:"button",className:"w-full",onClick:()=>{if(0===e.useCases.length)return void r("Please select at least one service you provide");s()},disabled:n||0===e.useCases.length,children:"Continue"}),e.useCases.length>0&&!n&&(0,a.jsx)(g.A,{size:40,duration:3,borderWidth:1.5})]}),(0,a.jsxs)(h.$,{type:"button",variant:"ghost",size:"sm",onClick:i,disabled:n,className:"self-start",children:[(0,a.jsx)(C.A,{className:"w-4 h-4 mr-2"}),"Back"]})]})}var G=s(28014),W=s(70532),q=s(57828),H=s(65229),Y=s(20063);function J(){let{signUp:e,setActive:t}=(0,G.yC)(),s=(0,Y.useRouter)(),{data:i,prevStep:n,setIsLoading:r,setError:d,isLoading:c}=x(),[u,m]=(0,l.useState)(""),[g,p]=(0,l.useState)(""),[j,b]=(0,l.useState)(!1),[y,N]=(0,l.useState)(!1),w=[{label:"At least 8 characters",met:u.length>=8},{label:"Contains a number",met:/\d/.test(u)},{label:"Contains uppercase & lowercase",met:/[a-z]/.test(u)&&/[A-Z]/.test(u)}],k=w.every(e=>e.met),A=u===g&&u.length>0,z=async a=>{if(a.preventDefault(),!e||!t)return void d("Authentication not initialized. Please refresh the page.");if(!k)return void d("Please meet all password requirements");if(!A)return void d("Passwords do not match");d(null),r(!0);try{let a=i.accountType||"AGENT",r=i.name.trim().split(" "),c=r[0]||"",m=r.slice(1).join(" ")||"",x=await e.create({emailAddress:i.email,password:u,firstName:c,lastName:m,unsafeMetadata:{accountType:a,inviteCode:i.inviteCode||void 0,useCases:"PROVIDER"===a?i.useCases:void 0}});if("complete"===x.status){if(await t({session:x.createdSessionId}),sessionStorage.removeItem("onboarding_data"),sessionStorage.removeItem("onboarding_return"),i.calendarConnected)try{let{url:e}=await o.F.nylas.startOAuth("google","dashboard");window.location.href=e;return}catch(e){console.error("Failed to start calendar OAuth:",e)}s.push("/dashboard")}else if("missing_requirements"===x.status){var n,l;console.log("Sign-up missing requirements:",{status:x.status,missingFields:x.missingFields,unverifiedFields:x.unverifiedFields,verifications:x.verifications}),(null==(n=x.unverifiedFields)?void 0:n.includes("email_address"))?d("Email verification required. Please disable 'Verify at sign-up' for Email in Clerk dashboard."):(null==(l=x.missingFields)?void 0:l.length)?d("Missing required fields: ".concat(x.missingFields.join(", "))):d("Registration incomplete. Check Clerk dashboard settings. Missing: ".concat(JSON.stringify(x.unverifiedFields||x.missingFields||"unknown")))}else console.log("Sign-up status:",x.status,x),d("Registration incomplete: ".concat(x.status))}catch(e){if(console.error("Registration failed:",e),e.errors){let t=e.errors[0];(null==t?void 0:t.code)==="form_identifier_exists"?d("An account with this email already exists. Please log in instead."):d((null==t?void 0:t.message)||"Registration failed. Please try again.")}else d(e.message||"Registration failed. Please try again.")}finally{r(!1)}};return(0,a.jsxs)("form",{onSubmit:z,children:[(0,a.jsx)("div",{id:"clerk-captcha"}),(0,a.jsxs)(f.M_,{children:[(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 text-center mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Create your password"}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm text-balance",children:"Choose a strong password to secure your account"})]}),(0,a.jsxs)(f.D0,{children:[(0,a.jsx)(f.dh,{htmlFor:"password",children:"Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(v.p,{id:"password",type:j?"text":"password",value:u,onChange:e=>m(e.target.value),required:!0,autoFocus:!0,disabled:c,className:"pr-10"}),(0,a.jsx)("button",{type:"button",onClick:()=>b(!j),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",tabIndex:-1,children:j?(0,a.jsx)(W.A,{className:"w-4 h-4"}):(0,a.jsx)(q.A,{className:"w-4 h-4"})})]})]}),(0,a.jsx)("div",{className:"space-y-2",children:w.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm ".concat(e.met?"text-green-600":"text-muted-foreground"),children:[e.met?(0,a.jsx)(F.A,{className:"w-4 h-4"}):(0,a.jsx)(H.A,{className:"w-4 h-4"}),e.label]},e.label))}),(0,a.jsxs)(f.D0,{children:[(0,a.jsx)(f.dh,{htmlFor:"confirm-password",children:"Confirm password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(v.p,{id:"confirm-password",type:y?"text":"password",value:g,onChange:e=>p(e.target.value),required:!0,disabled:c,className:"pr-10"}),(0,a.jsx)("button",{type:"button",onClick:()=>N(!y),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",tabIndex:-1,children:y?(0,a.jsx)(W.A,{className:"w-4 h-4"}):(0,a.jsx)(q.A,{className:"w-4 h-4"})})]}),g&&!A&&(0,a.jsx)(f.ry,{className:"text-destructive",children:"Passwords do not match"})]}),(0,a.jsx)(f.D0,{children:(0,a.jsx)(h.$,{type:"submit",className:"w-full",disabled:c||!k||!A,children:c?"Creating account...":"Create account"})}),(0,a.jsxs)(h.$,{type:"button",variant:"ghost",size:"sm",onClick:n,disabled:c,className:"self-start",children:[(0,a.jsx)(C.A,{className:"w-4 h-4 mr-2"}),"Back"]})]})]})}var Z=s(26497),K=s(81130);function X(){let{currentStep:e,error:t}=x();return(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(Q,{}),t&&(0,a.jsx)("div",{className:"mb-4 p-3 rounded-lg bg-destructive/10 text-destructive text-sm text-center",children:t}),(0,a.jsx)(Z.N,{mode:"wait",children:(0,a.jsx)(K.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:(()=>{switch(e){case"email":default:return(0,a.jsx)(p,{});case"otp":return(0,a.jsx)(k,{});case"name":return(0,a.jsx)(A,{});case"marketplace":return(0,a.jsx)(R,{});case"calendar":return(0,a.jsx)(M,{});case"invite":return(0,a.jsx)(U,{});case"usecases":return(0,a.jsx)(B,{});case"password":return(0,a.jsx)(J,{})}})()},e)})]})})}function Q(){let{currentStep:e,data:t}=x(),s=["email","otp","name","marketplace","calendar","invite",..."PROVIDER"===t.accountType?["usecases"]:[],"password"],i=s.findIndex(t=>t===e),n=s.length;return(0,a.jsx)("div",{className:"mb-6 text-center",children:(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[i+1,"/",n]})})}var ee=s(52941);function et(){return(0,a.jsx)(m,{children:(0,a.jsxs)("div",{className:"grid min-h-svh lg:grid-cols-2",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 p-6 md:p-10",children:[(0,a.jsx)("div",{className:"flex justify-center gap-2 md:justify-start",children:(0,a.jsxs)(r(),{href:"/",className:"flex items-center gap-2 font-medium",children:[(0,a.jsx)("div",{className:"bg-primary text-primary-foreground flex size-6 items-center justify-center rounded-md",children:(0,a.jsx)(i.A,{className:"size-4"})}),"VX Media"]})}),(0,a.jsx)("div",{className:"flex flex-1 items-center justify-center",children:(0,a.jsx)("div",{className:"w-full max-w-md",children:(0,a.jsx)(X,{})})})]}),(0,a.jsx)("div",{className:"bg-muted relative hidden lg:block",children:(0,a.jsx)(ee.LoginMapView,{})})]})})}},54679:(e,t,s)=>{"use strict";s.d(t,{Cf:()=>u,Es:()=>x,L3:()=>h,c7:()=>m,lG:()=>l,rr:()=>v,zM:()=>o});var a=s(95155);s(12115);var i=s(93409),n=s(65229),r=s(64936);function l(e){let{...t}=e;return(0,a.jsx)(i.bL,{"data-slot":"dialog",...t})}function o(e){let{...t}=e;return(0,a.jsx)(i.l9,{"data-slot":"dialog-trigger",...t})}function d(e){let{...t}=e;return(0,a.jsx)(i.ZL,{"data-slot":"dialog-portal",...t})}function c(e){let{className:t,...s}=e;return(0,a.jsx)(i.hJ,{"data-slot":"dialog-overlay",className:(0,r.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function u(e){let{className:t,children:s,...l}=e;return(0,a.jsxs)(d,{"data-slot":"dialog-portal",children:[(0,a.jsx)(c,{}),(0,a.jsxs)(i.UC,{"data-slot":"dialog-content",className:(0,r.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border-none p-6 shadow-lg duration-200 sm:max-w-lg",t),...l,children:[s,(0,a.jsxs)(i.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(n.A,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function m(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"dialog-header",className:(0,r.cn)("flex flex-col gap-2 text-center sm:text-left",t),...s})}function x(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"dialog-footer",className:(0,r.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...s})}function h(e){let{className:t,...s}=e;return(0,a.jsx)(i.hE,{"data-slot":"dialog-title",className:(0,r.cn)("text-lg leading-none font-semibold",t),...s})}function v(e){let{className:t,...s}=e;return(0,a.jsx)(i.VY,{"data-slot":"dialog-description",className:(0,r.cn)("text-muted-foreground text-sm",t),...s})}},58564:(e,t,s)=>{Promise.resolve().then(s.bind(s,45330))}},e=>{e.O(0,[4896,240,547,5707,8234,2619,3409,1130,3066,5657,6827,8441,1255,7358],()=>e(e.s=58564)),_N_E=e.O()}]);