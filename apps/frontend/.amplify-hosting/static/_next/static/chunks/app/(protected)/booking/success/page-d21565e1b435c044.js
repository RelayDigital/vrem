(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3220],{6132:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},20063:(e,r,t)=>{"use strict";var a=t(47260);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}}),t.o(a,"useSelectedLayoutSegments")&&t.d(r,{useSelectedLayoutSegments:function(){return a.useSelectedLayoutSegments}})},25016:(e,r,t)=>{"use strict";t.d(r,{cn:()=>n,e:()=>o,w:()=>i});var a=t(2821),s=t(75889);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.QP)((0,a.$)(r))}let o=!1;function i(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r){let r=[];return e.street&&r.push(e.street),r.push(e.city),r.push(e.stateProvince),e.postalCode&&r.push(e.postalCode),r.push(e.country),r.join(", ")}return"".concat(e.city,", ").concat(e.stateProvince,", ").concat(e.country)}},26983:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},35299:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},42529:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},55850:(e,r,t)=>{"use strict";t.d(r,{k:()=>i});var a=t(95155),s=t(12115),n=t(77450),o=t(25016);let i=s.forwardRef((e,r)=>{let{className:t,value:s,indicatorClassName:i,...l}=e;return(0,a.jsx)(n.bL,{ref:r,className:(0,o.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...l,children:(0,a.jsx)(n.C1,{className:(0,o.cn)("h-full w-full flex-1 bg-primary transition-all",i),style:{transform:"translateX(-".concat(100-(s||0),"%)")}})})});i.displayName=n.bL.displayName},64936:(e,r,t)=>{"use strict";t.d(r,{cn:()=>n});var a=t(2821),s=t(75889);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.QP)((0,a.$)(r))}},69819:(e,r,t)=>{Promise.resolve().then(t.bind(t,99828))},71847:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});var a=t(12115);let s=e=>{let r=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,t)=>t?t.toUpperCase():r.toLowerCase());return r.charAt(0).toUpperCase()+r.slice(1)},n=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,a.forwardRef)((e,r)=>{let{color:t="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:u="",children:c,iconNode:d,...m}=e;return(0,a.createElement)("svg",{ref:r,...o,width:s,height:s,stroke:t,strokeWidth:l?24*Number(i)/Number(s):i,className:n("lucide",u),...!c&&!(e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0})(m)&&{"aria-hidden":"true"},...m},[...d.map(e=>{let[r,t]=e;return(0,a.createElement)(r,t)}),...Array.isArray(c)?c:[c]])}),l=(e,r)=>{let t=(0,a.forwardRef)((t,o)=>{let{className:l,...u}=t;return(0,a.createElement)(i,{ref:o,iconNode:r,className:n("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),l),...u})});return t.displayName=s(e),t}},77450:(e,r,t)=>{"use strict";t.d(r,{C1:()=>N,bL:()=>y});var a=t(12115),s=t(95155);t(47650);var n=t(32467),o=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let t=(0,n.TL)(`Primitive.${r}`),o=a.forwardRef((e,a)=>{let{asChild:n,...o}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(n?t:r,{...o,ref:a})});return o.displayName=`Primitive.${r}`,{...e,[r]:o}},{}),i="Progress",[l,u]=function(e,r=[]){let t=[],n=()=>{let r=t.map(e=>a.createContext(e));return function(t){let s=t?.[e]||r;return a.useMemo(()=>({[`__scope${e}`]:{...t,[e]:s}}),[t,s])}};return n.scopeName=e,[function(r,n){let o=a.createContext(n);o.displayName=r+"Context";let i=t.length;t=[...t,n];let l=r=>{let{scope:t,children:n,...l}=r,u=t?.[e]?.[i]||o,c=a.useMemo(()=>l,Object.values(l));return(0,s.jsx)(u.Provider,{value:c,children:n})};return l.displayName=r+"Provider",[l,function(t,s){let l=s?.[e]?.[i]||o,u=a.useContext(l);if(u)return u;if(void 0!==n)return n;throw Error(`\`${t}\` must be used within \`${r}\``)}]},function(...e){let r=e[0];if(1===e.length)return r;let t=()=>{let t=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let s=t.reduce((r,{useScope:t,scopeName:a})=>{let s=t(e)[`__scope${a}`];return{...r,...s}},{});return a.useMemo(()=>({[`__scope${r.scopeName}`]:s}),[s])}};return t.scopeName=r.scopeName,t}(n,...r)]}(i),[c,d]=l(i),m=a.forwardRef((e,r)=>{var t,a,n,i;let{__scopeProgress:l,value:u=null,max:d,getValueLabel:m=x,...p}=e;(d||0===d)&&!g(d)&&console.error((t="".concat(d),a="Progress","Invalid prop `max` of value `".concat(t,"` supplied to `").concat(a,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let f=g(d)?d:100;null===u||b(u,f)||console.error((n="".concat(u),i="Progress","Invalid prop `value` of value `".concat(n,"` supplied to `").concat(i,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let y=b(u,f)?u:null,N=v(y)?m(y,f):void 0;return(0,s.jsx)(c,{scope:l,value:y,max:f,children:(0,s.jsx)(o.div,{"aria-valuemax":f,"aria-valuemin":0,"aria-valuenow":v(y)?y:void 0,"aria-valuetext":N,role:"progressbar","data-state":h(y,f),"data-value":null!=y?y:void 0,"data-max":f,...p,ref:r})})});m.displayName=i;var p="ProgressIndicator",f=a.forwardRef((e,r)=>{var t;let{__scopeProgress:a,...n}=e,i=d(p,a);return(0,s.jsx)(o.div,{"data-state":h(i.value,i.max),"data-value":null!=(t=i.value)?t:void 0,"data-max":i.max,...n,ref:r})});function x(e,r){return"".concat(Math.round(e/r*100),"%")}function h(e,r){return null==e?"indeterminate":e===r?"complete":"loading"}function v(e){return"number"==typeof e}function g(e){return v(e)&&!isNaN(e)&&e>0}function b(e,r){return v(e)&&!isNaN(e)&&e<=r&&e>=0}f.displayName=p;var y=m,N=f},83209:(e,r,t)=>{"use strict";t.d(r,{BT:()=>c,Wu:()=>d,ZB:()=>u,Zp:()=>i,aR:()=>l,wL:()=>m});var a=t(95155);t(12115);var s=t(83101),n=t(64936);let o=(0,s.F)("bg-card text-card-foreground flex flex-col gap-0 rounded-xl",{variants:{variant:{default:"border",outline:"border-2",ghost:"border-0 shadow-none",elevated:"border shadow-lg",bordered:"border-2 border-border",flat:"border-0 bg-transparent",muted:"border-none bg-muted"},size:{default:"rounded-md",sm:"rounded-lg",lg:"rounded-2xl"}},defaultVariants:{variant:"default",size:"default"}});function i(e){let{className:r,variant:t,size:s,...i}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,n.cn)(o({variant:t,size:s}),r),...i})}function l(e){let{className:r,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,n.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-0 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),...t})}function u(e){let{className:r,...t}=e;return(0,a.jsx)("h4",{"data-slot":"card-title",className:(0,n.cn)("leading-none",r),...t})}function c(e){let{className:r,...t}=e;return(0,a.jsx)("p",{"data-slot":"card-description",className:(0,n.cn)("text-muted-foreground",r),...t})}function d(e){let{className:r,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,n.cn)("px-6 [&:last-child]:pb-6",r),...t})}function m(e){let{className:r,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-footer",className:(0,n.cn)("flex items-center px-6 pb-6 [.border-t]:pt-6",r),...t})}},97003:(e,r,t)=>{"use strict";t.d(r,{$:()=>l,r:()=>i});var a=t(95155);t(12115);var s=t(32467),n=t(83101),o=t(25016);let i=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive cursor-pointer",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline",muted:"text-primary border-none bg-muted hover:bg-primary/20 transition-colors duration-300",flat:"text-primary border-none bg-transparent hover:text-primary/60 transition-colors duration-300",activeFlat:"text-primary border-none bg-transparent",mutedFlat:"text-primary/60 border-none bg-transparent hover:text-primary/90 transition-colors duration-300"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:r,variant:t,size:n,asChild:l=!1,...u}=e,c=l?s.DX:"button";return(0,a.jsx)(c,{"data-slot":"button",className:(0,o.cn)(i({variant:t,size:n,className:r})),...u})}},99828:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>f});var a=t(95155),s=t(12115),n=t(20063),o=t(26983),i=t(6132),l=t(42529),u=t(35299),c=t(97003),d=t(83209),m=t(55850),p=t(95657);function f(){let e=(0,n.useSearchParams)(),r=(0,n.useRouter)(),t=e.get("session_id"),[f,x]=(0,s.useState)(null),[h,v]=(0,s.useState)(null),[g,b]=(0,s.useState)(null),[y,N]=(0,s.useState)(!0),[j,w]=(0,s.useState)(0),[k,C]=(0,s.useState)(0),P=(0,s.useRef)(!0),A=(0,s.useRef)(null),S=(0,s.useCallback)(async()=>{if(t)try{let e=await p.F.orders.getOrderStatus(t);x(e.status),v(e.projectId),A.current=e.projectId,"PROJECT_CREATED"===e.status?(P.current=!1,N(!1),C(100)):("EXPIRED"===e.status||"CANCELLED"===e.status)&&(P.current=!1,N(!1),b("Payment was not completed"))}catch(e){console.error("Failed to get order status:",e),w(e=>e+1)}},[t]);if((0,s.useEffect)(()=>{if(!t){b("Missing session ID"),N(!1);return}P.current=!0,S();let e=1e3,r=0,a=setInterval(()=>{if(!P.current)return void clearInterval(a);C(Math.min(90,(r+=e)/3e4*100)),r>1e4&&(e=2e3),S(),w(e=>e+1),r>=3e4&&(P.current=!1,N(!1),A.current||b("Order processing is taking longer than expected."))},1e3);return()=>{clearInterval(a),P.current=!1}},[t,S]),g){let e=g.includes("taking longer");return(0,a.jsx)("div",{className:"container max-w-lg mx-auto py-16",children:(0,a.jsxs)(d.Zp,{children:[(0,a.jsxs)(d.aR,{className:"text-center pb-6",children:[e?(0,a.jsx)(o.A,{className:"h-12 w-12 text-amber-500 mx-auto mb-4"}):(0,a.jsx)(i.A,{className:"h-12 w-12 text-destructive mx-auto mb-4"}),(0,a.jsx)(d.ZB,{children:e?"Still Processing":"Something went wrong"}),(0,a.jsx)(d.BT,{className:"text-base",children:e?(0,a.jsxs)(a.Fragment,{children:["Your payment was successful, but the order is still being processed.",(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"Check your jobs page in a moment - your order should appear shortly."})]}):g})]}),(0,a.jsxs)(d.Wu,{className:"flex flex-col gap-3 pt-6",children:[(0,a.jsx)(c.$,{className:"w-full",onClick:()=>r.push("/jobs"),children:"View My Jobs"}),!e&&(0,a.jsx)(c.$,{variant:"outline",className:"w-full",onClick:()=>r.push("/booking"),children:"Try Again"})]})]})})}return"PROJECT_CREATED"===f&&h?(0,a.jsx)("div",{className:"container max-w-lg mx-auto py-16",children:(0,a.jsxs)(d.Zp,{children:[(0,a.jsxs)(d.aR,{className:"text-center",children:[(0,a.jsxs)("div",{className:"relative mx-auto mb-4",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-emerald-500/20 rounded-full animate-ping"}),(0,a.jsx)(l.A,{className:"relative h-12 w-12 text-emerald-500"})]}),(0,a.jsx)(d.ZB,{className:"text-2xl",children:"Order Confirmed!"}),(0,a.jsxs)(d.BT,{className:"text-base",children:["Your photography session has been booked successfully.",(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"You'll receive a confirmation email shortly."})]})]}),(0,a.jsxs)(d.Wu,{className:"flex flex-col gap-3",children:[(0,a.jsx)(c.$,{className:"w-full",onClick:()=>r.push("/jobs/".concat(h)),children:"View Order Details"}),(0,a.jsx)(c.$,{variant:"outline",className:"w-full",onClick:()=>r.push("/booking"),children:"Book Another Session"})]})]})}):(0,a.jsx)("div",{className:"container max-w-lg mx-auto py-16",children:(0,a.jsxs)(d.Zp,{children:[(0,a.jsxs)(d.aR,{className:"text-center pb-4",children:[(0,a.jsx)(u.A,{className:"h-12 w-12 text-primary mx-auto mb-4 animate-spin"}),(0,a.jsx)(d.ZB,{children:"Confirming Your Order..."}),(0,a.jsx)(d.BT,{className:"text-base",children:"Please wait while we process your payment."})]}),(0,a.jsxs)(d.Wu,{className:"space-y-4",children:[(0,a.jsx)(m.k,{value:k,className:"h-2"}),(0,a.jsxs)("p",{className:"text-center text-sm text-muted-foreground",children:[k<30&&"Verifying payment...",k>=30&&k<60&&"Creating your order...",k>=60&&k<90&&"Almost done...",k>=90&&"Finalizing..."]})]})]})})}}},e=>{e.O(0,[5707,5657,8441,1255,7358],()=>e(e.s=69819)),_N_E=e.O()}]);