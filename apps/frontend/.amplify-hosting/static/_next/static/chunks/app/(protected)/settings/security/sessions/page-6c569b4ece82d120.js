(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7445],{6132:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},9644:(e,t,r)=>{Promise.resolve().then(r.bind(r,37790))},24632:(e,t,r)=>{"use strict";r.d(t,{l:()=>o});var s=r(12115),i=r(20063),n=r(65939),l=r(75701),a=r(80408);function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,i.useRouter)(),{user:o,isLoading:d,activeOrganizationId:c,memberships:u}=(0,n.A)(),{redirectTo:h,enforceRedirect:m}=t,v=(0,s.useCallback)(()=>(0,l.in)(u,c),[u,c]);return(0,s.useEffect)(()=>{if(d)return;if(!o)return void r.push("/");let t=e.map(e=>(0,a.FK)(e)),s=(0,a.FK)(o.accountType),i=u.find(e=>e.orgId===c),n=(0,l.hq)(i,s);if(!t.includes(n)){if(!1===m)return;if(h)r.push(h);else{let e=(0,l.zE)(n);r.push(e)}}},[o,d,e,r,h,m,u,c]),{user:o,organizationId:c,memberships:u,isLoading:d,getActiveOrgRole:v}}},32894:(e,t,r)=>{"use strict";r.d(t,{b:()=>o});var s=r(12115);r(47650);var i=r(32467),n=r(95155),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,i.TL)(`Primitive.${t}`),l=s.forwardRef((e,s)=>{let{asChild:i,...l}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(i?r:t,{...l,ref:s})});return l.displayName=`Primitive.${t}`,{...e,[t]:l}},{}),a=s.forwardRef((e,t)=>(0,n.jsx)(l.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null==(r=e.onMouseDown)||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));a.displayName="Label";var o=a},35299:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},36838:(e,t,r)=>{"use strict";r.d(t,{y:()=>l});var s=r(95155),i=r(35299),n=r(25016);function l(e){let{className:t,...r}=e;return(0,s.jsx)(i.A,{role:"status","aria-label":"Loading",className:(0,n.cn)("size-4 animate-spin",t),...r})}},37790:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>A});var s=r(95155),i=r(12115),n=r(24632),l=r(73344),a=r(97003),o=r(42892),d=r(18720),c=r(40521),u=r(71163),h=r(42713),m=r(90235),v=r(28014),f=r(36838),x=r(39068),y=r(79451),g=r(71847);let p=(0,g.A)("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),w=(0,g.A)("tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]);var k=r(6132);function A(){let{user:e,isLoading:t}=(0,n.l)(["COMPANY","AGENT","TECHNICIAN","EDITOR","PROJECT_MANAGER"]),{client:r}=(0,v.ho)(),{session:g}=(0,v.wV)(),[A,N]=(0,i.useState)([]),[j,b]=(0,i.useState)(!0),[C,E]=(0,i.useState)(null),[R,M]=(0,i.useState)(!1);if((0,i.useEffect)(()=>{r&&(N(r.activeSessions||[]),b(!1))},[r]),t||j)return(0,s.jsx)(o.N3,{});if(!e)return null;let P=async e=>{E(e.id);try{await e.end(),N(t=>t.filter(t=>t.id!==e.id)),d.oR.success("Session revoked successfully")}catch(e){console.error("Failed to revoke session:",e),d.oR.error("Failed to revoke session")}finally{E(null)}},F=async()=>{let e=A.filter(e=>e.id!==(null==g?void 0:g.id));if(0===e.length)return void d.oR.info("No other sessions to revoke");M(!0);try{await Promise.all(e.map(e=>e.end())),N(e=>e.filter(e=>e.id===(null==g?void 0:g.id))),d.oR.success("Revoked ".concat(e.length," session(s)"))}catch(e){console.error("Failed to revoke sessions:",e),d.oR.error("Failed to revoke some sessions")}finally{M(!1)}},S=navigator.userAgent;return(0,s.jsx)(h.U,{id:"sessions",title:"Sessions",description:"Manage your active sessions and devices.",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(m.J,{children:["Active Sessions (",A.length,")"]}),A.length>1&&(0,s.jsx)(a.$,{variant:"outline",size:"sm",onClick:F,disabled:R,children:R?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.y,{className:"h-4 w-4 mr-2"}),"Revoking..."]}):"Revoke all other sessions"})]}),0===A.length?(0,s.jsxs)("div",{className:"flex items-center gap-2 p-4 border rounded-lg text-muted-foreground",children:[(0,s.jsx)(k.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"No active sessions found"})]}):(0,s.jsx)("div",{className:"space-y-3",children:A.map(e=>{let t=e.id===(null==g?void 0:g.id),{device:r,icon:i}=function(e){if(!e)return{device:"Unknown device",icon:(0,s.jsx)(x.A,{className:"h-5 w-5"})};let t="Unknown browser";e.includes("Chrome")&&!e.includes("Edg")?t="Chrome":e.includes("Safari")&&!e.includes("Chrome")?t="Safari":e.includes("Firefox")?t="Firefox":e.includes("Edg")&&(t="Edge");let r="";e.includes("Mac OS")?r="macOS":e.includes("Windows")?r="Windows":e.includes("Linux")&&!e.includes("Android")?r="Linux":e.includes("Android")?r="Android":e.includes("iPhone")?r="iPhone":e.includes("iPad")&&(r="iPad");let i=r?"".concat(t," on ").concat(r):t,n=/Mobile|Android|iPhone/i.test(e),l=/iPad|Tablet/i.test(e),a=(0,s.jsx)(y.A,{className:"h-5 w-5"});return n&&!l?a=(0,s.jsx)(p,{className:"h-5 w-5"}):l&&(a=(0,s.jsx)(w,{className:"h-5 w-5"})),{device:i,icon:a}}(t?S:void 0);return(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg ".concat(t?"border-primary/50 bg-primary/5":""),children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"mt-0.5 text-muted-foreground",children:i}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:r}),(0,s.jsxs)(l.QX,{className:"text-xs",children:["Last active"," ",e.lastActiveAt?(0,c.m)(new Date(e.lastActiveAt),{addSuffix:!0}):"recently"," \xb7 ","Created"," ",(0,u.GP)(new Date(e.createdAt),"MMM d, yyyy")]}),t&&(0,s.jsx)("span",{className:"text-xs text-primary mt-1 block font-medium",children:"Current session"})]})]}),!t&&(0,s.jsx)(a.$,{variant:"outline",size:"sm",onClick:()=>P(e),disabled:C===e.id,children:C===e.id?(0,s.jsx)(f.y,{className:"h-4 w-4"}):"Revoke"})]},e.id)})})]})})}},39068:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},68122:(e,t,r)=>{"use strict";r.d(t,{E:()=>n});var s=r(95155),i=r(64936);function n(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"skeleton",className:(0,i.cn)("bg-accent animate-pulse rounded-md",t),...r})}},71847:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(12115);let i=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let a=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:d="",children:c,iconNode:u,...h}=e;return(0,s.createElement)("svg",{ref:t,...l,width:i,height:i,stroke:r,strokeWidth:o?24*Number(a)/Number(i):a,className:n("lucide",d),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"},...h},[...u.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),o=(e,t)=>{let r=(0,s.forwardRef)((r,l)=>{let{className:o,...d}=r;return(0,s.createElement)(a,{ref:l,iconNode:t,className:n("lucide-".concat(i(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),o),...d})});return r.displayName=i(e),r}},75701:(e,t,r)=>{"use strict";r.d(t,{hq:()=>i,in:()=>n,zE:()=>l});var s=r(80408);let i=(e,t)=>{var r;if(!e)return(0,s.FK)(t);if("PERSONAL"===((null==(r=e.organization)?void 0:r.type)||e.organizationType||""))return"COMPANY";let i=e.orgRole||e.role||(null==e?void 0:e.organizationRole)||t;return(0,s.FK)(i)},n=(e,t)=>{var r,s;let i=e.find(e=>e.orgId===t),n=null!=(s=null!=(r=null==i?void 0:i.orgRole)?r:null==i?void 0:i.role)?s:null;return n?n.toUpperCase():null},l=e=>{let t=(0,s.FK)(e);return"COMPANY"===t||"AGENT"===t||"TECHNICIAN"===t?"/dashboard":"/"}},79451:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]])},88901:(e,t,r)=>{"use strict";r.d(t,{p:()=>i});var s=r(92118);function i(e,t){let r=(0,s.a)(e,null==t?void 0:t.in),i=r.getMonth();return r.setFullYear(r.getFullYear(),i+1,0),r.setHours(23,59,59,999),r}},93014:(e,t,r)=>{"use strict";r.d(t,{U:()=>i});var s=r(45240);function i(e,t,r){let[i,n]=(0,s.x)(null==r?void 0:r.in,e,t);return 12*(i.getFullYear()-n.getFullYear())+(i.getMonth()-n.getMonth())}}},e=>{e.O(0,[547,5707,2110,1163,521,5657,5939,8698,2892,8441,1255,7358],()=>e(e.s=9644)),_N_E=e.O()}]);