(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[614],{3907:(e,s,a)=>{"use strict";a.d(s,{m:()=>r});var i=a(12115),t=a(95657),l=a(89617);function r(e){let{activeOrganizationId:s,setActiveOrganization:a}=(0,l.Q)(),[r,n]=(0,i.useState)(null),[o,d]=(0,i.useState)(!1),[c,m]=(0,i.useState)(!1),[u,x]=(0,i.useState)(null),h=e||s;(0,i.useEffect)(()=>{e&&e!==s&&(a(e),t.F.organizations.setActiveOrganization(e))},[e,s,a]);let g=(0,i.useCallback)(async()=>{if(!h)return void n(null);d(!0),x(null);try{let e=await t.F.organizations.getById(h);n(e)}catch(e){x(e instanceof Error?e:Error("Failed to load organization")),n(null)}finally{d(!1)}},[h]);return(0,i.useEffect)(()=>{g()},[g]),{organization:r,isLoading:o,isSaving:c,error:u,save:(0,i.useCallback)(async e=>{if(!h)throw Error("No active organization");m(!0),x(null);try{let s=await t.F.organizations.updateSettings(h,e);return n(s),s}catch(s){let e=s instanceof Error?s:Error("Failed to update organization settings");throw x(e),e}finally{m(!1)}},[h]),reload:(0,i.useCallback)(()=>g(),[g])}}},7235:(e,s,a)=>{"use strict";a.d(s,{d:()=>r});var i=a(95155);a(12115);var t=a(27599),l=a(25016);function r(e){let{className:s,...a}=e;return(0,i.jsx)(t.bL,{"data-slot":"switch",className:(0,l.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:(0,i.jsx)(t.zi,{"data-slot":"switch-thumb",className:(0,l.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}},30474:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>H});var i=a(95155),t=a(12115),l=a(20063),r=a(3907),n=a(89617),o=a(65939),d=a(83209),c=a(97003),m=a(33789),u=a(90235),x=a(67001),h=a(47507),g=a(7235),v=a(67812),p=a(33884),j=a(86651),b=a(35299),f=a(42196),y=a(65229),N=a(21786),C=a(21873),w=a(6191),S=a(11010),k=a(61362),A=a(91761),F=a(1524),z=a(73344),E=a(18720),J=a(51089),R=a(96324),L=a(68425),D=a(51855),I=a(80532),M=a(14724),P=a(25016),O=a(84916),T=a(48432),U=a(42892),B=a(74875),Q=a(35722);function H(){var e,s;let a=(0,l.useParams)(),A=null==a?void 0:a.orgId,{setActiveOrganization:F,activeOrganizationId:J,memberships:R}=(0,n.Q)(),{user:L,memberships:D,isLoading:I}=(0,o.A)();(0,t.useEffect)(()=>{A&&A!==J&&F(A)},[A,J,F]);let{organization:M,isLoading:T,isSaving:H,error:X,save:$,reload:q}=(0,r.m)(A),[Y,_]=(0,t.useState)(!1),[G,W]=(0,t.useState)(""),[K,Z]=(0,t.useState)(0),[ee,es]=(0,t.useState)(""),[ea,ei]=(0,t.useState)(""),[et,el]=(0,t.useState)(""),[er,en]=(0,t.useState)(null),[eo,ed]=(0,t.useState)("#3B82F6"),[ec,em]=(0,t.useState)(""),[eu,ex]=(0,t.useState)(""),[eh,eg]=(0,t.useState)(""),[ev,ep]=(0,t.useState)(""),[ej,eb]=(0,t.useState)(""),[ef,ey]=(0,t.useState)(""),[eN,eC]=(0,t.useState)(""),[ew,eS]=(0,t.useState)("America/Edmonton"),[ek,eA]=(0,t.useState)([]),[eF,ez]=(0,t.useState)(""),[eE,eJ]=(0,t.useState)(""),[eR,eL]=(0,t.useState)(""),[eD,eI]=(0,t.useState)(""),[eM,eP]=(0,t.useState)("09:00"),[eO,eT]=(0,t.useState)("17:00"),[eU,eB]=(0,t.useState)(""),[eQ,eH]=(0,t.useState)(""),[eV,eX]=(0,t.useState)("24"),[e$,eq]=(0,t.useState)("closest");(0,t.useEffect)(()=>{M&&(es(eK||M.name||""),ei(M.type||""),el(M.description||""),en(M.avatar||M.logoUrl||null),em(M.addressLine1||""),ex(M.city||""),eg(M.region||""),ep(M.postalCode||""),eb(M.countryCode||""),ey(void 0!==M.lat&&null!==M.lat?String(M.lat):""),eC(void 0!==M.lng&&null!==M.lng?String(M.lng):""),eS(M.timezone||"America/Edmonton"),ez(M.primaryEmail||""),eL(M.phone||""))},[M]);let eY={companyDetails:(0,t.useRef)(null),branding:(0,t.useRef)(null),address:(0,t.useRef)(null),serviceAreas:(0,t.useRef)(null),contact:(0,t.useRef)(null),booking:(0,t.useRef)(null),analytics:(0,t.useRef)(null)},e_=async()=>{try{let e=[ec,null==M?void 0:M.addressLine2,eu,eh,ev,ej].filter(Boolean).join(", "),s=ef?Number(ef):void 0,a=eN?Number(eN):void 0;if((!s||!a)&&e){let i=await (0,Q.ft)(e);i&&(s=i.lat,a=i.lng,ey(String(i.lat)),eC(String(i.lng)))}let i=await $({name:ee,legalName:(null==M?void 0:M.legalName)||void 0,websiteUrl:(null==M?void 0:M.websiteUrl)||void 0,primaryEmail:eF||void 0,phone:eR||void 0,addressLine1:ec||void 0,addressLine2:(null==M?void 0:M.addressLine2)||void 0,city:eu||void 0,region:eh||void 0,postalCode:ev||void 0,countryCode:ej||void 0,lat:s,lng:a,timezone:ew||void 0,type:ea||(null==M?void 0:M.type)||void 0,description:et||void 0,avatar:er||(null==M?void 0:M.logoUrl)||void 0});E.oR.success("Organization settings saved successfully"),_(!1),i&&window.dispatchEvent(new CustomEvent("organizationUpdated",{detail:{organization:i}}))}catch(e){E.oR.error(e instanceof Error?e.message:"Failed to save organization settings")}},eG=(0,t.useMemo)(()=>D.find(e=>e.orgId===A),[D,A]),eW=(null==eG||null==(e=eG.organization)?void 0:e.type)==="PERSONAL"||(null==eG||null==(s=eG.organization)?void 0:s.type)==="PERSONAL",eK=eW&&(null==L?void 0:L.name)?"".concat(L.name,"'s Workspace"):void 0,eZ=null==eG?void 0:eG.role,e0=!!eZ&&["OWNER","ADMIN"].includes((eZ||"").toUpperCase())&&!eW||eW,e2=((null==L?void 0:L.accountType)||"").toUpperCase(),e1=eW&&"AGENT"===e2,e5=eW&&"PROVIDER"===e2,e4=["branding","serviceAreas","booking","analytics"],e3=[...e4,"address"],e6=(0,t.useMemo)(()=>{let e=[{id:"companyDetails",label:"Company Details"},{id:"branding",label:"Branding"},{id:"address",label:"Address & Location"},{id:"serviceAreas",label:"Service Areas & Regions"},{id:"contact",label:"Contact & Communication"},{id:"booking",label:"Booking & Operations"},{id:"analytics",label:"Analytics"}];return e1?e.filter(e=>!e3.includes(e.id)&&"companyDetails"!==e.id):eW?e.filter(e=>!e4.includes(e.id)&&"companyDetails"!==e.id):e},[eW,e1]);(0,t.useEffect)(()=>{Z(0)},[eW,e1]);let e8=e=>e6.some(s=>s.id===e);return I||T?(0,i.jsx)(U.jw,{}):L?e0?X&&!M?/forbidden|permission/i.test(X.message||"")?(0,i.jsx)(B.O,{title:"Access Denied",description:"Only organization owners or admins can edit settings."}):(0,i.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,i.jsx)(d.Zp,{children:(0,i.jsx)(d.Wu,{className:"pt-6",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("p",{className:"text-destructive mb-4",children:X.message||"Failed to load organization settings"}),(0,i.jsx)(c.$,{onClick:()=>q(),children:"Retry"})]})})})}):(e6[K]||e6[0],(0,i.jsx)("main",{className:"container relative mx-auto",children:(0,i.jsxs)("article",{className:"flex flex-col gap-2xl md:gap-3xl px-md",children:[(0,i.jsx)("div",{className:"md:hidden w-full mt-md",children:(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(z.H2,{className:"text-2xl mb-2",children:"Organization Settings"}),(0,i.jsx)(z.QX,{className:"text-sm",children:e1?"Manage your workspace contact details.":eW?"Manage your personal workspace details.":"Manage your company profile, service areas, and operational preferences."})]}),(0,i.jsx)("div",{className:"@container w-full",children:(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(j.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,i.jsx)(m.p,{type:"text",placeholder:"Search settings…",value:G,onChange:e=>W(e.target.value),className:"pl-10"})]})})]})}),(0,i.jsxs)("div",{className:"@container flex flex-col md:flex-row gap-2xl md:gap-3xl w-full md:mt-md mb-md",children:[(0,i.jsx)("aside",{className:"hidden md:block w-64 shrink-0 md:sticky top-[calc(var(--header-h)+2rem)] h-fit",children:(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)(z.H2,{className:"text-2xl mb-2",children:"Organization Settings"}),(0,i.jsx)(z.QX,{className:"text-sm",children:e1?"Manage your workspace contact details.":eW?"Manage your personal workspace details.":"Manage your company profile, service areas, and operational preferences."})]}),(0,i.jsx)("nav",{className:"space-y-1",children:e6.map((e,s)=>(0,i.jsx)("button",{onClick:()=>{Z(s),(e=>{let s=eY[e].current;if(!s)return;let a=getComputedStyle(document.documentElement).getPropertyValue("--header-h").trim(),i=64;if(a){let e=parseFloat(a);isNaN(e)||(i=16*e)}let t=document.querySelector("header");t&&(i=t.offsetHeight);let l=s.getBoundingClientRect().top+window.pageYOffset-i-32;window.scrollTo({top:l,behavior:"smooth"})})(e.id)},className:"w-full text-left px-3 py-2 text-sm rounded-md hover:bg-muted transition-colors text-muted-foreground hover:text-foreground",children:e.label},e.id))})]})}),(0,i.jsxs)("div",{className:"@container w-full",children:[(0,i.jsx)("div",{className:"@container w-full mb-md hidden md:block",children:(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(j.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,i.jsx)(m.p,{type:"text",placeholder:"Search settings…",value:G,onChange:e=>W(e.target.value),className:"pl-10"})]})}),(0,i.jsxs)("div",{className:"@container w-full flex flex-col",children:[e1&&(0,i.jsx)("div",{className:"mb-md rounded-lg border bg-muted/40 p-4 text-sm text-muted-foreground",children:"As a real estate agent, your workspace settings are simplified. You can manage your contact information below."}),e5&&(0,i.jsx)("div",{className:"mb-md rounded-lg border bg-muted/40 p-4 text-sm text-muted-foreground",children:"Some settings (branding, service areas, booking, analytics) are only available to company organizations and are hidden for personal workspaces."}),!eW&&(0,i.jsxs)("section",{ref:eY.companyDetails,id:"company-details",className:"mb-md border-b pb-md",children:[(0,i.jsx)("div",{className:"mb-md flex items-baseline justify-between",children:(0,i.jsx)(z.H2,{className:"text-lg border-0",children:"Company Details"})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-lg",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-lg",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(u.J,{htmlFor:"company-name",children:"Company Name"}),(0,i.jsx)(m.p,{id:"company-name",value:ee,onChange:e=>{es(e.target.value),_(!0)},placeholder:"Acme Media Co."}),(0,i.jsx)(z.QX,{className:"text-xs",children:"Your organization's legal or display name"})]}),(0,i.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,i.jsx)(u.J,{htmlFor:"description",children:"Company Description"}),(0,i.jsx)(x.T,{id:"description",value:et,onChange:e=>{el(e.target.value),_(!0)},placeholder:"Describe your company, services, and expertise...",rows:4}),(0,i.jsx)(z.QX,{className:"text-xs",children:"This description may be visible to clients and partners"})]})]}),(0,i.jsx)("div",{className:"flex justify-end",children:(0,i.jsxs)(c.$,{onClick:e_,disabled:!Y||H,children:[H&&(0,i.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Details"]})})]})]}),e8("branding")&&(0,i.jsxs)("section",{ref:eY.branding,id:"branding",className:"mb-md border-b pb-md",children:[(0,i.jsx)("div",{className:"mb-md flex items-baseline justify-between",children:(0,i.jsx)(z.H2,{className:"text-lg border-0",children:"Branding"})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-lg",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-lg",children:[(0,i.jsx)(u.J,{children:"Company Logo"}),(0,i.jsxs)("div",{className:"flex items-start gap-lg",children:[(0,i.jsx)("div",{className:"shrink-0",children:er?(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsxs)(p.eu,{className:"size-24 border-2 border-border",children:[(0,i.jsx)(p.BK,{src:er}),(0,i.jsx)(p.q5,{children:(0,i.jsx)(f.A,{className:"size-12"})})]}),(0,i.jsx)(c.$,{variant:"ghost",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full",onClick:()=>{en(null),_(!0)},children:(0,i.jsx)(y.A,{className:"h-4 w-4"})})]}):(0,i.jsx)("div",{className:"size-24 border-2 border-dashed border-muted-foreground/30 rounded-lg flex items-center justify-center bg-muted/30",children:(0,i.jsx)(f.A,{className:"h-8 w-8 text-muted-foreground"})})}),(0,i.jsx)("div",{className:"flex-1 space-y-2",children:(0,i.jsxs)("div",{className:"border-2 border-dashed border-muted-foreground/30 rounded-lg p-8 text-center hover:border-primary/50 transition-colors cursor-pointer",children:[(0,i.jsx)(N.A,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),(0,i.jsx)("p",{className:"text-sm font-medium mb-1",children:"Click to upload logo"}),(0,i.jsx)("p",{className:"text-xs text-muted-foreground",children:"or drag and drop"}),(0,i.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"PNG, JPG, GIF up to 2MB"})]})})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-lg",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(u.J,{htmlFor:"brand-color",children:"Brand Accent Color (Optional)"}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)(m.p,{id:"brand-color",type:"color",value:eo,onChange:e=>{ed(e.target.value),_(!0)},className:"h-10 w-20 p-1 cursor-pointer"}),(0,i.jsx)(m.p,{value:eo,onChange:e=>{ed(e.target.value),_(!0)},placeholder:"#3B82F6",className:"flex-1"})]}),(0,i.jsx)(z.QX,{className:"text-xs",children:"Used for accents and highlights throughout the platform"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(u.J,{children:"Color Preview"}),(0,i.jsx)("div",{className:"h-10 rounded-md border",style:{backgroundColor:eo}})]})]})]})]}),(0,i.jsxs)("section",{ref:eY.address,id:"address",className:"mb-md border-b pb-md",children:[(0,i.jsx)("div",{className:"mb-md flex items-baseline justify-between",children:(0,i.jsx)(z.H2,{className:"text-lg border-0",children:"Address & Location"})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-lg",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-lg",children:[(0,i.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,i.jsx)(u.J,{htmlFor:"street-address",children:"Address Line 1"}),(0,i.jsx)(m.p,{id:"street-address",value:ec,onChange:e=>{em(e.target.value),_(!0)},placeholder:"123 Main Street"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(u.J,{htmlFor:"city",children:"City"}),(0,i.jsx)(m.p,{id:"city",value:eu,onChange:e=>{ex(e.target.value),_(!0)},placeholder:"Calgary"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(u.J,{htmlFor:"state-province",children:"State / Province / Region"}),(0,i.jsx)(m.p,{id:"state-province",value:eh,onChange:e=>{eg(e.target.value),_(!0)},placeholder:"Alberta"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(u.J,{htmlFor:"postal-code",children:"Postal Code"}),(0,i.jsx)(m.p,{id:"postal-code",value:ev,onChange:e=>{ep(e.target.value),_(!0)},placeholder:"T2P 1J4"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(u.J,{htmlFor:"country",children:"Country"}),(0,i.jsxs)(h.l6,{value:ej,onValueChange:e=>{eb(e),_(!0)},children:[(0,i.jsx)(h.bq,{id:"country",children:(0,i.jsx)(h.yv,{placeholder:"Select country"})}),(0,i.jsxs)(h.gC,{children:[(0,i.jsx)(h.eb,{value:"CA",children:"Canada"}),(0,i.jsx)(h.eb,{value:"US",children:"United States"}),(0,i.jsx)(h.eb,{value:"GB",children:"United Kingdom"}),(0,i.jsx)(h.eb,{value:"AU",children:"Australia"})]})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(u.J,{htmlFor:"timezone",children:"Timezone"}),(0,i.jsxs)(h.l6,{value:ew,onValueChange:e=>{eS(e),_(!0)},children:[(0,i.jsx)(h.bq,{id:"timezone",children:(0,i.jsx)(h.yv,{placeholder:"Select timezone"})}),(0,i.jsxs)(h.gC,{children:[(0,i.jsx)(h.eb,{value:"America/Edmonton",children:"America/Edmonton (MST)"}),(0,i.jsx)(h.eb,{value:"America/Toronto",children:"America/Toronto (EST)"}),(0,i.jsx)(h.eb,{value:"America/Vancouver",children:"America/Vancouver (PST)"}),(0,i.jsx)(h.eb,{value:"America/New_York",children:"America/New_York (EST)"})]})]})]})]}),(0,i.jsxs)("div",{className:"mt-6",children:[(0,i.jsx)(u.J,{children:"Location Preview"}),(0,i.jsx)("div",{className:"mt-2 h-48 rounded-lg border bg-muted/30 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center text-muted-foreground",children:[(0,i.jsx)(C.A,{className:"h-8 w-8 mx-auto mb-2"}),(0,i.jsx)("p",{className:"text-sm",children:"Map preview will appear here"}),(0,i.jsx)("p",{className:"text-xs",children:"Once address is saved"})]})})]})]})]}),e8("serviceAreas")&&(0,i.jsxs)("section",{ref:eY.serviceAreas,id:"service-areas",className:"mb-md border-b pb-md",children:[(0,i.jsx)("div",{className:"mb-md flex items-baseline justify-between",children:(0,i.jsx)(z.H2,{className:"text-lg border-0",children:"Service Areas & Regions"})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-lg",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(z.QX,{className:"text-sm",children:"Used to set map defaults and booking rules."}),0===ek.length?(0,i.jsxs)("div",{className:"mt-2 py-12 text-center border-2 border-dashed rounded-lg",children:[(0,i.jsx)(C.A,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:"No service areas defined yet"}),(0,i.jsxs)(c.$,{size:"sm",variant:"outline",className:"mt-4",onClick:()=>E.oR.info("Add service area dialog"),children:[(0,i.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Add Your First Service Area"]})]}):(0,i.jsx)("div",{className:"space-y-3",children:ek.map(e=>(0,i.jsxs)("div",{className:"flex items-center gap-4 p-4 border rounded-lg",children:[(0,i.jsx)(v.E,{variant:e.active?"default":"secondary",children:e.type}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("p",{className:"font-medium",children:e.name}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:e.value})]}),(0,i.jsx)(v.E,{variant:e.active?"default":"outline",children:e.active?"Active":"Inactive"}),(0,i.jsx)(c.$,{variant:"ghost",size:"icon",onClick:()=>E.oR.info("Edit service area"),children:(0,i.jsx)(S.A,{className:"h-4 w-4"})}),(0,i.jsx)(c.$,{variant:"ghost",size:"icon",onClick:()=>{eA(ek.filter(s=>s.id!==e.id)),_(!0)},children:(0,i.jsx)(y.A,{className:"h-4 w-4"})})]},e.id))})]}),(0,i.jsxs)("div",{className:"mt-6",children:[(0,i.jsx)(u.J,{children:"Service Coverage Map"}),(0,i.jsx)("div",{className:"mt-2 h-48 rounded-lg border bg-muted/30 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center text-muted-foreground",children:[(0,i.jsx)(C.A,{className:"h-8 w-8 mx-auto mb-2"}),(0,i.jsx)("p",{className:"text-sm",children:"Service area visualization"}),(0,i.jsx)("p",{className:"text-xs",children:"Will display when areas are defined"})]})})]})]})]}),(0,i.jsxs)("section",{ref:eY.contact,id:"contact",className:"mb-md border-b pb-md",children:[(0,i.jsx)("div",{className:"mb-md flex items-baseline justify-between",children:(0,i.jsx)(z.H2,{className:"text-lg border-0",children:e1?"Contact Information":"Contact & Communication"})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-lg",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-lg",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(u.J,{htmlFor:"primary-email",children:e1?"Email Address":"Primary Email"}),(0,i.jsx)(m.p,{id:"primary-email",type:"email",value:eF,onChange:e=>{ez(e.target.value),_(!0)},placeholder:e1?"you@email.com":"operations@company.com"}),(0,i.jsx)(z.QX,{className:"text-xs",children:e1?"Your contact email for order updates":"Main contact email for business operations"})]}),!e1&&(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(u.J,{htmlFor:"support-email",children:"Support Email"}),(0,i.jsx)(m.p,{id:"support-email",type:"email",value:eE,onChange:e=>{eJ(e.target.value),_(!0)},placeholder:"support@company.com"}),(0,i.jsx)(z.QX,{className:"text-xs",children:"Customer support and inquiries"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(u.J,{htmlFor:"phone",children:"Phone Number"}),(0,i.jsx)(m.p,{id:"phone",type:"tel",value:eR,onChange:e=>{eL(e.target.value),_(!0)},placeholder:"+1 (555) 123-4567"}),e1&&(0,i.jsx)(z.QX,{className:"text-xs",children:"Your contact phone for urgent updates"})]}),!e1&&(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(u.J,{htmlFor:"sms",children:"SMS Contact Number (Optional)"}),(0,i.jsx)(m.p,{id:"sms",type:"tel",value:eD,onChange:e=>{eI(e.target.value),_(!0)},placeholder:"+1 (555) 123-4567"})]})]}),!e1&&(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)(u.J,{children:"Notification Preferences"}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(u.J,{htmlFor:"email-notifications",children:"Email Notifications"}),(0,i.jsx)(z.QX,{className:"text-xs block",children:"Receive updates via email"})]}),(0,i.jsx)(g.d,{id:"email-notifications"})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(u.J,{htmlFor:"sms-notifications",children:"SMS Notifications"}),(0,i.jsx)(z.QX,{className:"text-xs block",children:"Receive urgent updates via SMS"})]}),(0,i.jsx)(g.d,{id:"sms-notifications"})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(u.J,{htmlFor:"job-assignment-alerts",children:"Job Assignment Alerts"}),(0,i.jsx)(z.QX,{className:"text-xs block",children:"Notify when jobs are assigned"})]}),(0,i.jsx)(g.d,{id:"job-assignment-alerts"})]})]})]}),e1&&(0,i.jsx)("div",{className:"flex justify-end",children:(0,i.jsxs)(c.$,{onClick:e_,disabled:!Y||H,children:[H&&(0,i.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Contact Info"]})})]})]}),e8("booking")&&(0,i.jsxs)("section",{ref:eY.booking,id:"booking",className:"mb-md border-b pb-md",children:[(0,i.jsx)("div",{className:"mb-md flex items-baseline justify-between",children:(0,i.jsx)(z.H2,{className:"text-lg border-0",children:"Booking & Operations"})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-lg",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-lg",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(u.J,{htmlFor:"booking-start",children:"Booking Hours Start"}),(0,i.jsx)(m.p,{id:"booking-start",type:"time",value:eM,onChange:e=>{eP(e.target.value),_(!0)}})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(u.J,{htmlFor:"booking-end",children:"Booking Hours End"}),(0,i.jsx)(m.p,{id:"booking-end",type:"time",value:eO,onChange:e=>{eT(e.target.value),_(!0)}})]}),(0,i.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,i.jsx)(u.J,{htmlFor:"capacity-notes",children:"Default Capacity Notes"}),(0,i.jsx)(x.T,{id:"capacity-notes",value:eU,onChange:e=>{eB(e.target.value),_(!0)},placeholder:"Describe any capacity limits or requirements...",rows:3})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(u.J,{htmlFor:"travel-radius",children:"Travel Radius Default (km)"}),(0,i.jsx)(m.p,{id:"travel-radius",type:"number",value:eQ,onChange:e=>{eH(e.target.value),_(!0)},placeholder:"50"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(u.J,{htmlFor:"cancellation-window",children:"Job Cancellation Window (hours)"}),(0,i.jsxs)(h.l6,{value:eV,onValueChange:e=>{eX(e),_(!0)},children:[(0,i.jsx)(h.bq,{id:"cancellation-window",children:(0,i.jsx)(h.yv,{})}),(0,i.jsxs)(h.gC,{children:[(0,i.jsx)(h.eb,{value:"1",children:"1 hour"}),(0,i.jsx)(h.eb,{value:"6",children:"6 hours"}),(0,i.jsx)(h.eb,{value:"12",children:"12 hours"}),(0,i.jsx)(h.eb,{value:"24",children:"24 hours"}),(0,i.jsx)(h.eb,{value:"48",children:"48 hours"})]})]})]}),(0,i.jsxs)("div",{className:"space-y-2 md:col-span-1",children:[(0,i.jsx)(u.J,{htmlFor:"assignment-strategy",children:"Assignment Strategy"}),(0,i.jsxs)(h.l6,{value:e$,onValueChange:e=>{eq(e),_(!0)},children:[(0,i.jsx)(h.bq,{id:"assignment-strategy",children:(0,i.jsx)(h.yv,{})}),(0,i.jsxs)(h.gC,{children:[(0,i.jsx)(h.eb,{value:"closest",children:"Closest Technician"}),(0,i.jsx)(h.eb,{value:"manual",children:"Manual Assignment Only"}),(0,i.jsx)(h.eb,{value:"round_robin",children:"Round Robin"}),(0,i.jsx)(h.eb,{value:"availability",children:"Best Availability Match"})]})]})]})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)(u.J,{children:"On-site Requirements"}),(0,i.jsx)("div",{className:"space-y-2",children:["Lockbox","Pets Secured","Access Code Required","Parking Available"].map(e=>(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(O.S,{id:e}),(0,i.jsx)(u.J,{htmlFor:e,className:"text-sm font-normal cursor-pointer",children:e})]},e))})]})]})]}),e8("analytics")&&(0,i.jsxs)("section",{ref:eY.analytics,id:"analytics",className:"mb-md",children:[(0,i.jsx)("div",{className:"mb-md flex items-baseline justify-between",children:(0,i.jsx)(z.H2,{className:"text-lg border-0",children:"Analytics"})}),P.e?(0,i.jsx)(V,{}):(0,i.jsx)("div",{className:"py-12 text-center border-2 border-dashed rounded-lg",children:(0,i.jsx)(z.QX,{className:"text-sm",children:"Analytics data will appear here when available"})})]})]})]})]}),Y&&(0,i.jsx)("div",{className:"fixed bottom-dock-h md:bottom-0! left-0 right-0 border-t bg-background/95 backdrop-blur supports-backdrop-filter:bg-background/60 z-50",children:(0,i.jsx)("div",{className:"container mx-auto px-md py-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between max-w-5xl mx-auto",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,i.jsx)(k.A,{className:"h-4 w-4"}),(0,i.jsx)("span",{children:"You have unsaved changes"})]}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)(c.$,{variant:"ghost",onClick:()=>{M&&(es(eK||M.name||""),ei(M.type||""),el(M.description||""),en(M.avatar||M.logoUrl||null),em(M.addressLine1||""),ex(M.city||""),eg(M.region||""),ep(M.postalCode||""),eb(M.countryCode||""),ey(void 0!==M.lat&&null!==M.lat?String(M.lat):""),eC(void 0!==M.lng&&null!==M.lng?String(M.lng):""),eS(M.timezone||"America/Edmonton"),ez(M.primaryEmail||""),eL(M.phone||"")),E.oR.info("Changes discarded"),_(!1)},disabled:H,children:"Cancel"}),(0,i.jsxs)(c.$,{onClick:e_,disabled:H,children:[H&&(0,i.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]})]})})})]})})):(0,i.jsx)(B.O,{title:"Access Denied",description:"You do not have permission to view organization settings. Please contact your administrator."}):null}function V(){let e=P.e?[{month:"Jan 2025",revenue:71500},{month:"Feb 2025",revenue:69200},{month:"Mar 2025",revenue:75e3},{month:"Apr 2025",revenue:82e3},{month:"May 2025",revenue:87e3},{month:"Jun 2025",revenue:105e3},{month:"Jul 2025",revenue:115400},{month:"Aug 2025",revenue:112500},{month:"Sep 2025",revenue:99500},{month:"Oct 2025",revenue:91e3},{month:"Nov 2025",revenue:86e3}]:[],s=P.e?[{range:"0-250",count:13},{range:"250-500",count:34},{range:"500-750",count:86},{range:"750-1000",count:130},{range:"1000-1250",count:75},{range:"1250-1500",count:24},{range:"1500-1750",count:9},{range:"1750-2000",count:3},{range:"2000+",count:1}]:[],a=P.e?e.reduce((e,s)=>e+s.revenue,0):0,t=800.85*!!P.e,l=420.69*!!P.e,r=P.e?(t-l)/l*100:0;return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsx)(T.CN,{icon:A.A,value:a.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),valuePrefix:"$",label:"Revenue",iconBgColor:"bg-accent",iconColor:"text-primary",description:"Note: date filtering on these metrics filter based on the completion date of payments in UTC time."}),(0,i.jsx)(T.CN,{icon:F.A,value:t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),label:"Average Order Value",iconBgColor:"bg-accent",iconColor:"text-primary",description:"Note: date filtering on these metrics filter based on the creation date of orders in UTC time.",trendPercentage:Number(r.toFixed(2)),valuePrefix:"$",previousValue:Number(l.toFixed(2))})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsx)(T.CN,{type:"chart",icon:A.A,value:a.toLocaleString("en-US",{minimumFractionDigits:1,maximumFractionDigits:1}),label:"Revenue Per Month",chartConfig:{revenue:{label:"Revenue",color:"hsl(142, 76%, 36%)"}},chart:(0,i.jsxs)(R.E,{accessibilityLayer:!0,data:e,children:[(0,i.jsx)(L.d,{vertical:!1}),(0,i.jsx)(D.W,{dataKey:"month",tickLine:!1,tickMargin:10,axisLine:!1,tickFormatter:e=>e.slice(0,3)}),(0,i.jsx)(J.II,{cursor:!1,content:(0,i.jsx)(J.Nt,{}),formatter:e=>null!=e?"$".concat(Number(e).toLocaleString()):""}),(0,i.jsx)(I.yP,{dataKey:"revenue",fill:"var(--color-revenue)",radius:4})]})}),(0,i.jsx)(T.CN,{type:"chart",icon:F.A,value:t.toFixed(2),label:"Order Total Distribution",chartConfig:{count:{label:"Count",color:"hsl(217, 91%, 60%)"}},chart:(0,i.jsxs)(R.E,{data:s,children:[(0,i.jsx)(L.d,{strokeDasharray:"3 3"}),(0,i.jsx)(D.W,{dataKey:"range",tickLine:!1,tickMargin:10,axisLine:!1,tickFormatter:e=>e.slice(0,3)}),(0,i.jsx)(J.II,{cursor:!1,content:(0,i.jsx)(J.Nt,{}),formatter:e=>null!=e?Number(e).toLocaleString():""}),(0,i.jsx)(I.yP,{dataKey:"count",fill:"var(--color-count)",radius:4,children:(0,i.jsx)(M.Ze,{position:"top",offset:12,fill:"var(--color-count)",fontSize:12})})]})})]})]})}},35722:(e,s,a)=>{"use strict";a.d(s,{NV:()=>o,ft:()=>r});var i=a(95657);let t={lat:51.0447,lng:-114.0719},l=new Map;async function r(e){let s="pk.eyJ1IjoiZHVyb2RwIiwiYSI6ImNtaHplcW53cDA4dHQycnB6dnhqeGtveXgifQ.6GR-s3V7vfGRsoVlhSTFhg";if(!s||!e)return null;try{var a,i;let t="https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(e),".json?access_token=").concat(s,"&limit=1"),l=await fetch(t);if(!l.ok)return null;let r=await l.json(),n=null==r||null==(a=r.features)?void 0:a[0];if((null==n||null==(i=n.center)?void 0:i.length)===2){let[e,s]=n.center;return{lat:s,lng:e}}}catch(e){console.error("Failed to geocode address",e)}return null}async function n(e){if(!e.user)return null;let s=e.user,a=e.personalOrg,i=a?[a.addressLine1,a.addressLine2,a.city,a.region,a.postalCode,a.countryCode].filter(Boolean).join(", "):"",n=(null==a?void 0:a.lat)!==void 0&&(null==a?void 0:a.lng)!==void 0?{lat:a.lat,lng:a.lng}:t;if(i){let e=l.get(i);if(e)n=e;else{let e=await r(i);e&&(n=e,l.set(i,e))}}return{id:s.id,userId:s.id,orgMemberId:e.id,orgId:e.orgId,memberId:e.id,role:e.role||e.orgRole||"TECHNICIAN",name:s.name||"Unnamed",email:s.email||"",phone:(null==a?void 0:a.phone)||"",organizationId:s.organizationId||void 0,isIndependent:!0,companyId:void 0,companyName:void 0,homeLocation:{lat:n.lat,lng:n.lng,address:{street:(null==a?void 0:a.addressLine1)||"",city:(null==a?void 0:a.city)||"",stateProvince:(null==a?void 0:a.region)||"",country:(null==a?void 0:a.countryCode)||"",postalCode:(null==a?void 0:a.postalCode)||""}},availability:[],reliability:{totalJobs:0,noShows:0,lateDeliveries:0,onTimeRate:0,averageDeliveryTime:0},skills:{residential:0,commercial:0,aerial:0,twilight:0,video:0},rating:{overall:0,count:0,recent:[]},preferredClients:[],status:"active",createdAt:e.createdAt?new Date(e.createdAt):new Date,avatar:s.avatarUrl,bio:"",services:{photography:!0,video:!1,aerial:!1,floorplan:!1,measurement:!1,twilight:!1,editing:!1,virtualStaging:!1},portfolio:[],certifications:[]}}async function o(){let e=await i.F.organizations.listMembers();return e&&0!==e.length?(await Promise.all(e.map(e=>n(e)))).filter(e=>!!e):[]}},83495:(e,s,a)=>{Promise.resolve().then(a.bind(a,30474))},89617:(e,s,a)=>{"use strict";a.d(s,{Q:()=>l});var i=a(12115),t=a(65939);function l(){let{memberships:e,activeOrganizationId:s,switchOrganization:a}=(0,t.A)(),l=(0,i.useMemo)(()=>s&&e.find(e=>e.orgId===s)||null,[s,e]);return{memberships:e,activeOrganizationId:s,activeMembership:l,setActiveOrganization:a}}}},e=>{e.O(0,[547,5707,2110,8234,2619,4001,3409,1204,9360,550,4419,6362,7331,5657,5939,4802,2892,7909,8441,1255,7358],()=>e(e.s=83495)),_N_E=e.O()}]);