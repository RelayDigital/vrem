(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2305,2892,5311],{6180:(e,t,n)=>{"use strict";n.d(t,{k:()=>r});var i=n(59318),s=n(4168);function r(e,t){var n;let{start:r,end:a}=(0,i.P)(null==t?void 0:t.in,e),l=+r>+a,o=l?+r:+a,d=l?a:r;d.setHours(0,0,0,0);let c=null!=(n=null==t?void 0:t.step)?n:1;if(!c)return[];c<0&&(c=-c,l=!l);let u=[];for(;+d<=o;)u.push((0,s.w)(r,d)),d.setDate(d.getDate()+c),d.setHours(0,0,0,0);return l?u.reverse():u}},6226:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>$});var i=n(95155),s=n(12115),r=n(20063),a=n(24632),l=n(83209),o=n(95664),d=n(91169),c=n(26983),u=n(91761),p=n(61362),m=n(1524),v=n(55850),h=n(73344);function g(e){let{metrics:t}=e,n=Math.round(100*t.technicians.utilization),s=Math.round(100*t.performance.onTimeRate);return(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,i.jsxs)(l.Zp,{variant:"muted",children:[(0,i.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,i.jsx)(l.ZB,{className:"text-sm",children:"Total Jobs (Week)"}),(0,i.jsx)(o.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,i.jsxs)(l.Wu,{children:[(0,i.jsx)("div",{className:"text-2xl",children:t.jobs.total}),(0,i.jsxs)("div",{className:"flex gap-3 mt-2 text-xs text-muted-foreground",children:[(0,i.jsxs)("span",{children:["Pending: ",t.jobs.pending]}),(0,i.jsxs)("span",{children:["Assigned: ",t.jobs.assigned]}),(0,i.jsxs)("span",{children:["Done: ",t.jobs.completed]})]})]})]}),(0,i.jsxs)(l.Zp,{variant:"muted",children:[(0,i.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,i.jsx)(l.ZB,{className:"text-sm",children:"Technician Utilization"}),(0,i.jsx)(d.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,i.jsxs)(l.Wu,{children:[(0,i.jsxs)("div",{className:"text-2xl",children:[n,"%"]}),(0,i.jsx)(v.k,{value:n,className:"mt-2"}),(0,i.jsxs)(h.P,{className:"text-xs text-muted-foreground mt-2",children:[t.technicians.available,"/",t.technicians.active," ","available"]})]})]}),(0,i.jsxs)(l.Zp,{variant:"muted",children:[(0,i.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,i.jsx)(l.ZB,{className:"text-sm",children:"Avg Delivery Time"}),(0,i.jsx)(c.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,i.jsxs)(l.Wu,{children:[(0,i.jsxs)("div",{className:"text-2xl",children:[t.performance.averageDeliveryTime,"h"]}),(0,i.jsxs)(h.P,{className:"text-xs text-muted-foreground mt-2",children:["Assignment: ",t.performance.averageAssignmentTime,"m"]})]})]}),(0,i.jsxs)(l.Zp,{variant:"muted",children:[(0,i.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,i.jsx)(l.ZB,{className:"text-sm",children:"Revenue (Week)"}),(0,i.jsx)(u.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,i.jsxs)(l.Wu,{children:[(0,i.jsxs)("div",{className:"text-2xl",children:["$",(t.revenue.total/1e3).toFixed(1),"k"]}),(0,i.jsxs)(h.P,{className:"text-xs text-muted-foreground mt-2",children:["$",t.revenue.perJob,"/job avg"]})]})]}),(0,i.jsxs)(l.Zp,{className:"md:col-span-2",variant:"muted",children:[(0,i.jsx)(l.aR,{children:(0,i.jsx)(l.ZB,{className:"text-sm",children:"On-Time Delivery Rate"})}),(0,i.jsxs)(l.Wu,{children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("div",{className:"text-3xl",children:[s,"%"]}),(0,i.jsx)(v.k,{value:s,className:"mt-2"})]}),(0,i.jsx)(p.A,{className:"h-8 w-8 text-emerald-600"})]}),(0,i.jsxs)(h.P,{className:"text-xs text-muted-foreground mt-3",children:[Math.round(t.jobs.completed*t.performance.onTimeRate)," ","of ",t.jobs.completed," jobs delivered on time"]})]})]}),(0,i.jsxs)(l.Zp,{className:"md:col-span-2",variant:"muted",children:[(0,i.jsx)(l.aR,{children:(0,i.jsx)(l.ZB,{className:"text-sm",children:"Client Approval Rate"})}),(0,i.jsxs)(l.Wu,{children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("div",{className:"text-3xl",children:[Math.round(100*t.performance.clientSatisfaction),"%"]}),(0,i.jsx)(v.k,{value:100*t.performance.clientSatisfaction,className:"mt-2"})]}),(0,i.jsx)(m.A,{className:"h-8 w-8 text-blue-600"})]}),(0,i.jsxs)(h.P,{className:"text-xs text-muted-foreground mt-3",children:[Math.round(t.jobs.completed*t.performance.clientSatisfaction)," of ",t.jobs.completed," jobs approved by clients"]})]})]})]})}var x=n(62816),f=n(86784),b=n(7415),w=n(97003),j=n(81130),y=n(29633),N=n(94876),C=n(12725),T=n(22623);function E(e){let{jobs:t,technicians:n,metrics:r,selectedJob:a,onViewRankings:l,onSelectJob:o,onNavigateToJobsView:d,onNavigateToMapView:c,onNavigateToCalendarView:u,onNavigateToJobInProjectManagement:p,onJobAssign:m,onJobClick:v}=e,E=t.filter(e=>"assigned"===e.status),[A]=(0,s.useState)(new Date),k=E.slice(0,4),I=(0,s.useMemo)(()=>t.map(e=>(0,C.Ve)(e)),[t]),M=null!=n?n:[],D=(0,s.useMemo)(()=>M.filter(e=>{if(!(null==e?void 0:e.homeLocation)||"number"!=typeof e.homeLocation.lat||"number"!=typeof e.homeLocation.lng)return!1;let t=e.homeLocation.address||{};return[t.street,t.city,t.stateProvince,t.postalCode,t.country].some(Boolean)}),[M]),S=(0,s.useMemo)(()=>(0,T.q)(D),[D]);return(0,i.jsx)("main",{className:"container relative mx-auto",children:(0,i.jsxs)("article",{className:"flex flex-col gap-2xl md:gap-3xl px-md","data-tour":"dashboard-article",children:[(0,i.jsx)("div",{className:"@container w-full mt-md","data-tour":"dashboard-metrics",children:(0,i.jsx)(g,{metrics:r})}),(0,i.jsxs)("div",{className:"@container w-full","data-tour":"dashboard-calendar",children:[(0,i.jsxs)("div",{className:"mb-md flex items-baseline justify-between",children:[(0,i.jsx)(h.H2,{className:"text-lg border-0",children:"Schedule"}),(0,i.jsx)(w.$,{variant:"flat",className:"px-0",onClick:u,children:"View calendar"})]}),(0,i.jsx)("div",{className:"border rounded-md overflow-hidden",children:(0,i.jsx)(b.c,{currentDate:A,events:I,technicians:D,technicianColors:S,onEventClick:e=>{if(e.jobId&&v){let n=t.find(t=>t.id===e.jobId);n&&v(n)}},onDayClick:e=>{u&&u()},compact:!0})})]}),(0,i.jsxs)("div",{className:"@container w-full","data-tour":"dashboard-map",children:[(0,i.jsxs)("div",{className:"mb-md flex items-baseline justify-between",children:[(0,i.jsx)(h.H2,{className:"text-lg border-0",children:"Live Job Map"}),(0,i.jsx)(w.$,{variant:"flat",className:"px-0",onClick:c,children:"View map"})]}),(0,i.jsx)(f.n,{jobs:t,providers:M,selectedJob:a,onSelectJob:o,onNavigateToJobInProjectManagement:p,onJobAssign:m,isDispatcherView:!0})]}),(0,i.jsxs)("div",{className:"@container w-full mb-md","data-tour":"dashboard-jobs",children:[(0,i.jsxs)("div",{className:"mb-md flex items-baseline justify-between",children:[(0,i.jsx)(h.H2,{className:"text-lg",children:"Active Jobs"}),E.length>0&&d&&(0,i.jsx)(w.$,{variant:"flat",className:"px-0",onClick:d,children:"View all"})]}),E.length>0?(0,i.jsx)(j.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-4",children:k.map(e=>{let t=n.find(t=>t.id===e.assignedTechnicianId);return(0,i.jsx)(x.oe,{job:e,technician:t,onViewRankings:"pending"===e.status?()=>l(e):void 0,onClick:v?()=>v(e):void 0},e.id)})})}):(0,i.jsx)(N.pp,{icon:y.A,title:"No Active Jobs",description:"There are currently no active jobs assigned to technicians.",action:d?{label:"View All Jobs",onClick:d}:void 0})]})]})})}var A=n(24960),k=n(43285),I=n(37119),M=n(61771),D=n(42892),S=n(55678),P=n(69802),J=n(40235),_=n(95657),L=n(32559),R=n(6132),O=n(35722),B=n(80408);function $(){var e,t;let n=(0,r.useRouter)(),{user:l,isLoading:o,organizationId:d,memberships:c}=(0,a.l)(["COMPANY","AGENT","TECHNICIAN","EDITOR","PROJECT_MANAGER"]),u=(0,P.I)(),p=(0,S.w)(),m=(0,J.$)(),v=(0,s.useRef)(new Set),[h,g]=(0,s.useState)([]),[f,b]=(0,s.useState)(!1),[j,y]=(0,s.useState)(null),[N,C]=(0,s.useState)(null),T=(0,s.useMemo)(()=>(0,B.EL)(l,c,d),[l,c,d]),$=c.find(e=>e.orgId===d),H="PERSONAL"===(null==$||null==(e=$.organization)?void 0:e.type)||(null==j?void 0:j.type)==="PERSONAL"||(null==$?void 0:$.organizationType)==="PERSONAL";(0,s.useEffect)(()=>{let e=!1,t=async()=>{if(!d)return void y(null);try{let t=await _.F.organizations.getById(d);e||y(t)}catch(t){e||(y(null),console.error("Failed to load organization for dashboard",t))}};return l?t():y(null),()=>{e=!0}},[d,l]);let U=null==j?void 0:j.lat,F=null==j?void 0:j.lng,z="string"==typeof U?parseFloat(U):U,W="string"==typeof F?parseFloat(F):F,V="number"==typeof z&&!Number.isNaN(z)&&"number"==typeof W&&!Number.isNaN(W);(0,s.useEffect)(()=>{(async()=>{if(V||!j)return;let e=[j.addressLine1,j.addressLine2,j.city,j.region,j.postalCode,j.countryCode].filter(Boolean);if(!e.length)return;let t=e.join(", ");try{let e=await (0,O.ft)(t);e?C(e):console.warn("Geocoding returned no results for org address")}catch(e){console.error("Failed to geocode org address for dashboard:",e)}})()},[j,V]);let K=(0,s.useMemo)(()=>l&&H&&(V||N)?{id:l.id,userId:l.id,orgMemberId:(null==$?void 0:$.id)||l.id,orgId:d||(null==$?void 0:$.orgId)||(null==j?void 0:j.id)||l.organizationId||"",memberId:null==$?void 0:$.id,organizationId:null==j?void 0:j.id,role:"TECHNICIAN",name:l.name||"Me",email:l.email||"",phone:(null==j?void 0:j.phone)||"",isIndependent:!0,companyId:void 0,companyName:void 0,homeLocation:{lat:V?z:null==N?void 0:N.lat,lng:V?W:null==N?void 0:N.lng,address:{street:(null==j?void 0:j.addressLine1)||"",city:(null==j?void 0:j.city)||"",stateProvince:(null==j?void 0:j.region)||"",country:(null==j?void 0:j.countryCode)||"",postalCode:(null==j?void 0:j.postalCode)||""}},availability:[],reliability:{totalJobs:0,noShows:0,lateDeliveries:0,onTimeRate:0,averageDeliveryTime:0},skills:{residential:0,commercial:0,aerial:0,twilight:0,video:0},rating:{overall:0,count:0,recent:[]},preferredClients:[],status:"active",createdAt:new Date,avatar:l.avatarUrl,bio:"",services:{photography:!0,video:!1,aerial:!1,floorplan:!1,measurement:!1,twilight:!1,editing:!1,virtualStaging:!1},portfolio:[],certifications:[]}:null,[l,H,V,N,$,d,j,z,W]),Z=((null==$?void 0:$.role)||(null==$?void 0:$.orgRole)||"").toUpperCase(),G=(0,s.useMemo)(()=>"EDITOR"===Z?[]:h.filter(e=>"TECHNICIAN"===e.role),[h,Z]),q=(0,s.useMemo)(()=>l&&h.find(e=>e.userId===l.id)||null,[h,l]),Y="AGENT"===((null==l?void 0:l.accountType)||"").toUpperCase(),X=Y||["OWNER","ADMIN","PROJECT_MANAGER"].includes(Z),Q=(0,s.useMemo)(()=>l?"EDITOR"===Z?p.jobs.filter(e=>e.editorId===l.id):p.jobs.filter(e=>e.assignedTechnicianId===l.id):[],[p.jobs,l,Z]),{metrics:ee,stats:et,role:en,isLoading:ei,error:es,refetch:er}=function(e){let[t,n]=(0,s.useState)(null),[i,r]=(0,s.useState)(null),[a,l]=(0,s.useState)(null),[o,d]=(0,s.useState)(e),[c,u]=(0,s.useState)(null),p=(0,s.useCallback)(async()=>{if(!e){n(null),r(null),l(null),d(!1),u(null);return}d(!0),u(null);try{let e=await _.F.dashboard.get();n(e.metrics),r(e.stats||null),l(e.role||null)}catch(e){u(e instanceof Error?e:Error("Failed to load dashboard metrics"))}finally{d(!1)}},[e]);return(0,s.useEffect)(()=>{p()},[p]),{metrics:t,stats:i,role:a,isLoading:o,error:c,refetch:p}}(!!l),ea=(0,s.useMemo)(()=>{var e,t;if(et&&"upcomingJobs"in et)return{upcoming:et.upcomingJobs,completed:et.completedJobs,rating:null!=(e=null==q?void 0:q.rating.overall)?e:0,onTimeRate:(100*et.onTimeRate).toFixed(0)};let n=Q.filter(e=>"assigned"===e.status||"pending"===e.status),i=Q.filter(e=>"delivered"===e.status);return{upcoming:n.length,completed:i.length,rating:null!=(t=null==q?void 0:q.rating.overall)?t:0,onTimeRate:(100*((null==q?void 0:q.reliability.onTimeRate)||0)).toFixed(0)}},[Q,q,et]);if((0,s.useEffect)(()=>{let e=e=>{let t=p.getJobById(e.detail.id);t&&(p.selectJob(t),p.openTaskView(t))};return window.addEventListener("openJobTaskView",e),()=>{window.removeEventListener("openJobTaskView",e)}},[p]),(0,s.useEffect)(()=>{if(p.selectedJob){var e;let t=p.selectedJob.id;if(v.current.has(t))return;v.current.add(t);let n=null==(e=p.selectedJob)?void 0:e.organizationId;Y||u.fetchMessages(t,"TEAM",n),X&&u.fetchMessages(t,"CUSTOMER",n)}},[null==(t=p.selectedJob)?void 0:t.id,X,Y]),(0,s.useEffect)(()=>{let e=!1;return(async()=>{if(!l||Y){g([]),b(!1);return}b(!0);try{var t,n,i;let s=await (0,O.NV)(),r=c.find(e=>e.orgId===d);if(((null==r||null==(t=r.organization)?void 0:t.type)==="PERSONAL"||(null==r?void 0:r.organizationType)==="PERSONAL")&&l&&(null==r?void 0:r.organization)){let t=r.organization,s={id:l.id,userId:l.id,orgMemberId:r.id,orgId:r.orgId,role:r.role||"TECHNICIAN",name:l.name||"Provider",email:l.email||"",phone:t.phone||"",organizationId:r.orgId,isIndependent:!0,companyId:void 0,companyName:void 0,homeLocation:{lat:(null==t||null==(n=t.serviceArea)?void 0:n.lat)||51.0447,lng:(null==t||null==(i=t.serviceArea)?void 0:i.lng)||-114.0719,address:{street:t.addressLine1||"",city:t.city||"",stateProvince:t.region||"",country:t.countryCode||"",postalCode:t.postalCode||""}},availability:[],reliability:{totalJobs:0,noShows:0,lateDeliveries:0,onTimeRate:0,averageDeliveryTime:0},skills:{residential:0,commercial:0,aerial:0,twilight:0,video:0},rating:{overall:0,count:0,recent:[]},preferredClients:[],status:"active",createdAt:new Date,avatar:l.avatarUrl,bio:"",services:{photography:!0,video:!1,aerial:!1,floorplan:!1,measurement:!1,twilight:!1,editing:!1,virtualStaging:!1},portfolio:[],certifications:[]};e||g([s]);return}e||g(s)}catch(t){console.error("Failed to load providers for dashboard:",t),e||g([])}finally{e||b(!1)}})(),()=>{e=!0}},[l,c,d,Y]),!l||!T)return null;let{showSidebar:el,accountType:eo,orgType:ed,isElevatedRole:ec}=T;if("AGENT"===eo&&!el){let e=p.handleTaskViewClose,t=p.openTaskDialog,s=p.handleTaskDialogClose;return(0,i.jsxs)("div",{className:"size-full overflow-x-hidden",children:[(0,i.jsx)(k.b,{jobs:p.jobCards,technicians:G,organizationId:l.organizationId||"",onNewJobClick:()=>n.push("/booking"),onJobClick:e=>{p.selectJob(e),p.openTaskView(e)}}),(0,i.jsx)(I.m,{job:p.selectedJob,messages:p.selectedJob?u.getMessagesForJob(p.selectedJob.id):[],currentUserId:(null==l?void 0:l.id)||"current-user-id",currentUserName:(null==l?void 0:l.name)||"Current User",currentUserAccountType:null==l?void 0:l.accountType,isClient:!0,open:p.showTaskView,onOpenChange:e,onSendMessage:(e,t,n)=>{var i;return u.sendMessage((null==(i=p.selectedJob)?void 0:i.id)||"",e,t,n)},onEditMessage:(e,t)=>u.editMessage(e,t),onDeleteMessage:e=>u.deleteMessage(e),onStatusChange:()=>{},onAssignTechnician:()=>{},onChangeTechnician:()=>{},variant:"sheet",onFullScreen:t,onOpenInNewPage:()=>{p.selectedJob&&n.push("/jobs/".concat(p.selectedJob.id))}}),(0,i.jsx)(I.m,{job:p.selectedJob,messages:p.selectedJob?u.getMessagesForJob(p.selectedJob.id):[],currentUserId:(null==l?void 0:l.id)||"current-user-id",currentUserName:(null==l?void 0:l.name)||"Current User",currentUserAccountType:null==l?void 0:l.accountType,isClient:!0,open:p.showTaskDialog,onOpenChange:s,onSendMessage:(e,t,n)=>{var i;return u.sendMessage((null==(i=p.selectedJob)?void 0:i.id)||"",e,t,n)},onEditMessage:(e,t)=>u.editMessage(e,t),onDeleteMessage:e=>u.deleteMessage(e),onStatusChange:()=>{},onAssignTechnician:()=>{},onChangeTechnician:()=>{},variant:"dialog"})]})}if(("PROVIDER"===eo||"COMPANY"===eo)&&!el){let e=p.openTaskView,t=p.toggleJobSelection,s=p.openTaskDialog,r=p.handleTaskDialogClose,a=p.handleTaskViewClose;return(0,i.jsxs)("div",{className:"size-full overflow-x-hidden space-y-6","data-tour":"dashboard-header",children:[(0,i.jsx)(x.WT,{fallback:(0,i.jsx)(D.Eg,{}),children:(0,i.jsx)(A.N,{jobs:Q,technicians:G,selectedJob:p.selectedJob,stats:ea,onSelectJob:t,onNavigateToJobsView:()=>n.push("/jobs/all-jobs"),onNavigateToMapView:()=>n.push("/map"),onNavigateToCalendarView:()=>n.push("/calendar"),onNavigateToJobInProjectManagement:e=>{p.selectJob(e),n.push("/jobs/".concat(e.id))},onJobClick:e,currentUserId:null==l?void 0:l.id,selfTechnicianOverride:K})}),(0,i.jsx)(I.m,{job:p.selectedJob,messages:p.selectedJob?u.getMessagesForJob(p.selectedJob.id):[],currentUserId:(null==l?void 0:l.id)||"current-user-id",currentUserName:(null==l?void 0:l.name)||"Current User",currentUserAccountType:null==l?void 0:l.accountType,isClient:!1,open:p.showTaskView,onOpenChange:a,onSendMessage:(e,t,n)=>{var i;return u.sendMessage((null==(i=p.selectedJob)?void 0:i.id)||"",e,t,n)},onEditMessage:(e,t)=>u.editMessage(e,t),onDeleteMessage:e=>u.deleteMessage(e),onStatusChange:e=>{if(p.selectedJob){let t={pending:M.Ks.BOOKED,assigned:M.Ks.SHOOTING,in_progress:M.Ks.SHOOTING,editing:M.Ks.EDITING,delivered:M.Ks.DELIVERED,cancelled:M.Ks.BOOKED};p.changeJobStatus(p.selectedJob.id,t[e]||M.Ks.BOOKED)}},onAssignTechnician:p.handleAssignTechnician,onChangeTechnician:p.handleChangeTechnician,variant:"sheet",onFullScreen:s,onOpenInNewPage:()=>{p.selectedJob&&n.push("/jobs/".concat(p.selectedJob.id))}}),(0,i.jsx)(I.m,{job:p.selectedJob,messages:p.selectedJob?u.getMessagesForJob(p.selectedJob.id):[],currentUserId:(null==l?void 0:l.id)||"current-user-id",currentUserName:(null==l?void 0:l.name)||"Current User",currentUserAccountType:null==l?void 0:l.accountType,isClient:!1,open:p.showTaskDialog,onOpenChange:r,onSendMessage:(e,t,n)=>{var i;return u.sendMessage((null==(i=p.selectedJob)?void 0:i.id)||"",e,t,n)},onEditMessage:(e,t)=>u.editMessage(e,t),onDeleteMessage:e=>u.deleteMessage(e),onStatusChange:e=>{if(p.selectedJob){let t={pending:M.Ks.BOOKED,assigned:M.Ks.SHOOTING,in_progress:M.Ks.SHOOTING,editing:M.Ks.EDITING,delivered:M.Ks.DELIVERED,cancelled:M.Ks.BOOKED};p.changeJobStatus(p.selectedJob.id,t[e]||M.Ks.BOOKED)}},onAssignTechnician:p.handleAssignTechnician,onChangeTechnician:p.handleChangeTechnician,variant:"dialog"})]})}if(el){let e=p.openRankings,t=p.assignJob,s=p.toggleJobSelection,r=p.openTaskView,a=p.openTaskDialog,o=p.handleTaskDialogClose,d=p.handleTaskViewClose,c=m.navigateToJobsView,v=m.navigateToMapView,h=m.navigateToCalendarView;return(0,i.jsxs)("div",{className:"size-full overflow-x-hidden space-y-6 pt-4","data-tour":"dashboard-header",children:[es&&(0,i.jsxs)(L.Fc,{variant:"destructive",children:[(0,i.jsx)(R.A,{className:"h-4 w-4"}),(0,i.jsx)(L.XL,{children:"Unable to load metrics"}),(0,i.jsxs)(L.TN,{className:"flex items-center justify-between gap-4",children:[(0,i.jsx)("span",{children:es.message}),(0,i.jsx)(w.$,{variant:"secondary",size:"sm",onClick:er,children:"Retry"})]})]}),(0,i.jsx)(x.WT,{fallback:(0,i.jsx)(D.Eg,{}),children:ei&&!ee?(0,i.jsx)(D.Eg,{}):(0,i.jsx)(E,{jobs:p.jobs,technicians:G,metrics:null!=ee?ee:{organizationId:"",period:"week",jobs:{total:0,pending:0,assigned:0,completed:0,cancelled:0},technicians:{active:0,available:0,utilization:0},performance:{averageAssignmentTime:0,averageDeliveryTime:0,onTimeRate:0,clientSatisfaction:0},revenue:{total:0,perJob:0}},selectedJob:p.selectedJob,onViewRankings:e,onSelectJob:s,onNavigateToJobsView:c,onNavigateToMapView:v,onNavigateToCalendarView:h,onNavigateToJobInProjectManagement:e=>{p.selectJob(e),m.navigateToJobInProjectManagement(e)},onJobAssign:t,onJobClick:r})}),(0,i.jsx)(I.m,{job:p.selectedJob,messages:p.selectedJob?u.getMessagesForJob(p.selectedJob.id):[],currentUserId:(null==l?void 0:l.id)||"current-user-id",currentUserName:(null==l?void 0:l.name)||"Current User",currentUserAccountType:null==l?void 0:l.accountType,isClient:!1,open:p.showTaskView,onOpenChange:d,onSendMessage:(e,t,n)=>{var i;return u.sendMessage((null==(i=p.selectedJob)?void 0:i.id)||"",e,t,n)},onEditMessage:(e,t)=>u.editMessage(e,t),onDeleteMessage:e=>u.deleteMessage(e),onStatusChange:()=>{},onAssignTechnician:p.handleAssignTechnician,onChangeTechnician:p.handleChangeTechnician,variant:"sheet",onFullScreen:a,onOpenInNewPage:()=>{p.selectedJob&&n.push("/jobs/".concat(p.selectedJob.id))}}),(0,i.jsx)(I.m,{job:p.selectedJob,messages:p.selectedJob?u.getMessagesForJob(p.selectedJob.id):[],currentUserId:(null==l?void 0:l.id)||"current-user-id",currentUserName:(null==l?void 0:l.name)||"Current User",currentUserAccountType:null==l?void 0:l.accountType,isClient:!1,open:p.showTaskDialog,onOpenChange:o,onSendMessage:(e,t,n)=>{var i;return u.sendMessage((null==(i=p.selectedJob)?void 0:i.id)||"",e,t,n)},onEditMessage:(e,t)=>u.editMessage(e,t),onDeleteMessage:e=>u.deleteMessage(e),onStatusChange:()=>{},onAssignTechnician:p.handleAssignTechnician,onChangeTechnician:p.handleChangeTechnician,variant:"dialog"})]})}return(0,i.jsxs)("div",{className:"size-full overflow-x-hidden p-6",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Dashboard"}),(0,i.jsx)("p",{className:"text-muted-foreground",children:"Dashboard view for your role is coming soon."})]})}},13172:(e,t,n)=>{Promise.resolve().then(n.bind(n,6226))},20017:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});let i=(0,n(71847).A)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},26467:(e,t,n)=>{"use strict";n.d(t,{H:()=>a});var i=n(9180),s=n(4168),r=n(92118);function a(e,t){var n;let a,h,g=()=>(0,s.w)(null==t?void 0:t.in,NaN),x=null!=(n=null==t?void 0:t.additionalDigits)?n:2,f=function(e){let t,n={},i=e.split(l.dateTimeDelimiter);if(i.length>2)return n;if(/:/.test(i[0])?t=i[0]:(n.date=i[0],t=i[1],l.timeZoneDelimiter.test(n.date)&&(n.date=e.split(l.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){let e=l.timezone.exec(t);e?(n.time=t.replace(e[1],""),n.timezone=e[1]):n.time=t}return n}(e);if(f.date){let e=function(e,t){let n=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),i=e.match(n);if(!i)return{year:NaN,restDateString:""};let s=i[1]?parseInt(i[1]):null,r=i[2]?parseInt(i[2]):null;return{year:null===r?s:100*r,restDateString:e.slice((i[1]||i[2]).length)}}(f.date,x);a=function(e,t){var n,i,s,r,a,l,d;if(null===t)return new Date(NaN);let c=e.match(o);if(!c)return new Date(NaN);let p=!!c[4],h=u(c[1]),g=u(c[2])-1,x=u(c[3]),f=u(c[4]),b=u(c[5])-1;if(p){return(n=f,i=b,n>=1&&n<=53&&i>=0&&i<=6)?function(e,t,n){let i=new Date(0);i.setUTCFullYear(e,0,4);let s=i.getUTCDay()||7;return i.setUTCDate(i.getUTCDate()+((t-1)*7+n+1-s)),i}(t,f,b):new Date(NaN)}{let e=new Date(0);return(s=t,r=g,a=x,r>=0&&r<=11&&a>=1&&a<=(m[r]||(v(s)?29:28))&&(l=t,(d=h)>=1&&d<=(v(l)?366:365)))?(e.setUTCFullYear(t,g,Math.max(h,x)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!a||isNaN(+a))return g();let b=+a,w=0;if(f.time&&isNaN(w=function(e){var t,n,s;let r=e.match(d);if(!r)return NaN;let a=p(r[1]),l=p(r[2]),o=p(r[3]);return(t=a,n=l,s=o,24===t?0===n&&0===s:s>=0&&s<60&&n>=0&&n<60&&t>=0&&t<25)?a*i.s0+l*i.Cg+1e3*o:NaN}(f.time)))return g();if(f.timezone){if(isNaN(h=function(e){var t;if("Z"===e)return 0;let n=e.match(c);if(!n)return 0;let s="+"===n[1]?-1:1,r=parseInt(n[2]),a=n[3]&&parseInt(n[3])||0;return(t=a)>=0&&t<=59?s*(r*i.s0+a*i.Cg):NaN}(f.timezone)))return g()}else{let e=new Date(b+w),n=(0,r.a)(0,null==t?void 0:t.in);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}return(0,r.a)(b+w+h,null==t?void 0:t.in)}let l={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},o=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,d=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,c=/^([+-])(\d{2})(?::?(\d{2}))?$/;function u(e){return e?parseInt(e):1}function p(e){return e&&parseFloat(e.replace(",","."))||0}let m=[31,null,31,30,31,30,31,31,30,31,30,31];function v(e){return e%400==0||e%4==0&&e%100!=0}},26921:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});let i=(0,n(71847).A)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]])},40235:(e,t,n)=>{"use strict";n.d(t,{$:()=>o,H:()=>l});var i=n(95155),s=n(12115),r=n(20063);let a=(0,s.createContext)(void 0);function l(e){let{children:t}=e,n=(0,r.useRouter)(),l=(0,s.useCallback)(()=>{n.push("/jobs/all-jobs")},[n]),o=(0,s.useCallback)(()=>{n.push("/map")},[n]),d=(0,s.useCallback)(()=>{n.push("/calendar")},[n]),c=(0,s.useCallback)(e=>{n.push("/jobs/".concat(e.id))},[n]);return(0,i.jsx)(a.Provider,{value:{navigateToJobsView:l,navigateToMapView:o,navigateToCalendarView:d,navigateToJobInProjectManagement:c},children:t})}function o(){let e=(0,s.useContext)(a);if(void 0===e)throw Error("useDispatcherNavigation must be used within a DispatcherNavigationProvider");return e}},42892:(e,t,n)=>{"use strict";n.d(t,{Eg:()=>r,N3:()=>d,a1:()=>l,is:()=>a,jw:()=>o});var i=n(95155),s=n(68122);function r(){return(0,i.jsx)("main",{className:"container relative mx-auto",children:(0,i.jsxs)("article",{className:"flex flex-col gap-2xl md:gap-3xl px-md",children:[(0,i.jsx)("div",{className:"@container w-full mt-md",children:(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Array.from({length:4}).map((e,t)=>(0,i.jsxs)("div",{className:"p-4 border rounded-md",children:[(0,i.jsx)(s.E,{className:"h-4 w-24 mb-2"}),(0,i.jsx)(s.E,{className:"h-8 w-32"})]},t))})}),(0,i.jsxs)("div",{className:"@container w-full",children:[(0,i.jsxs)("div",{className:"mb-md flex items-baseline justify-between",children:[(0,i.jsx)(s.E,{className:"h-6 w-32"}),(0,i.jsx)(s.E,{className:"h-8 w-28"})]}),(0,i.jsxs)("div",{className:"border rounded-md overflow-hidden p-4",children:[(0,i.jsx)("div",{className:"grid grid-cols-7 gap-2 mb-2",children:Array.from({length:7}).map((e,t)=>(0,i.jsx)(s.E,{className:"h-8 w-full"},t))}),(0,i.jsx)("div",{className:"grid grid-cols-7 gap-2",children:Array.from({length:35}).map((e,t)=>(0,i.jsx)(s.E,{className:"h-16 w-full"},t))})]})]}),(0,i.jsxs)("div",{className:"@container w-full",children:[(0,i.jsxs)("div",{className:"mb-md flex items-baseline justify-between",children:[(0,i.jsx)(s.E,{className:"h-6 w-32"}),(0,i.jsx)(s.E,{className:"h-8 w-28"})]}),(0,i.jsx)("div",{className:"border rounded-md overflow-hidden",children:(0,i.jsx)(s.E,{className:"h-96 w-full"})})]}),(0,i.jsxs)("div",{className:"@container w-full mb-md",children:[(0,i.jsxs)("div",{className:"mb-md flex items-baseline justify-between",children:[(0,i.jsx)(s.E,{className:"h-6 w-32"}),(0,i.jsx)(s.E,{className:"h-8 w-24"})]}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Array.from({length:4}).map((e,t)=>(0,i.jsxs)("div",{className:"border rounded-md p-4 space-y-3",children:[(0,i.jsx)(s.E,{className:"h-32 w-full rounded"}),(0,i.jsx)(s.E,{className:"h-4 w-3/4"}),(0,i.jsx)(s.E,{className:"h-4 w-1/2"}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(s.E,{className:"h-6 w-16"}),(0,i.jsx)(s.E,{className:"h-6 w-20"})]})]},t))})]})]})})}function a(){return(0,i.jsxs)("main",{className:"fixed inset-0 overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute inset-0",children:(0,i.jsx)(s.E,{className:"h-full w-full"})}),(0,i.jsxs)("div",{className:"absolute right-0 top-0 bottom-0 w-80 border-l bg-background p-4",children:[(0,i.jsx)(s.E,{className:"h-8 w-32 mb-4"}),(0,i.jsx)("div",{className:"space-y-3",children:Array.from({length:5}).map((e,t)=>(0,i.jsxs)("div",{className:"border rounded-md p-3 space-y-2",children:[(0,i.jsx)(s.E,{className:"h-4 w-3/4"}),(0,i.jsx)(s.E,{className:"h-4 w-1/2"}),(0,i.jsx)(s.E,{className:"h-6 w-20"})]},t))})]})]})}function l(){return(0,i.jsxs)("div",{className:"flex flex-col size-full",children:[(0,i.jsx)("div",{className:"border-b p-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)(s.E,{className:"h-8 w-8"}),(0,i.jsx)(s.E,{className:"h-8 w-8"}),(0,i.jsx)(s.E,{className:"h-6 w-32"}),(0,i.jsx)(s.E,{className:"h-8 w-8"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(s.E,{className:"h-8 w-24"}),(0,i.jsx)(s.E,{className:"h-8 w-24"}),(0,i.jsx)(s.E,{className:"h-8 w-24"})]})]})}),(0,i.jsx)("div",{className:"flex-1 p-4",children:(0,i.jsxs)("div",{className:"grid grid-cols-7 gap-2 h-full",children:[(0,i.jsx)("div",{className:"space-y-2",children:Array.from({length:24}).map((e,t)=>(0,i.jsx)(s.E,{className:"h-12 w-full"},t))}),Array.from({length:6}).map((e,t)=>(0,i.jsx)("div",{className:"space-y-2",children:Array.from({length:24}).map((e,t)=>(0,i.jsx)(s.E,{className:"h-12 w-full"},t))},t))]})})]})}function o(){return(0,i.jsx)("main",{className:"container relative mx-auto",children:(0,i.jsx)("article",{className:"flex flex-col gap-2xl md:gap-3xl px-md",children:(0,i.jsxs)("div",{className:"@container w-full mt-md mb-md",children:[(0,i.jsx)(s.E,{className:"h-10 w-32 mb-6"}),(0,i.jsxs)("div",{className:"flex gap-3 mb-6",children:[(0,i.jsx)(s.E,{className:"h-10 flex-1"}),(0,i.jsx)(s.E,{className:"h-10 w-32"})]}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:6}).map((e,t)=>(0,i.jsxs)("div",{className:"border rounded-md p-4 space-y-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)(s.E,{className:"size-12 rounded-full"}),(0,i.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,i.jsx)(s.E,{className:"h-4 w-32"}),(0,i.jsx)(s.E,{className:"h-3 w-24"})]})]}),(0,i.jsx)(s.E,{className:"h-4 w-full"}),(0,i.jsx)(s.E,{className:"h-4 w-3/4"}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(s.E,{className:"h-6 w-16"}),(0,i.jsx)(s.E,{className:"h-6 w-16"})]})]},t))})]})})})}function d(){return(0,i.jsxs)("div",{className:"flex size-full",children:[(0,i.jsx)("div",{className:"w-64 border-r p-4 space-y-2",children:Array.from({length:8}).map((e,t)=>(0,i.jsx)(s.E,{className:"h-10 w-full"},t))}),(0,i.jsxs)("div",{className:"flex-1 p-6 space-y-6",children:[(0,i.jsx)(s.E,{className:"h-8 w-48"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)(s.E,{className:"h-4 w-full"}),(0,i.jsx)(s.E,{className:"h-4 w-3/4"}),(0,i.jsx)(s.E,{className:"h-32 w-full"}),(0,i.jsx)(s.E,{className:"h-10 w-32"})]})]})]})}},43285:(e,t,n)=>{"use strict";n.d(t,{b:()=>D});var i=n(95155),s=n(62816),r=n(90923),a=n(95664),l=n(60890),o=n(54255),d=n(26397),c=n(6132),u=n(56154),p=n(26983),m=n(21873),v=n(16485),h=n(6191),g=n(29633),x=n(61362),f=n(48432);function b(e){let{pendingCount:t,assignedCount:n,inProgressCount:s,completedCount:r}=e;return(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,i.jsx)(f.CN,{icon:p.A,value:t,label:"Pending Assignment",iconBgColor:"bg-orange-100",iconColor:"text-orange-600"}),(0,i.jsx)(f.CN,{icon:g.A,value:n,label:"Assigned",iconBgColor:"bg-accent",iconColor:"text-primary"}),(0,i.jsx)(f.CN,{icon:g.A,value:s,label:"In Progress",iconBgColor:"bg-accent",iconColor:"text-primary"}),(0,i.jsx)(f.CN,{icon:x.A,value:r,label:"Completed",iconBgColor:"bg-emerald-100",iconColor:"text-emerald-600"})]})}var w=n(96633),j=n(67812),y=n(33884),N=n(71163),C=n(82180),T=n(73344),E=n(97003),A=n(20063),k=n(24632),I=n(84433),M=n(25703);function D(e){let{jobs:t,technicians:n,organizationId:f,onNewJobClick:D,onJobClick:S}=e,{user:P}=(0,k.l)(["AGENT","TECHNICIAN","EDITOR","PROJECT_MANAGER","COMPANY"]),J=(0,A.useRouter)(),{shouldShowGuide:_,isTourActive:L}=(0,M.Mw)(),R=n||n||[],O=t.filter(e=>"pending"===e.status),B=t.filter(e=>"assigned"===e.status),$=t.filter(e=>"in_progress"===e.status),H=t.filter(e=>"delivered"===e.status),U=e=>{S?(S(e),L&&setTimeout(()=>{window.dispatchEvent(new CustomEvent("jobTaskViewOpened",{detail:{id:e.id}}))},100)):J.push("/jobs/".concat(e.id))},F=e=>{let t=e.assignedTechnicianId||e.assignedTechnicianId,n=t?R.find(e=>e.id===t):void 0,s=(e=>{switch(e){case"urgent":return{variant:"destructive",label:"Urgent",icon:c.A};case"rush":return{variant:"secondary",label:"Rush",icon:u.A};default:return{variant:"outline",label:"Standard",icon:p.A}}})(e.priority),r=(e=>{switch(e){case"pending":return{variant:"outline",label:"Pending"};case"assigned":return{variant:"secondary",label:"Assigned"};case"in_progress":return{variant:"default",label:"In Progress"};case"editing":return{variant:"secondary",label:"Editing"};case"delivered":return{variant:"default",label:"Delivered"};case"cancelled":return{variant:"destructive",label:"Cancelled"};default:return{variant:"outline",label:e}}})(e.status),h=s.icon;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(w.nA,{children:(0,i.jsxs)("div",{className:"flex items-center gap-2 min-w-[200px]",children:[(0,i.jsx)(m.A,{className:"h-4 w-4 text-muted-foreground shrink-0"}),(0,i.jsxs)(C.m_,{children:[(0,i.jsx)(C.k$,{asChild:!0,children:(0,i.jsx)("span",{className:"truncate max-w-[180px]",children:e.propertyAddress})}),(0,i.jsx)(C.ZI,{children:(0,i.jsx)(T.P,{className:"max-w-xs",children:e.propertyAddress})})]})]})}),(0,i.jsx)(w.nA,{children:(0,i.jsx)("span",{className:"text-sm",children:e.clientName})}),(0,i.jsx)(w.nA,{children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(v.A,{className:"h-4 w-4 text-muted-foreground"}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("span",{className:"text-sm",children:(0,N.GP)(new Date(e.scheduledDate),"MMM d, yyyy")}),e.scheduledTime&&(0,i.jsx)("span",{className:"text-xs text-muted-foreground",children:e.scheduledTime})]})]})}),(0,i.jsx)(w.nA,{children:(0,i.jsx)("div",{className:"flex items-center gap-1 flex-wrap",children:e.mediaType.map(e=>{let t=(e=>{switch(e){case"photo":default:return a.A;case"video":return l.A;case"aerial":return o.A;case"twilight":return d.A}})(e);return(0,i.jsxs)(C.m_,{children:[(0,i.jsx)(C.k$,{asChild:!0,children:(0,i.jsx)("div",{className:"p-1.5 rounded bg-muted",children:(0,i.jsx)(t,{className:"h-3 w-3"})})}),(0,i.jsx)(C.ZI,{children:(0,i.jsx)(T.P,{className:"capitalize",children:e})})]},e)})})}),(0,i.jsx)(w.nA,{children:(0,i.jsxs)(j.E,{variant:s.variant,className:"gap-1",children:[(0,i.jsx)(h,{className:"h-3 w-3"}),s.label]})}),(0,i.jsx)(w.nA,{children:(0,i.jsx)(j.E,{variant:r.variant,children:r.label})}),(0,i.jsx)(w.nA,{children:n?(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)(y.eu,{className:"h-6 w-6",children:[(0,i.jsx)(y.BK,{src:n.avatar,alt:n.name}),(0,i.jsx)(y.q5,{children:n.name.split(" ").map(e=>e[0]).join("")})]}),(0,i.jsx)("span",{className:"text-sm",children:n.name})]}):(0,i.jsx)("span",{className:"text-sm text-muted-foreground",children:"Unassigned"})}),(0,i.jsx)(w.nA,{className:"text-right"})]})};return(0,i.jsx)("main",{className:"container relative mx-auto",children:(0,i.jsxs)("article",{className:"flex flex-col gap-2xl md:gap-3xl px-md","data-tour":"dashboard-article",children:[_&&(0,i.jsx)("div",{className:"@container w-full mt-md","data-tour":"setup-guide",children:(0,i.jsx)(I.K,{})}),(0,i.jsxs)("div",{className:"@container w-full ".concat(_?"":"mt-md"," mb-md"),"data-tour":"agent-dashboard",children:[(0,i.jsxs)("div",{className:"mb-md flex items-baseline justify-between","data-tour":"agent-header",children:[(0,i.jsx)(T.H2,{className:"text-4xl mb-xs",children:"My Jobs"}),(0,i.jsxs)(E.$,{variant:"default",onClick:D,"data-tour":"jobs-create-button",children:[(0,i.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Create Order"]})]}),(0,i.jsx)("div",{className:"@container w-full mb-md","data-tour":"agent-stats",children:(0,i.jsx)(b,{pendingCount:O.length,assignedCount:B.length,inProgressCount:$.length,completedCount:H.length})}),(0,i.jsx)("div",{className:"@container w-full","data-tour":"agent-jobs-list",children:(0,i.jsxs)(r.tU,{defaultValue:"all",className:"w-full",children:[(0,i.jsxs)(r.j7,{className:"grid w-full grid-cols-5 rounded-md","data-tour":"jobs-tabs",children:[(0,i.jsxs)(r.Xi,{value:"all",children:["All (",t.length,")"]}),(0,i.jsxs)(r.Xi,{value:"pending",children:["Pending (",O.length,")"]}),(0,i.jsxs)(r.Xi,{value:"assigned",children:["Assigned (",B.length,")"]}),(0,i.jsxs)(r.Xi,{value:"in_progress",children:["In Progress (",$.length,")"]}),(0,i.jsxs)(r.Xi,{value:"completed",children:["Completed (",H.length,")"]})]}),(0,i.jsx)(r.av,{value:"all",className:"mt-6",children:(0,i.jsx)(s.rw,{items:t,searchPlaceholder:"Search by address, client, Order #...",searchFields:e=>"".concat(e.propertyAddress," ").concat(e.clientName," ").concat(e.scheduledDate," ").concat(e.orderNumber),filterOptions:[{label:"Urgent",value:"urgent"},{label:"Rush",value:"rush"},{label:"Standard",value:"standard"}],onItemClick:U,onFilterChange:e=>t.filter(t=>"all"===e||t.priority===e),renderItem:e=>{let t=e.assignedTechnicianId||e.assignedTechnicianId,n=t?R.find(e=>e.id===t):void 0;return(0,i.jsx)(s.oe,{job:e,technician:n,currentUserAccountType:null==P?void 0:P.accountType},e.id)},renderTableRow:F,emptyMessage:"No jobs yet",emptyIcon:g.A,emptyTitle:"No jobs yet",emptyDescription:"Create your first booking to get started",emptyAction:{label:"Create Order",onClick:D},itemsPerPage:12})}),(0,i.jsx)(r.av,{value:"pending",className:"mt-6",children:(0,i.jsx)(s.rw,{items:O,searchPlaceholder:"Search by address, client, Order #...",searchFields:e=>"".concat(e.propertyAddress," ").concat(e.clientName," ").concat(e.scheduledDate," ").concat(e.orderNumber),filterOptions:[{label:"Urgent",value:"urgent"},{label:"Rush",value:"rush"},{label:"Standard",value:"standard"}],onItemClick:U,onFilterChange:e=>O.filter(t=>"all"===e||t.priority===e),renderItem:e=>{let t=e.assignedTechnicianId||e.assignedTechnicianId,n=t?R.find(e=>e.id===t):void 0;return(0,i.jsx)(s.oe,{job:e,technician:n,currentUserAccountType:null==P?void 0:P.accountType},e.id)},renderTableRow:F,emptyMessage:"No pending jobs",emptyIcon:p.A,emptyTitle:"No pending jobs",emptyDescription:"All your jobs have been assigned",itemsPerPage:12})}),(0,i.jsx)(r.av,{value:"assigned",className:"mt-6",children:(0,i.jsx)(s.rw,{items:B,searchPlaceholder:"Search by address, client, Order #...",searchFields:e=>"".concat(e.propertyAddress," ").concat(e.clientName," ").concat(e.scheduledDate," ").concat(e.orderNumber),filterOptions:[{label:"Urgent",value:"urgent"},{label:"Rush",value:"rush"},{label:"Standard",value:"standard"}],onItemClick:U,onFilterChange:e=>B.filter(t=>"all"===e||t.priority===e),renderItem:e=>{let t=e.assignedTechnicianId||e.assignedTechnicianId,n=t?R.find(e=>e.id===t):void 0;return(0,i.jsx)(s.oe,{job:e,technician:n,currentUserAccountType:null==P?void 0:P.accountType},e.id)},renderTableRow:F,emptyMessage:"No assigned jobs",emptyIcon:g.A,emptyTitle:"No assigned jobs",emptyDescription:"Jobs will appear here once assigned to a technician",itemsPerPage:12})}),(0,i.jsx)(r.av,{value:"in_progress",className:"mt-6",children:(0,i.jsx)(s.rw,{items:$,searchPlaceholder:"Search by address, client, Order #...",searchFields:e=>"".concat(e.propertyAddress," ").concat(e.clientName," ").concat(e.scheduledDate," ").concat(e.orderNumber),filterOptions:[{label:"Urgent",value:"urgent"},{label:"Rush",value:"rush"},{label:"Standard",value:"standard"}],onItemClick:U,onFilterChange:e=>$.filter(t=>"all"===e||t.priority===e),renderItem:e=>{let t=e.assignedTechnicianId||e.assignedTechnicianId,n=t?R.find(e=>e.id===t):void 0;return(0,i.jsx)(s.oe,{job:e,technician:n,currentUserAccountType:null==P?void 0:P.accountType},e.id)},renderTableRow:F,emptyMessage:"No jobs in progress",emptyIcon:g.A,emptyTitle:"No jobs in progress",emptyDescription:"Active shoots will appear here",itemsPerPage:12})}),(0,i.jsx)(r.av,{value:"completed",className:"mt-6",children:(0,i.jsx)(s.rw,{items:H,searchPlaceholder:"Search by address, client, Order #...",searchFields:e=>"".concat(e.propertyAddress," ").concat(e.clientName," ").concat(e.scheduledDate," ").concat(e.orderNumber),filterOptions:[{label:"Urgent",value:"urgent"},{label:"Rush",value:"rush"},{label:"Standard",value:"standard"}],onItemClick:U,onFilterChange:e=>H.filter(t=>"all"===e||t.priority===e),renderItem:e=>{let t=e.assignedTechnicianId||e.assignedTechnicianId,n=t?R.find(e=>e.id===t):void 0;return(0,i.jsx)(s.oe,{job:e,technician:n},e.id)},renderTableRow:F,emptyMessage:"No completed jobs",emptyIcon:x.A,emptyTitle:"No completed jobs",emptyDescription:"Finished jobs will appear here",itemsPerPage:12})})]})})]})]})})}},48314:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});let i=(0,n(71847).A)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},52516:()=>{},84579:(e,t,n)=>{"use strict";n.d(t,{B:()=>k});let i={},s;function r(e={}){i={animate:!0,allowClose:!0,overlayClickBehavior:"close",overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...e}}function a(e){return e?i[e]:i}let l={};function o(e){var t;null==(t=l[e])||t.call(l)}function d(e,t,n,i){return(e/=i/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t}function c(e){let t='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return e.flatMap(e=>{let n=e.matches(t),i=Array.from(e.querySelectorAll(t));return[...n?[e]:[],...i]}).filter(e=>{var t;return"none"!==getComputedStyle(e).pointerEvents&&!!((t=e).offsetWidth||t.offsetHeight||t.getClientRects().length)})}function u(e){if(!e||function(e){let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}(e))return;let t=a("smoothScroll"),n=e.offsetHeight>window.innerHeight;e.scrollIntoView({behavior:!t||function(e){if(!e||!e.parentElement)return;let t=e.parentElement;return t.scrollHeight>t.clientHeight}(e)?"auto":"smooth",inline:"center",block:n?"start":"center"})}let p={};function m(e){return e?p[e]:p}function v(e){if(!e)return;let t=e.getBoundingClientRect(),n={x:t.x,y:t.y,width:t.width,height:t.height};p.__activeStagePosition=n,h(n)}function h(e){let t=m("__overlaySvg");if(!t)return void function(e){let t=function(e){let t=window.innerWidth,n=window.innerHeight,i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("driver-overlay","driver-overlay-animated"),i.setAttribute("viewBox",`0 0 ${t} ${n}`),i.setAttribute("xmlSpace","preserve"),i.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),i.setAttribute("version","1.1"),i.setAttribute("preserveAspectRatio","xMinYMin slice"),i.style.fillRule="evenodd",i.style.clipRule="evenodd",i.style.strokeLinejoin="round",i.style.strokeMiterlimit="2",i.style.zIndex="10000",i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%";let s=document.createElementNS("http://www.w3.org/2000/svg","path");return s.setAttribute("d",g(e)),s.style.fill=a("overlayColor")||"rgb(0,0,0)",s.style.opacity=`${a("overlayOpacity")}`,s.style.pointerEvents="auto",s.style.cursor="auto",i.appendChild(s),i}(e);document.body.appendChild(t),y(t,e=>{"path"===e.target.tagName&&o("overlayClick")}),p.__overlaySvg=t}(e);let n=t.firstElementChild;if((null==n?void 0:n.tagName)!=="path")throw Error("no path element found in stage svg");n.setAttribute("d",g(e))}function g(e){let t=window.innerWidth,n=window.innerHeight,i=a("stagePadding")||0,s=a("stageRadius")||0,r=e.width+2*i,l=e.height+2*i,o=Math.floor(Math.max(Math.min(s,r/2,l/2),0)),d=e.x-i+o,c=e.y-i,u=r-2*o,p=l-2*o;return`M${t},0L0,0L0,${n}L${t},${n}L${t},0Z
    M${d},${c} h${u} a${o},${o} 0 0 1 ${o},${o} v${p} a${o},${o} 0 0 1 -${o},${o} h-${u} a${o},${o} 0 0 1 -${o},-${o} v-${p} a${o},${o} 0 0 1 ${o},-${o} z`}function x(e){let{element:t}=e,n="function"==typeof t?t():"string"==typeof t?document.querySelector(t):t;n||(n=function(){let e=document.getElementById("driver-dummy-element");if(e)return e;let t=document.createElement("div");return t.id="driver-dummy-element",t.style.width="0",t.style.height="0",t.style.pointerEvents="none",t.style.opacity="0",t.style.position="fixed",t.style.top="50%",t.style.left="50%",document.body.appendChild(t),t}()),function(e,t){var n;let i=Date.now(),r=m("__activeStep"),l=m("__activeElement")||e,o=!l||l===e,c="driver-dummy-element"===e.id,g="driver-dummy-element"===l.id,x=a("animate"),f=t.onHighlightStarted||a("onHighlightStarted"),b=(null==t?void 0:t.onHighlighted)||a("onHighlighted"),w=(null==r?void 0:r.onDeselected)||a("onDeselected"),j=a(),y=m();!o&&w&&w(g?void 0:l,r,{config:j,state:y,driver:s}),f&&f(c?void 0:e,t,{config:j,state:y,driver:s});let C=!o&&x,T=!1;(function(){let e=m("popover");e&&(e.wrapper.style.display="none")})(),p.previousStep=r,p.previousElement=l,p.activeStep=t,p.activeElement=e;let E=()=>{if(m("__transitionCallback")!==E)return;let n=Date.now()-i,o=400-n<=200;t.popover&&o&&!T&&C&&(N(e,t),T=!0),a("animate")&&n<400?function(e,t,n,i){var s;let r=m("__activeStagePosition"),a=r||n.getBoundingClientRect(),l=i.getBoundingClientRect(),o=d(e,a.x,l.x-a.x,400),c=d(e,a.y,l.y-a.y,400);h(r={x:o,y:c,width:d(e,a.width,l.width-a.width,t),height:d(e,a.height,l.height-a.height,t)}),s=r,p.__activeStagePosition=s}(n,400,l,e):(v(e),b&&b(c?void 0:e,t,{config:a(),state:m(),driver:s}),p.__transitionCallback=void 0,p.__previousStep=r,p.__previousElement=l,p.__activeStep=t,p.__activeElement=e),window.requestAnimationFrame(E)};p.__transitionCallback=E,window.requestAnimationFrame(E),u(e),!C&&t.popover&&N(e,t),l.classList.remove("driver-active-element","driver-no-interaction"),l.removeAttribute("aria-haspopup"),l.removeAttribute("aria-expanded"),l.removeAttribute("aria-controls"),(null!=(n=t.disableActiveInteraction)?n:a("disableActiveInteraction"))&&e.classList.add("driver-no-interaction"),e.classList.add("driver-active-element"),e.setAttribute("aria-haspopup","dialog"),e.setAttribute("aria-expanded","true"),e.setAttribute("aria-controls","driver-popover-content")}(n,e)}function f(){let e=m("__activeElement"),t=m("__activeStep");e&&(v(e),function(){let e=m("__activeStagePosition"),t=m("__overlaySvg");if(!e)return;if(!t)return console.warn("No stage svg found.");let n=window.innerWidth,i=window.innerHeight;t.setAttribute("viewBox",`0 0 ${n} ${i}`)}(),A(e,t))}function b(){var e;let t=m("__resizeTimeout");t&&window.cancelAnimationFrame(t),e=window.requestAnimationFrame(f),p.__resizeTimeout=e}function w(e){var t;if(!m("isInitialized")||"Tab"!==e.key&&9!==e.keyCode)return;let n=m("__activeElement"),i=null==(t=m("popover"))?void 0:t.wrapper,s=c([...i?[i]:[],...n?[n]:[]]),r=s[0],a=s[s.length-1];if(e.preventDefault(),e.shiftKey){let e=s[s.indexOf(document.activeElement)-1]||a;null==e||e.focus()}else{let e=s[s.indexOf(document.activeElement)+1]||r;null==e||e.focus()}}function j(e){var t;(null==(t=a("allowKeyboardControl"))||t)&&("Escape"===e.key?o("escapePress"):"ArrowRight"===e.key?o("arrowRightPress"):"ArrowLeft"===e.key&&o("arrowLeftPress"))}function y(e,t,n){let i=(t,i)=>{let s=t.target;e.contains(s)&&((!n||n(s))&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()),null==i||i(t))};document.addEventListener("pointerdown",i,!0),document.addEventListener("mousedown",i,!0),document.addEventListener("pointerup",i,!0),document.addEventListener("mouseup",i,!0),document.addEventListener("click",e=>{i(e,t)},!0)}function N(e,t){var n,i,r;let l=m("popover");l&&document.body.removeChild(l.wrapper),l=function(){let e=document.createElement("div");e.classList.add("driver-popover");let t=document.createElement("div");t.classList.add("driver-popover-arrow");let n=document.createElement("header");n.id="driver-popover-title",n.classList.add("driver-popover-title"),n.style.display="none",n.innerText="Popover Title";let i=document.createElement("div");i.id="driver-popover-description",i.classList.add("driver-popover-description"),i.style.display="none",i.innerText="Popover description is here";let s=document.createElement("button");s.type="button",s.classList.add("driver-popover-close-btn"),s.setAttribute("aria-label","Close"),s.innerHTML="&times;";let r=document.createElement("footer");r.classList.add("driver-popover-footer");let a=document.createElement("span");a.classList.add("driver-popover-progress-text"),a.innerText="";let l=document.createElement("span");l.classList.add("driver-popover-navigation-btns");let o=document.createElement("button");o.type="button",o.classList.add("driver-popover-prev-btn"),o.innerHTML="&larr; Previous";let d=document.createElement("button");return d.type="button",d.classList.add("driver-popover-next-btn"),d.innerHTML="Next &rarr;",l.appendChild(o),l.appendChild(d),r.appendChild(a),r.appendChild(l),e.appendChild(s),e.appendChild(t),e.appendChild(n),e.appendChild(i),e.appendChild(r),{wrapper:e,arrow:t,title:n,description:i,footer:r,previousButton:o,nextButton:d,closeButton:s,footerButtons:l,progress:a}}(),document.body.appendChild(l.wrapper);let{title:d,description:v,showButtons:h,disableButtons:g,showProgress:x,nextBtnText:f=a("nextBtnText")||"Next &rarr;",prevBtnText:b=a("prevBtnText")||"&larr; Previous",progressText:w=a("progressText")||"{current} of {total}"}=t.popover||{};l.nextButton.innerHTML=f,l.previousButton.innerHTML=b,l.progress.innerHTML=w,d?(l.title.innerHTML=d,l.title.style.display="block"):l.title.style.display="none",v?(l.description.innerHTML=v,l.description.style.display="block"):l.description.style.display="none";let j=h||a("showButtons"),N=x||a("showProgress")||!1,C=(null==j?void 0:j.includes("next"))||(null==j?void 0:j.includes("previous"))||N;l.closeButton.style.display=j.includes("close")?"block":"none",C?(l.footer.style.display="flex",l.progress.style.display=N?"block":"none",l.nextButton.style.display=j.includes("next")?"block":"none",l.previousButton.style.display=j.includes("previous")?"block":"none"):l.footer.style.display="none";let T=g||a("disableButtons")||[];null!=T&&T.includes("next")&&(l.nextButton.disabled=!0,l.nextButton.classList.add("driver-popover-btn-disabled")),null!=T&&T.includes("previous")&&(l.previousButton.disabled=!0,l.previousButton.classList.add("driver-popover-btn-disabled")),null!=T&&T.includes("close")&&(l.closeButton.disabled=!0,l.closeButton.classList.add("driver-popover-btn-disabled"));let E=l.wrapper;E.style.display="block",E.style.left="",E.style.top="",E.style.bottom="",E.style.right="",E.id="driver-popover-content",E.setAttribute("role","dialog"),E.setAttribute("aria-labelledby","driver-popover-title"),E.setAttribute("aria-describedby","driver-popover-description"),l.arrow.className="driver-popover-arrow";let k=(null==(n=t.popover)?void 0:n.popoverClass)||a("popoverClass")||"";E.className=`driver-popover ${k}`.trim(),y(l.wrapper,n=>{var i,r,l;let d=n.target,c=(null==(i=t.popover)?void 0:i.onNextClick)||a("onNextClick"),u=(null==(r=t.popover)?void 0:r.onPrevClick)||a("onPrevClick"),p=(null==(l=t.popover)?void 0:l.onCloseClick)||a("onCloseClick");return d.closest(".driver-popover-next-btn")?c?c(e,t,{config:a(),state:m(),driver:s}):o("nextClick"):d.closest(".driver-popover-prev-btn")?u?u(e,t,{config:a(),state:m(),driver:s}):o("prevClick"):d.closest(".driver-popover-close-btn")?p?p(e,t,{config:a(),state:m(),driver:s}):o("closeClick"):void 0},e=>!(null!=l&&l.description.contains(e))&&!(null!=l&&l.title.contains(e))&&"string"==typeof e.className&&e.className.includes("driver-popover")),r=l,p.popover=r;let I=(null==(i=t.popover)?void 0:i.onPopoverRender)||a("onPopoverRender");I&&I(l,{config:a(),state:m(),driver:s}),A(e,t),u(E);let M=c([E,...e.classList.contains("driver-dummy-element")?[]:[e]]);M.length>0&&M[0].focus()}function C(){let e=m("popover");if(!(null!=e&&e.wrapper))return;let t=e.wrapper.getBoundingClientRect(),n=a("stagePadding")||0,i=a("popoverOffset")||0;return{width:t.width+n+i,height:t.height+n+i,realWidth:t.width,realHeight:t.height}}function T(e,t){let{elementDimensions:n,popoverDimensions:i,popoverPadding:s,popoverArrowDimensions:r}=t;return"start"===e?Math.max(Math.min(n.top-s,window.innerHeight-i.realHeight-r.width),r.width):"end"===e?Math.max(Math.min(n.top-(null==i?void 0:i.realHeight)+n.height+s,window.innerHeight-(null==i?void 0:i.realHeight)-r.width),r.width):"center"===e?Math.max(Math.min(n.top+n.height/2-(null==i?void 0:i.realHeight)/2,window.innerHeight-(null==i?void 0:i.realHeight)-r.width),r.width):0}function E(e,t){let{elementDimensions:n,popoverDimensions:i,popoverPadding:s,popoverArrowDimensions:r}=t;return"start"===e?Math.max(Math.min(n.left-s,window.innerWidth-i.realWidth-r.width),r.width):"end"===e?Math.max(Math.min(n.left-(null==i?void 0:i.realWidth)+n.width+s,window.innerWidth-(null==i?void 0:i.realWidth)-r.width),r.width):"center"===e?Math.max(Math.min(n.left+n.width/2-(null==i?void 0:i.realWidth)/2,window.innerWidth-(null==i?void 0:i.realWidth)-r.width),r.width):0}function A(e,t){let n=m("popover");if(!n)return;let{align:i="start",side:s="left"}=(null==t?void 0:t.popover)||{},r="driver-dummy-element"===e.id?"over":s,l=a("stagePadding")||0,o=C(),d=n.arrow.getBoundingClientRect(),c=e.getBoundingClientRect(),u=c.top-o.height,p=u>=0,v=window.innerHeight-(c.bottom+o.height),h=v>=0,g=c.left-o.width,x=g>=0,f=window.innerWidth-(c.right+o.width),b=f>=0,w=!p&&!h&&!x&&!b,j=r;if("top"===r&&p?b=x=h=!1:"bottom"===r&&h?b=x=p=!1:"left"===r&&x?b=p=h=!1:"right"===r&&b&&(x=p=h=!1),"over"===r){let e=window.innerWidth/2-o.realWidth/2,t=window.innerHeight/2-o.realHeight/2;n.wrapper.style.left=`${e}px`,n.wrapper.style.right="auto",n.wrapper.style.top=`${t}px`,n.wrapper.style.bottom="auto"}else if(w){let e=window.innerWidth/2-(null==o?void 0:o.realWidth)/2;n.wrapper.style.left=`${e}px`,n.wrapper.style.right="auto",n.wrapper.style.bottom="10px",n.wrapper.style.top="auto"}else if(x){let e=Math.min(g,window.innerWidth-(null==o?void 0:o.realWidth)-d.width),t=T(i,{elementDimensions:c,popoverDimensions:o,popoverPadding:l,popoverArrowDimensions:d});n.wrapper.style.left=`${e}px`,n.wrapper.style.top=`${t}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",j="left"}else if(b){let e=Math.min(f,window.innerWidth-(null==o?void 0:o.realWidth)-d.width),t=T(i,{elementDimensions:c,popoverDimensions:o,popoverPadding:l,popoverArrowDimensions:d});n.wrapper.style.right=`${e}px`,n.wrapper.style.top=`${t}px`,n.wrapper.style.bottom="auto",n.wrapper.style.left="auto",j="right"}else if(p){let e=Math.min(u,window.innerHeight-o.realHeight-d.width),t=E(i,{elementDimensions:c,popoverDimensions:o,popoverPadding:l,popoverArrowDimensions:d});n.wrapper.style.top=`${e}px`,n.wrapper.style.left=`${t}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",j="top"}else if(h){let e=Math.min(v,window.innerHeight-(null==o?void 0:o.realHeight)-d.width),t=E(i,{elementDimensions:c,popoverDimensions:o,popoverPadding:l,popoverArrowDimensions:d});n.wrapper.style.left=`${t}px`,n.wrapper.style.bottom=`${e}px`,n.wrapper.style.top="auto",n.wrapper.style.right="auto",j="bottom"}w?n.arrow.classList.add("driver-popover-arrow-none"):function(e,t,n){let i=m("popover");if(!i)return;let s=n.getBoundingClientRect(),r=C(),l=i.arrow,o=r.width,d=window.innerWidth,c=s.width,u=s.left,p=r.height,v=window.innerHeight,h=s.top,g=s.height;l.className="driver-popover-arrow";let x=t,f=e;if("top"===t?(u+c<=0?(x="right",f="end"):u+c-o<=0&&(x="top",f="start"),u>=d?(x="left",f="end"):u+o>=d&&(x="top",f="end")):"bottom"===t?(u+c<=0?(x="right",f="start"):u+c-o<=0&&(x="bottom",f="start"),u>=d?(x="left",f="start"):u+o>=d&&(x="bottom",f="end")):"left"===t?(h+g<=0?(x="bottom",f="end"):h+g-p<=0&&(x="left",f="start"),h>=v?(x="top",f="end"):h+p>=v&&(x="left",f="end")):"right"===t&&(h+g<=0?(x="bottom",f="start"):h+g-p<=0&&(x="right",f="start"),h>=v?(x="top",f="start"):h+p>=v&&(x="right",f="end")),x){l.classList.add(`driver-popover-arrow-side-${x}`),l.classList.add(`driver-popover-arrow-align-${f}`);let e=n.getBoundingClientRect(),s=l.getBoundingClientRect(),r=a("stagePadding")||0,o=e.left-r<window.innerWidth&&e.right+r>0&&e.top-r<window.innerHeight&&e.bottom+r>0;"bottom"===t&&o&&(s.x>e.x&&s.x+s.width<e.x+e.width?i.wrapper.style.transform="translateY(0)":(l.classList.remove(`driver-popover-arrow-align-${f}`),l.classList.add("driver-popover-arrow-none"),i.wrapper.style.transform=`translateY(-${r/2}px)`))}else l.classList.add("driver-popover-arrow-none")}(i,j,e)}function k(e={}){function t(){a("allowClose")&&h()}function n(){let e=a("overlayClickBehavior");if(a("allowClose")&&"close"===e)return void h();if("function"==typeof e){let t=m("__activeStep");e(m("__activeElement"),t,{config:a(),state:m(),driver:s});return}"nextStep"===e&&i()}function i(){let e=m("activeIndex"),t=a("steps")||[];if(void 0===e)return;let n=e+1;t[n]?v(n):h()}function o(){let e=m("activeIndex"),t=a("steps")||[];if(void 0===e)return;let n=e-1;t[n]?v(n):h()}function d(){var e;if(m("__transitionCallback"))return;let t=m("activeIndex"),n=m("__activeStep"),i=m("__activeElement");if(void 0===t||void 0===n||void 0===m("activeIndex"))return;let r=(null==(e=n.popover)?void 0:e.onPrevClick)||a("onPrevClick");if(r)return r(i,n,{config:a(),state:m(),driver:s});o()}function c(){var e;if(m("__transitionCallback"))return;let t=m("activeIndex"),n=m("__activeStep"),r=m("__activeElement");if(void 0===t||void 0===n)return;let l=(null==(e=n.popover)?void 0:e.onNextClick)||a("onNextClick");if(l)return l(r,n,{config:a(),state:m(),driver:s});i()}function u(){m("isInitialized")||(p.isInitialized=!0,document.body.classList.add("driver-active",a("animate")?"driver-fade":"driver-simple"),window.addEventListener("keyup",j,!1),window.addEventListener("keydown",w,!1),window.addEventListener("resize",b),window.addEventListener("scroll",b),l.overlayClick=n,l.escapePress=t,l.arrowLeftPress=d,l.arrowRightPress=c)}function v(e=0){var t,n,i,s,r,l,o,d,c;let u=a("steps");if(!u){console.error("No steps to drive through"),h();return}if(!u[e])return void h();c=document.activeElement,p.__activeOnDestroyed=c,p.activeIndex=e;let m=u[e],g=u[e+1],f=u[e-1],b=(null==(t=m.popover)?void 0:t.doneBtnText)||a("doneBtnText")||"Done",w=a("allowClose"),j=void 0!==(null==(n=m.popover)?void 0:n.showProgress)?null==(i=m.popover)?void 0:i.showProgress:a("showProgress"),y=((null==(s=m.popover)?void 0:s.progressText)||a("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${e+1}`).replace("{{total}}",`${u.length}`),N=(null==(r=m.popover)?void 0:r.showButtons)||a("showButtons"),C=["next","previous",...w?["close"]:[]].filter(e=>!(null!=N&&N.length)||N.includes(e)),T=(null==(l=m.popover)?void 0:l.onNextClick)||a("onNextClick"),E=(null==(o=m.popover)?void 0:o.onPrevClick)||a("onPrevClick"),A=(null==(d=m.popover)?void 0:d.onCloseClick)||a("onCloseClick");x({...m,popover:{showButtons:C,nextBtnText:g?void 0:b,disableButtons:[...f?[]:["previous"]],showProgress:j,progressText:y,onNextClick:T||(()=>{g?v(e+1):h()}),onPrevClick:E||(()=>{v(e-1)}),onCloseClick:A||(()=>{h()}),...(null==m?void 0:m.popover)||{}}})}function h(e=!0){var t;let n=m("__activeElement"),i=m("__activeStep"),r=m("__activeOnDestroyed"),o=a("onDestroyStarted");if(e&&o)return void o(n&&(null==n?void 0:n.id)!=="driver-dummy-element"?n:void 0,i,{config:a(),state:m(),driver:s});let d=(null==i?void 0:i.onDeselected)||a("onDeselected"),c=a("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),window.removeEventListener("keyup",j),window.removeEventListener("resize",b),window.removeEventListener("scroll",b),function(){var e;let t=m("popover");t&&(null==(e=t.wrapper.parentElement)||e.removeChild(t.wrapper))}(),null==(t=document.getElementById("driver-dummy-element"))||t.remove(),document.querySelectorAll(".driver-active-element").forEach(e=>{e.classList.remove("driver-active-element","driver-no-interaction"),e.removeAttribute("aria-haspopup"),e.removeAttribute("aria-expanded"),e.removeAttribute("aria-controls")}),function(){let e=m("__overlaySvg");e&&e.remove()}(),l={},p={},n&&i){let e="driver-dummy-element"===n.id;d&&d(e?void 0:n,i,{config:a(),state:m(),driver:s}),c&&c(e?void 0:n,i,{config:a(),state:m(),driver:s})}r&&r.focus()}r(e);let g={isActive:()=>m("isInitialized")||!1,refresh:b,drive:(e=0)=>{u(),v(e)},setConfig:r,setSteps:e=>{p={},r({...a(),steps:e})},getConfig:a,getState:m,getActiveIndex:()=>m("activeIndex"),isFirstStep:()=>0===m("activeIndex"),isLastStep:()=>{let e=a("steps")||[],t=m("activeIndex");return void 0!==t&&t===e.length-1},getActiveStep:()=>m("activeStep"),getActiveElement:()=>m("activeElement"),getPreviousElement:()=>m("previousElement"),getPreviousStep:()=>m("previousStep"),moveNext:i,movePrevious:o,moveTo:function(e){(a("steps")||[])[e]?v(e):h()},hasNextStep:()=>{let e=a("steps")||[],t=m("activeIndex");return void 0!==t&&!!e[t+1]},hasPreviousStep:()=>{let e=a("steps")||[],t=m("activeIndex");return void 0!==t&&!!e[t-1]},highlight:e=>{u(),x({...e,popover:e.popover?{showButtons:[],showProgress:!1,progressText:"",...e.popover}:void 0})},destroy:()=>{h(!1)}};return s=g,g}},91761:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});let i=(0,n(71847).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])}},e=>{e.O(0,[4896,6143,541,240,5004,277,547,5707,2110,8234,2619,4001,3409,1204,9360,1163,550,1130,7117,2303,4419,7770,6362,9829,3161,2596,5181,5657,4802,4729,2816,6784,1279,1382,4960,8441,1255,7358],()=>e(e.s=13172)),_N_E=e.O()}]);