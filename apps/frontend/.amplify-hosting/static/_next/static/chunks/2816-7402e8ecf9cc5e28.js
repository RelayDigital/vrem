"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2816],{25890:(e,t,a)=>{a.d(t,{o:()=>z});var s=a(95155),r=a(67812),n=a(97003),i=a(33884),l=a(95664),d=a(60890),o=a(54255),c=a(26397),u=a(6132),m=a(56154),g=a(26983),p=a(93499),h=a(16485),x=a(61362),b=a(52987),f=a(81130),v=a(94876),j=a(82180),y=a(71163),N=a(25016),w=a(83209),k=a(73344),C=a(53594),A=a(12115);let _=e=>{let{status:t,jobId:a,className:r}=e,n=(e=>{switch(e){case"pending":return{base:"bg-amber-100 dark:bg-amber-900",primary:"bg-amber-400/60",secondary:"bg-orange-400/50",accent:"bg-yellow-300/45",highlight:"bg-amber-500/40"};case"assigned":return{base:"bg-blue-100 dark:bg-blue-900",primary:"bg-blue-400/60",secondary:"bg-indigo-400/50",accent:"bg-cyan-300/45",highlight:"bg-blue-500/40"};case"in_progress":return{base:"bg-violet-100 dark:bg-violet-900",primary:"bg-violet-400/60",secondary:"bg-purple-400/50",accent:"bg-fuchsia-300/45",highlight:"bg-indigo-500/40"};case"editing":return{base:"bg-pink-100 dark:bg-pink-900",primary:"bg-pink-400/60",secondary:"bg-rose-400/50",accent:"bg-fuchsia-300/45",highlight:"bg-pink-500/40"};case"delivered":return{base:"bg-emerald-100 dark:bg-emerald-900",primary:"bg-emerald-400/60",secondary:"bg-teal-400/50",accent:"bg-green-300/45",highlight:"bg-emerald-500/40"};default:return{base:"bg-slate-200 dark:bg-slate-800",primary:"bg-slate-400/60",secondary:"bg-gray-400/50",accent:"bg-zinc-300/45",highlight:"bg-slate-500/40"}}})(t),i=(0,A.useMemo)(()=>{let e=(e=>{let t=0;for(let a=0;a<e.length;a++){let s=e.charCodeAt(a);t=(t<<5)-t+s,t&=t}return()=>(t=((t=Math.imul((t=Math.imul(t^t>>>16,0x85ebca6b))^t>>>13,0xc2b2ae35))^t>>>16)>>>0)%1e3/1e3})(a),t=()=>({top:"".concat(-30+80*e(),"%"),left:"".concat(-30+80*e(),"%")});return{blob1:{...t(),width:"".concat(65+15*e(),"%"),height:"".concat(65+15*e(),"%")},blob2:{...t(),width:"".concat(60+15*e(),"%"),height:"".concat(60+15*e(),"%")},blob3:{...t(),width:"".concat(40+15*e(),"%"),height:"".concat(40+15*e(),"%")},blob4:{...t(),width:"".concat(25+12*e(),"%"),height:"".concat(25+12*e(),"%")},rotation1:60*e(),rotation2:60*e(),rotation3:60*e(),rotation4:60*e()}},[a]);return(0,s.jsxs)("div",{className:(0,N.cn)("absolute inset-0 overflow-hidden",n.base,r),children:[(0,s.jsx)("div",{className:(0,N.cn)("absolute rounded-full blur-3xl",n.primary),style:{top:i.blob1.top,left:i.blob1.left,width:i.blob1.width,height:i.blob1.height,transform:"rotate(".concat(i.rotation1,"deg)")}}),(0,s.jsx)("div",{className:(0,N.cn)("absolute rounded-full blur-3xl",n.secondary),style:{top:i.blob2.top,left:i.blob2.left,width:i.blob2.width,height:i.blob2.height,transform:"rotate(".concat(i.rotation2,"deg)")}}),(0,s.jsx)("div",{className:(0,N.cn)("absolute rounded-full blur-2xl",n.accent),style:{top:i.blob3.top,left:i.blob3.left,width:i.blob3.width,height:i.blob3.height,transform:"rotate(".concat(i.rotation3,"deg)")}}),(0,s.jsx)("div",{className:(0,N.cn)("absolute rounded-full blur-2xl",n.highlight),style:{top:i.blob4.top,left:i.blob4.left,width:i.blob4.width,height:i.blob4.height,transform:"rotate(".concat(i.rotation4,"deg)")}})]})};function z(e){var t,a,A;let{job:z,technician:T,currentUserAccountType:D,onViewRankings:S,onClick:I,onViewInProjectManagement:P,selected:M,horizontal:R=!1,hideRequirements:E=!1}=e,F=e=>{switch(e){case"photo":default:return l.A;case"video":return d.A;case"aerial":return o.A;case"twilight":return c.A}},q={projectManagerId:null!=(t=z.projectManagerId)?t:void 0,technicianId:null!=(a=z.assignedTechnicianId)?a:void 0,editorId:null!=(A=z.editorId)?A:void 0},{canAssignTechnician:V}=(0,C.FT)(q),L=(e=>{switch(e){case"urgent":return{priority:"urgent",icon:u.A,label:"Urgent"};case"rush":return{priority:"rush",icon:m.A,label:"Rush"};default:return{priority:"standard",icon:g.A,label:"Standard"}}})(z.priority),$=(e=>{switch(e){case"pending":return{label:"Pending",status:"pending"};case"assigned":return{label:"Assigned",status:"assigned"};case"in_progress":return{label:"In Progress",status:"in_progress"};case"editing":return{label:"Editing",status:"editing"};case"delivered":return{label:"Delivered",status:"delivered"};case"cancelled":return{label:"Cancelled",status:"cancelled"};default:return{label:e,status:"default"}}})(z.status),G=L.icon,O=z.scheduledDate;try{let[e,t,a]=z.scheduledDate.split("-").map(Number),s=new Date(e,t-1,a);isNaN(s.getTime())||(O=(0,y.GP)(s,"MMM d, yyyy"))}catch(e){}return R?(0,s.jsx)(f.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-2},transition:{duration:.2},className:"h-full",children:(0,s.jsxs)(w.Zp,{className:(0,N.cn)("group relative bg-transparent rounded-md border-none overflow-hidden transition-all duration-200 w-full h-40",I?"cursor-pointer":"",M&&"ring-0"),onClick:I,children:[(0,s.jsx)("div",{className:"absolute inset-0",children:z.propertyImage&&"delivered"===z.status?(0,s.jsx)(v.oX,{src:z.propertyImage,alt:z.propertyAddress,className:"size-full object-cover group-hover:scale-[1.02] transition-transform duration-300"}):(0,s.jsx)(_,{status:z.status,jobId:z.id,className:"group-hover:scale-[1.02] transition-transform duration-300 pointer-events-none"})}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-card/90 via-card/70 to-transparent"}),(0,s.jsxs)("div",{className:"relative z-10 flex flex-col justify-between h-full p-3",children:[(0,s.jsxs)("div",{className:"relative flex items-start justify-between gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5 h-full",children:[(0,s.jsxs)(r.E,{variant:"secondary",className:(0,N.cn)("flex items-center gap-1 rounded-full backdrop-blur-md! bg-card/60! group-hover:bg-card! transition-colors duration-200","urgent"===L.priority&&"bg-priority-urgent/10 text-priority-urgent","rush"===L.priority&&"bg-priority-rush/10 text-priority-rush","standard"===L.priority&&"bg-priority-standard/10 text-priority-standard"),children:[(0,s.jsx)(G,{className:(0,N.cn)("size-3","urgent"===L.priority&&"text-priority-urgent","rush"===L.priority&&"text-priority-rush","standard"===L.priority&&"text-priority-standard")}),(0,s.jsx)("span",{className:(0,N.cn)("text-[10px] font-medium","urgent"===L.priority&&"text-priority-urgent","rush"===L.priority&&"text-priority-rush","standard"===L.priority&&"text-priority-standard"),children:L.label})]}),z.orderNumber&&(0,s.jsx)(r.E,{variant:"secondary",className:(0,N.cn)("rounded-full backdrop-blur-md! bg-card/60! group-hover:bg-card! transition-colors duration-200","urgent"===L.priority&&"bg-priority-urgent/10 text-priority-urgent","rush"===L.priority&&"bg-priority-rush/10 text-priority-rush","standard"===L.priority&&"bg-priority-standard/10 text-priority-standard"),children:(0,s.jsxs)("span",{className:"text-[10px] font-medium",children:["#",z.orderNumber]})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsxs)(r.E,{variant:"secondary",className:"flex items-center gap-1.5 rounded-full backdrop-blur-md! bg-card/60! group-hover:bg-card! transition-colors duration-200",children:[(0,s.jsx)("div",{className:(0,N.cn)("size-1.5 rounded-full","pending"===$.status&&"bg-status-pending","assigned"===$.status&&"bg-status-assigned","in_progress"===$.status&&"bg-status-in-progress","editing"===$.status&&"bg-status-editing","delivered"===$.status&&"bg-status-delivered",("cancelled"===$.status||"default"===$.status)&&"bg-status-cancelled")}),(0,s.jsx)("span",{className:(0,N.cn)("text-[10px] font-medium","pending"===$.status&&"text-status-pending","assigned"===$.status&&"text-status-assigned","in_progress"===$.status&&"text-status-in-progress","editing"===$.status&&"text-status-editing","delivered"===$.status&&"text-status-delivered",("cancelled"===$.status||"default"===$.status)&&"text-status-cancelled"),children:$.label})]}),P&&(0,s.jsxs)(r.E,{onClick:e=>{e.stopPropagation(),P()},className:"items-center gap-1.5 rounded-full px-1! bg-primary/10! text-primary-foreground hidden! group-hover:block! hover:bg-primary/50! active:bg-primary/80 active:scale-[0.97]",children:[(0,s.jsx)(p.A,{className:"size-3 text-primary-foreground"}),(0,s.jsx)("span",{className:"sr-only",children:"View in job management"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)(j.m_,{children:[(0,s.jsx)(j.k$,{asChild:!0,children:(0,s.jsx)("h3",{className:"text-sm font-semibold text-foreground leading-tight line-clamp-1",children:z.propertyAddress})}),(0,s.jsx)(j.ZI,{side:"top",className:"max-w-xs",children:(0,s.jsx)(k.P,{className:"wrap-break-word",children:z.propertyAddress})})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:z.clientName}),(0,s.jsxs)("div",{className:"flex items-center justify-between pt-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[(0,s.jsxs)("div",{className:"inline-flex items-center gap-1",children:[(0,s.jsx)(h.A,{className:"size-3"}),(0,s.jsx)("span",{children:O})]}),(0,s.jsxs)("div",{className:"inline-flex items-center gap-1",children:[(0,s.jsx)(g.A,{className:"size-3"}),(0,s.jsx)("span",{children:z.scheduledTime})]})]}),(0,s.jsx)("div",{className:"flex items-center gap-1.5",children:z.mediaType.map(e=>{let t=F(e);return(0,s.jsxs)(j.m_,{children:[(0,s.jsx)(j.k$,{asChild:!0,children:(0,s.jsx)("div",{className:"p-1 rounded-full backdrop-blur-md! bg-card/60! group-hover:bg-card! transition-colors duration-200",children:(0,s.jsx)(t,{className:"size-3 text-muted-foreground"})})}),(0,s.jsx)(j.ZI,{side:"top",className:"capitalize",children:e})]},e)})})]})]})]})]})}):(0,s.jsx)(f.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-2},transition:{duration:.2},className:(0,N.cn)("h-full cursor-pointer!"),children:(0,s.jsxs)(w.Zp,{className:(0,N.cn)("group relative flex flex-col bg-transparent rounded-md border-none overflow-hidden transition-all duration-200 size-full"),onClick:I,children:[(0,s.jsxs)(w.aR,{className:"relative flex flex-col justify-between w-full aspect-video shrink-0 overflow-hidden p-2! rounded-b-md",children:[z.propertyImage&&"delivered"===z.status?(0,s.jsx)(v.oX,{src:z.propertyImage,alt:z.propertyAddress,className:"size-full object-cover absolute top-0 left-0 pointer-events-none group-hover:scale-[1.04] transition-transform duration-200"}):(0,s.jsx)(_,{status:z.status,jobId:z.id,className:"group-hover:scale-[1.04] transition-transform duration-300 pointer-events-none"}),(0,s.jsxs)("div",{className:"flex relative w-full z-10",children:[(0,s.jsxs)(r.E,{variant:"secondary",className:(0,N.cn)("flex items-center rounded-full backdrop-blur-md! bg-card/60! group-hover:bg-card! transition-colors duration-200","urgent"===L.priority&&"bg-priority-urgent/10 text-priority-urgent","rush"===L.priority&&"bg-priority-rush/10 text-priority-rush","standard"===L.priority&&"bg-priority-standard/10 text-priority-standard"),children:[(0,s.jsx)(G,{className:(0,N.cn)("size-3.5","urgent"===L.priority&&"text-priority-urgent","rush"===L.priority&&"text-priority-rush","standard"===L.priority&&"text-priority-standard")}),(0,s.jsx)("span",{className:(0,N.cn)("text-[11px] font-medium hidden sm:inline","urgent"===L.priority&&"text-priority-urgent","rush"===L.priority&&"text-priority-rush","standard"===L.priority&&"text-priority-standard"),children:L.label})]}),z.orderNumber&&(0,s.jsx)(r.E,{variant:"secondary",className:(0,N.cn)("flex items-center rounded-full backdrop-blur-md! bg-card/60! group-hover:bg-card! transition-colors duration-200","urgent"===L.priority&&"bg-priority-urgent/10 text-priority-urgent","rush"===L.priority&&"bg-priority-rush/10 text-priority-rush","standard"===L.priority&&"bg-priority-standard/10 text-priority-standard"),children:(0,s.jsxs)("span",{className:"text-[11px] font-medium",children:["#",z.orderNumber]})}),P&&(0,s.jsx)("div",{className:"flex absolute right-0 z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:(0,s.jsxs)(n.$,{size:"icon",className:"rounded-full bg-primary text-primary-foreground hover:bg-primary/90 active:bg-primary/80 active:scale-[0.97]",onClick:e=>{e.stopPropagation(),P()},children:[(0,s.jsx)(p.A,{className:"size-3.5"}),(0,s.jsx)("span",{className:"sr-only",children:"View in job management"})]})})]}),(T||V)&&(0,s.jsx)("div",{className:"flex z-10 self-center w-full",children:T?(0,s.jsxs)("div",{className:"flex items-center gap-3 pl-1 pr-3 py-1 backdrop-blur-md! bg-card/60! group-hover:bg-card! transition-colors duration-200 rounded-full max-w-[80%] mx-auto h-auto",children:[(0,s.jsxs)(i.eu,{className:"size-8",children:[(0,s.jsx)(i.BK,{src:T.avatar,alt:T.name}),(0,s.jsx)(i.q5,{className:"bg-muted-foreground/20 text-foreground text-xs",children:T.name.split(" ").map(e=>e[0]).join("")})]}),(0,s.jsx)("div",{className:"flex flex-col gap-0.5 min-w-0 flex-1",children:(0,s.jsxs)("div",{className:"inline-flex items-center gap-1.5",children:[(0,s.jsx)("span",{className:"text-sm font-semibold leading-[1.4] text-foreground truncate",children:T.name}),(0,s.jsx)(x.A,{className:"h-3.5 w-3.5 text-primary shrink-0"})]})})]}):V&&S&&(0,s.jsxs)(n.$,{onClick:e=>{e.stopPropagation(),S()},className:"w-full h-auto max-w-[80%] mx-auto px-4 py-2.5 bg-primary text-primary-foreground rounded-3xl shadow-lg hover:bg-primary/90 border-0",children:[(0,s.jsx)("span",{className:"text-sm font-semibold",children:"Find Technician"}),(0,s.jsx)(b.A,{className:"size-4 ml-2"})]})})]}),(0,s.jsxs)(w.Wu,{className:"px-4! py-4! flex flex-col gap-2 relative",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between w-full gap-2",children:[(0,s.jsxs)(r.E,{variant:"flat",className:"flex items-center gap-1.5 mb-1 px-0",children:[(0,s.jsx)("div",{className:(0,N.cn)("size-1.5 rounded-full","pending"===$.status&&"bg-status-pending","assigned"===$.status&&"bg-status-assigned","in_progress"===$.status&&"bg-status-in-progress","editing"===$.status&&"bg-status-editing","delivered"===$.status&&"bg-status-delivered",("cancelled"===$.status||"default"===$.status)&&"bg-status-cancelled")}),(0,s.jsx)("span",{className:(0,N.cn)("text-[13px] font-medium leading-[1.4]","pending"===$.status&&"text-status-pending","assigned"===$.status&&"text-status-assigned","in_progress"===$.status&&"text-status-in-progress","editing"===$.status&&"text-status-editing","delivered"===$.status&&"text-status-delivered",("cancelled"===$.status||"default"===$.status)&&"text-status-cancelled"),children:$.label})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:z.mediaType.map(e=>{let t=F(e);return(0,s.jsx)("div",{className:"inline-flex items-center gap-1",children:(0,s.jsxs)(j.m_,{children:[(0,s.jsx)(j.k$,{asChild:!0,children:(0,s.jsx)(t,{className:"h-4 w-4 text-muted-foreground"})}),(0,s.jsx)(j.ZI,{side:"top",className:"max-w-xs capitalize",children:e})]})},e)})})]}),(0,s.jsxs)("div",{className:"space-y-1 mb-2",children:[(0,s.jsx)(k.P,{className:"text-[13px] leading-[1.4] text-muted-foreground line-clamp-2",children:z.propertyAddress}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:z.clientName})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,s.jsxs)("div",{className:"inline-flex items-center gap-1.5",children:[(0,s.jsx)(h.A,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-[13px] leading-[1.4] text-muted-foreground",children:O})]}),(0,s.jsxs)("div",{className:"inline-flex items-center gap-1.5",children:[(0,s.jsx)(g.A,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-[13px] leading-[1.4] text-muted-foreground",children:z.scheduledTime})]})]}),!E&&z.requirements&&(0,s.jsx)("div",{className:"mt-2 pt-2 border-t border-border",children:(0,s.jsx)(k.P,{className:"text-[13px] leading-[1.4] text-muted-foreground line-clamp-2",children:z.requirements})})]})]})})}},32559:(e,t,a)=>{a.d(t,{Fc:()=>l,TN:()=>o,XL:()=>d});var s=a(95155);a(12115);var r=a(83101),n=a(64936);let i=(0,r.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,n.cn)(i({variant:a}),t),...r})}function d(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-title",className:(0,n.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),...a})}function o(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-description",className:(0,n.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...a})}},43123:(e,t,a)=>{a.d(t,{O:()=>o,d:()=>c});var s=a(95155),r=a(12115),n=a(3203),i=a(64936);let l=(0,a(83101).F)("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.createContext({size:"default",variant:"default"});function o(e){let{className:t,variant:a,size:r,children:l,...o}=e;return(0,s.jsx)(n.bL,{"data-slot":"toggle-group","data-variant":a,"data-size":r,className:(0,i.cn)("group/toggle-group flex w-fit items-center rounded-md data-[variant=outline]:shadow-xs",t),...o,children:(0,s.jsx)(d.Provider,{value:{variant:a,size:r},children:l})})}function c(e){let{className:t,children:a,variant:o,size:c,...u}=e,m=r.useContext(d);return(0,s.jsx)(n.q7,{"data-slot":"toggle-group-item","data-variant":m.variant||o,"data-size":m.size||c,className:(0,i.cn)(l({variant:m.variant||o,size:m.size||c}),"min-w-0 flex-1 shrink-0 rounded-none shadow-none first:rounded-l-md last:rounded-r-md focus:z-10 focus-visible:z-10 data-[variant=outline]:border-l-0 data-[variant=outline]:first:border-l",t),...u,children:a})}},51631:(e,t,a)=>{a.d(t,{Eb:()=>g,Iu:()=>c,M_:()=>h,WA:()=>p,cU:()=>u,dK:()=>o,n$:()=>m});var s=a(95155);a(12115);var r=a(90368),n=a(27937),i=a(37772),l=a(64936),d=a(97003);function o(e){let{className:t,...a}=e;return(0,s.jsx)("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:(0,l.cn)("mx-auto flex w-full justify-center",t),...a})}function c(e){let{className:t,...a}=e;return(0,s.jsx)("ul",{"data-slot":"pagination-content",className:(0,l.cn)("flex flex-row items-center gap-1",t),...a})}function u(e){let{...t}=e;return(0,s.jsx)("li",{"data-slot":"pagination-item",...t})}function m(e){let{className:t,isActive:a,size:r="icon",...n}=e;return(0,s.jsx)("a",{"aria-current":a?"page":void 0,"data-slot":"pagination-link","data-active":a,className:(0,l.cn)((0,d.r)({variant:a?"outline":"ghost",size:r}),t),...n})}function g(e){let{className:t,...a}=e;return(0,s.jsxs)(m,{"aria-label":"Go to previous page",size:"default",className:(0,l.cn)("gap-1 px-2.5 sm:pl-2.5",t),...a,children:[(0,s.jsx)(r.A,{}),(0,s.jsx)("span",{className:"hidden sm:block",children:"Previous"})]})}function p(e){let{className:t,...a}=e;return(0,s.jsxs)(m,{"aria-label":"Go to next page",size:"default",className:(0,l.cn)("gap-1 px-2.5 sm:pr-2.5",t),...a,children:[(0,s.jsx)("span",{className:"hidden sm:block",children:"Next"}),(0,s.jsx)(n.A,{})]})}function h(e){let{className:t,...a}=e;return(0,s.jsxs)("span",{"aria-hidden":!0,"data-slot":"pagination-ellipsis",className:(0,l.cn)("flex size-9 items-center justify-center",t),...a,children:[(0,s.jsx)(i.A,{className:"size-4"}),(0,s.jsx)("span",{className:"sr-only",children:"More pages"})]})}},53594:(e,t,a)=>{a.d(t,{FT:()=>l,q1:()=>d});var s=a(12115),r=a(65939),n=a(76457);function i(e,t){var a;if(!t)return"NONE";let s=e.find(e=>e.orgId===t);if(!s)return"NONE";if("PERSONAL"===(null==(a=s.organization)?void 0:a.type))return"PERSONAL_OWNER";let r=s.orgRole||s.role;return r||"NONE"}function l(e){let{user:t,memberships:a,activeOrganizationId:l}=(0,r.A)();return(0,s.useMemo)(()=>{var s;let r=i(a,l),d=null!=(s=null==t?void 0:t.id)?s:null;return(0,n.Ib)(r,e,d)},[null==t?void 0:t.id,a,l,null==e?void 0:e.projectManagerId,null==e?void 0:e.technicianId,null==e?void 0:e.editorId])}function d(){let{user:e,memberships:t,activeOrganizationId:a}=(0,r.A)();return(0,s.useMemo)(()=>{var s;let r=i(t,a);return{canManageCustomers:(0,n.lN)(r),canViewCustomers:(0,n.BO)(r),canCreateOrder:(0,n.$K)(r),isAdmin:(0,n.qc)(r),effectiveRole:r,userId:null!=(s=null==e?void 0:e.id)?s:null}},[null==e?void 0:e.id,t,a])}},55725:(e,t,a)=>{a.d(t,{V:()=>h});var s=a(3648),r=a(95155),n=a(12115),i=a(90368),l=a(27937),d=a(24033),o=a(74854),c=a(52111),u=a(25016),m=a(97003);function g(){let e=(0,s._)(["rtl:**:[.rdp-button_next>svg]:rotate-180"],["rtl:**:[.rdp-button\\_next>svg]:rotate-180"]);return g=function(){return e},e}function p(){let e=(0,s._)(["rtl:**:[.rdp-button_previous>svg]:rotate-180"],["rtl:**:[.rdp-button\\_previous>svg]:rotate-180"]);return p=function(){return e},e}function h(e){let{className:t,classNames:a,showOutsideDays:s=!0,captionLayout:n="label",buttonVariant:h="ghost",formatters:b,components:f,...v}=e,j=(0,o.a)();return(0,r.jsx)(c.h,{showOutsideDays:s,className:(0,u.cn)("bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw(g()),String.raw(p()),t),captionLayout:n,formatters:{formatMonthDropdown:e=>e.toLocaleString("default",{month:"short"}),...b},classNames:{root:(0,u.cn)("w-fit",j.root),months:(0,u.cn)("flex gap-4 flex-col md:flex-row relative",j.months),month:(0,u.cn)("flex flex-col w-full gap-4",j.month),nav:(0,u.cn)("flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between",j.nav),button_previous:(0,u.cn)((0,m.r)({variant:h}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",j.button_previous),button_next:(0,u.cn)((0,m.r)({variant:h}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",j.button_next),month_caption:(0,u.cn)("flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)",j.month_caption),dropdowns:(0,u.cn)("w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5",j.dropdowns),dropdown_root:(0,u.cn)("relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md",j.dropdown_root),dropdown:(0,u.cn)("absolute bg-popover inset-0 opacity-0",j.dropdown),caption_label:(0,u.cn)("select-none font-medium","label"===n?"text-sm":"rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5",j.caption_label),table:"w-full border-collapse",weekdays:(0,u.cn)("flex",j.weekdays),weekday:(0,u.cn)("text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none",j.weekday),week:(0,u.cn)("flex w-full mt-2",j.week),week_number_header:(0,u.cn)("select-none w-(--cell-size)",j.week_number_header),week_number:(0,u.cn)("text-[0.8rem] select-none text-muted-foreground",j.week_number),day:(0,u.cn)("relative size-full p-0 text-center [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none",v.showWeekNumber?"[&:nth-child(2)[data-selected=true]_button]:rounded-l-md":"[&:first-child[data-selected=true]_button]:rounded-l-md",j.day),range_start:(0,u.cn)("rounded-l-md bg-accent",j.range_start),range_middle:(0,u.cn)("rounded-none",j.range_middle),range_end:(0,u.cn)("rounded-r-md bg-accent",j.range_end),today:(0,u.cn)("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",j.today),outside:(0,u.cn)("text-muted-foreground aria-selected:text-muted-foreground",j.outside),disabled:(0,u.cn)("text-muted-foreground opacity-50",j.disabled),hidden:(0,u.cn)("invisible",j.hidden),...a},components:{Root:e=>{let{className:t,rootRef:a,...s}=e;return(0,r.jsx)("div",{"data-slot":"calendar",ref:a,className:(0,u.cn)(t),...s})},Chevron:e=>{let{className:t,orientation:a,...s}=e;return"left"===a?(0,r.jsx)(i.A,{className:(0,u.cn)("size-4",t),...s}):"right"===a?(0,r.jsx)(l.A,{className:(0,u.cn)("size-4",t),...s}):(0,r.jsx)(d.A,{className:(0,u.cn)("size-4",t),...s})},DayButton:x,WeekNumber:e=>{let{children:t,...a}=e;return(0,r.jsx)("td",{...a,children:(0,r.jsx)("div",{className:"flex size-(--cell-size) items-center justify-center text-center",children:t})})},...f},...v})}function x(e){let{className:t,day:a,modifiers:s,...i}=e,l=(0,o.a)(),d=n.useRef(null);return n.useEffect(()=>{var e;s.focused&&(null==(e=d.current)||e.focus())},[s.focused]),(0,r.jsx)(m.$,{ref:d,variant:"ghost",size:"icon","data-day":a.date.toLocaleDateString(),"data-selected-single":s.selected&&!s.range_start&&!s.range_end&&!s.range_middle,"data-range-start":s.range_start,"data-range-end":s.range_end,"data-range-middle":s.range_middle,className:(0,u.cn)("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70",l.day,t),...i})}},62816:(e,t,a)=>{a.d(t,{oe:()=>s.o,WT:()=>O,bm:()=>z,RV:()=>C,Um:()=>G,rw:()=>q});var s=a(25890);a(71011);var r=a(95155),n=a(12115),i=a(97003),l=a(33789),d=a(90235),o=a(67001),c=a(47507),u=a(55725),m=a(97450),g=a(18720),p=a(71163),h=a(21873),x=a(35299),b=a(26983),f=a(56154),v=a(6132),j=a(16485),y=a(43123),N=a(86868),w=a(95657);function k(e){let{value:t,onChange:a,onBlur:s,isGeocoding:i}=e,[d,o]=(0,n.useState)(t),[c,u]=(0,n.useState)(!1),[m,g]=(0,n.useState)([]),[p,b]=(0,n.useState)(!1),f=(0,n.useRef)(null);(0,n.useEffect)(()=>{o(t)},[t]),(0,n.useEffect)(()=>{if(!d||d.length<3)return void g([]);let e="pk.eyJ1IjoiZHVyb2RwIiwiYSI6ImNtaHplcW53cDA4dHQycnB6dnhqeGtveXgifQ.6GR-s3V7vfGRsoVlhSTFhg";if(!e)return;b(!0);let t=setTimeout(()=>{fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(d),".json?access_token=").concat(e,"&types=address&country=us,ca&limit=5")).then(e=>{if(!e.ok)throw Error("Geocoding request failed");return e.json()}).then(e=>{b(!1),g(e.features||[])}).catch(e=>{console.error("Geocoding error:",e),b(!1),g([])})},300);return()=>clearTimeout(t)},[d]);let v=(0,n.useCallback)(e=>{o(e.place_name);let[t,s]=e.center;a(e.place_name,{lat:s,lng:t}),g([]),u(!1)},[a]);return(0,n.useEffect)(()=>{let e=e=>{f.current&&!f.current.contains(e.target)&&u(!1)};if(c)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[c]),(0,r.jsxs)("div",{ref:f,className:"relative",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(h.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground/60 z-10"}),(0,r.jsx)(l.p,{id:"propertyAddress",value:d,onChange:e=>{o(e.target.value),a(e.target.value,void 0)},onFocus:()=>u(!0),onBlur:s,placeholder:"Full street address including city and state",className:"pl-11 h-11"}),(p||i)&&(0,r.jsx)(x.A,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground animate-spin"})]}),c&&m.length>0&&(0,r.jsx)("div",{className:"absolute top-full mt-1 w-full bg-card rounded-lg border border-border shadow-lg z-50 max-h-60 overflow-y-auto",children:m.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>v(e),className:"w-full text-left p-3 hover:bg-muted transition-colors first:rounded-t-lg last:rounded-b-lg",children:(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)(h.A,{className:"h-4 w-4 text-muted-foreground mt-0.5 shrink-0"}),(0,r.jsx)("div",{className:"flex-1 min-w-0",children:(0,r.jsx)("div",{className:"text-sm text-foreground truncate",children:e.place_name})})]})},e.id))})]})}function C(e){let{onSubmit:t,initialValues:a}=e,[s,h]=(0,n.useState)({clientName:"",propertyAddress:"",location:void 0,scheduledDate:(null==a?void 0:a.scheduledDate)||"",scheduledTime:(null==a?void 0:a.scheduledTime)||"",mediaType:[],priority:"standard",estimatedDuration:(null==a?void 0:a.estimatedDuration)||120,requirements:""}),[C,A]=(0,n.useState)(!1),[_,z]=(0,n.useState)([]),[T,D]=(0,n.useState)(""),[S,I]=(0,n.useState)(null),[P,M]=(0,n.useState)(!1),[R,E]=(0,n.useState)(!1),[F,q]=(0,n.useState)(!1),[V,L]=(0,n.useState)({name:"",email:"",phone:""}),$=(0,n.useMemo)(()=>{let e=T.trim().toLowerCase();return e?_.filter(t=>{let a=(t.name||"").toLowerCase(),s=(t.email||"").toLowerCase();return a.includes(e)||s.includes(e)}):_},[_,T]),G=async e=>{let t="pk.eyJ1IjoiZHVyb2RwIiwiYSI6ImNtaHplcW53cDA4dHQycnB6dnhqeGtveXgifQ.6GR-s3V7vfGRsoVlhSTFhg";if(!t)return console.warn("Mapbox token not configured"),null;try{let a="https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(e),".json?access_token=").concat(t,"&types=address&country=us,ca&limit=1"),s=await fetch(a);if(!s.ok)throw Error("Geocoding request failed");let r=await s.json();if(r.features&&r.features.length>0){let e=r.features[0],[t,a]=e.center;return{lat:a,lng:t,placeName:e.place_name}}return null}catch(e){return console.error("Geocoding error:",e),null}},O=async()=>{if(!s.location&&s.propertyAddress.trim()){A(!0);let e=s.propertyAddress.trim(),t=await G(e);t&&h(e=>({...e,location:{lat:t.lat,lng:t.lng},propertyAddress:t.placeName})),A(!1)}},U=(0,n.useCallback)(async e=>{M(!0);try{let t=await w.F.customers.list(e);z(t)}catch(e){console.error("Failed to load customers",e),g.oR.error("Unable to load customers")}finally{M(!1)}},[]);(0,n.useEffect)(()=>{U()},[U]);let H=async()=>{await U(T||void 0)},J=e=>{I(e),h(t=>({...t,clientName:e.name})),E(!1)},B=async()=>{if(!V.name.trim())return void g.oR.error("Customer name is required");try{let e=await w.F.customers.create({name:V.name.trim(),email:V.email||void 0,phone:V.phone||void 0});if("customer_created"===e.type&&e.customer)z(t=>[e.customer,...t]),J(e.customer),L({name:"",email:"",phone:""}),g.oR.success("Customer added");else if("invitation_sent"===e.type)g.oR.success(e.message||"Invitation sent to ".concat(V.email)),L({name:"",email:"",phone:""}),E(!1);else if("invitation_pending"===e.type)g.oR.info(e.message||"An invitation is already pending for ".concat(V.email));else if(("existing_customer"===e.type||"existing_customer_linked"===e.type)&&e.customer){z(t=>t.some(t=>t.id===e.customer.id)?t:[e.customer,...t]),J(e.customer),L({name:"",email:"",phone:""});let t="existing_customer_linked"===e.type?"Customer linked to their account":"Customer already exists";g.oR.info(e.message||t)}}catch(e){console.error("Failed to create customer",e),g.oR.error("Unable to create customer")}},W=async e=>{if(e.preventDefault(),!s.clientName.trim()&&!S)return void g.oR.error("Please enter a client name");if(!s.propertyAddress.trim())return void g.oR.error("Please enter a property address");if(!s.scheduledDate)return void g.oR.error("Please select a scheduled date");if(!s.scheduledTime)return void g.oR.error("Please select a scheduled time");if(0===s.mediaType.length)return void g.oR.error("Please select at least one media type");let r=s.location,n=s.propertyAddress.trim(),i={unparsed_address:n};if(s.propertyAddress.trim()){let e=s.propertyAddress.trim();g.oR.loading("Geocoding address...",{id:"geocoding"});let t=await G(e);t?(r={lat:t.lat,lng:t.lng},n=t.placeName,i={...i,unparsed_address:t.placeName,latitude:t.lat,longitude:t.lng},g.oR.success("Address geocoded successfully",{id:"geocoding"})):r?g.oR.dismiss("geocoding"):(g.oR.error("Could not find location for this address. Using default location.",{id:"geocoding"}),r={lat:51.0447,lng:-114.0719},i={...i,latitude:r.lat,longitude:r.lng})}try{await t({clientName:((null==S?void 0:S.name)||s.clientName).trim(),customerId:null==S?void 0:S.id,propertyAddress:n,location:r,address:i,scheduledDate:s.scheduledDate,scheduledTime:s.scheduledTime,mediaType:s.mediaType,priority:s.priority,estimatedDuration:s.estimatedDuration,requirements:s.requirements.trim(),status:"pending"}),h({clientName:"",propertyAddress:"",location:void 0,scheduledDate:(null==a?void 0:a.scheduledDate)||"",scheduledTime:(null==a?void 0:a.scheduledTime)||"",mediaType:[],priority:"standard",estimatedDuration:(null==a?void 0:a.estimatedDuration)||120,requirements:""}),I(null)}catch(e){console.error("Error submitting form:",e)}},Z=[{value:"standard",label:"Standard",icon:b.A,color:"text-blue-600"},{value:"rush",label:"Rush (24h)",icon:f.A,color:"text-orange-600"},{value:"urgent",label:"Urgent (12h)",icon:v.A,color:"text-destructive"}];return(0,r.jsxs)("form",{onSubmit:W,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(d.J,{className:"text-sm",children:"Customer"}),(0,r.jsx)(i.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>E(e=>!e),children:R?"Cancel":"Add New"})]}),!R&&(0,r.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row",children:[(0,r.jsx)(l.p,{placeholder:"Search by name or email",value:T,onChange:e=>D(e.target.value),onFocus:()=>q(!0),onBlur:()=>{setTimeout(()=>q(!1),100)},className:"h-11"}),(0,r.jsx)(i.$,{type:"button",variant:"outline",className:"h-11",onClick:H,disabled:P,children:P?(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[(0,r.jsx)(x.A,{className:"h-4 w-4 animate-spin"}),"Searching"]}):"Search"})]}),F&&$.length>0&&(0,r.jsx)("div",{className:"flex flex-col gap-2 max-h-56 overflow-y-auto pr-1",children:$.map(e=>(0,r.jsx)(i.$,{type:"button",variant:(null==S?void 0:S.id)===e.id?"default":"outline",onMouseDown:t=>{t.preventDefault(),J(e),q(!1)},className:"justify-start h-auto py-2",children:(0,r.jsxs)("div",{className:"flex items-center gap-3 text-left w-full",children:[(0,r.jsx)("div",{className:"h-9 w-9 rounded-full bg-muted flex items-center justify-center text-xs font-semibold",children:(e.name||"").split(" ").map(e=>e[0]).join("").toUpperCase()}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"font-medium",children:e.name}),(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:e.email||"No email"})]})]})},e.id))}),S&&(0,r.jsxs)("div",{className:"rounded-md border bg-muted/30 px-3 py-2 text-sm",children:["Selected customer: ",(0,r.jsx)("strong",{children:S.name})," ",S.email&&(0,r.jsxs)("span",{className:"text-muted-foreground",children:["(",S.email,")"]})]}),R&&(0,r.jsxs)("div",{className:"flex flex-col gap-3 bg-muted/20 p-3 rounded-md border",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(d.J,{className:"text-xs uppercase text-muted-foreground",children:"Name *"}),(0,r.jsx)(l.p,{value:V.name,onChange:e=>L(t=>({...t,name:e.target.value})),placeholder:"Customer name",className:"h-10"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(d.J,{className:"text-xs uppercase text-muted-foreground",children:"Email"}),(0,r.jsx)(l.p,{type:"email",value:V.email,onChange:e=>L(t=>({...t,email:e.target.value})),placeholder:"customer@email.com",className:"h-10"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(d.J,{className:"text-xs uppercase text-muted-foreground",children:"Phone"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(l.p,{value:V.phone,onChange:e=>L(t=>({...t,phone:e.target.value})),placeholder:"(555) 123-4567",className:"h-10"}),(0,r.jsx)(i.$,{type:"button",onClick:B,className:"h-10",children:"Save"})]})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"clientName",className:"text-sm",children:"Client Name *"}),(0,r.jsx)(l.p,{id:"clientName",value:s.clientName,onChange:e=>h({...s,clientName:e.target.value}),placeholder:"Enter client or agency name",className:"h-11"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"priority",className:"text-sm",children:"Priority Level"}),(0,r.jsxs)(c.l6,{value:s.priority,onValueChange:e=>h({...s,priority:e}),children:[(0,r.jsx)(c.bq,{className:"h-11",children:(0,r.jsx)(c.yv,{})}),(0,r.jsx)(c.gC,{children:Z.map(e=>{let t=e.icon;return(0,r.jsx)(c.eb,{value:e.value,children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(t,{className:"h-4 w-4 ".concat(e.color)}),(0,r.jsx)("span",{children:e.label})]})},e.value)})})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"propertyAddress",className:"text-sm",children:"Property Address *"}),(0,r.jsx)(k,{value:s.propertyAddress,onChange:(e,t)=>h({...s,propertyAddress:e,location:t}),onBlur:O,isGeocoding:C})]}),(0,r.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{className:"text-sm",children:"Shoot Date *"}),(0,r.jsxs)(m.AM,{children:[(0,r.jsx)(m.Wv,{asChild:!0,children:(0,r.jsxs)(i.$,{type:"button",variant:"outline",className:"relative w-full justify-start text-left font-normal h-11 pl-11",children:[(0,r.jsx)(j.A,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground/60"}),s.scheduledDate?(()=>{try{let e=new Date(s.scheduledDate+"T00:00:00");if(!isNaN(e.getTime()))return(0,p.GP)(e,"PPP")}catch(e){}return s.scheduledDate})():(0,r.jsx)("span",{className:"text-muted-foreground",children:"Pick a date"})]})}),(0,r.jsx)(m.hl,{className:"w-auto p-0",align:"start",children:(0,r.jsx)(u.V,{mode:"single",selected:s.scheduledDate?(()=>{try{let e=new Date(s.scheduledDate+"T00:00:00");return isNaN(e.getTime())?void 0:e}catch(e){return}})():void 0,onSelect:e=>{e&&h({...s,scheduledDate:(0,p.GP)(e,"yyyy-MM-dd")})},disabled:e=>e<new Date(new Date().setHours(0,0,0,0)),initialFocus:!0})})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{className:"text-sm",children:"Start Time *"}),(0,r.jsxs)(m.AM,{children:[(0,r.jsx)(m.Wv,{asChild:!0,children:(0,r.jsxs)(i.$,{type:"button",variant:"outline",className:"relative w-full justify-start text-left font-normal h-11 pl-11",children:[(0,r.jsx)(b.A,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground/60"}),s.scheduledTime?(()=>{try{let[e,t]=s.scheduledTime.split(":"),a=parseInt(e,10);return"".concat(0===a?12:a>12?a-12:a,":").concat(t," ").concat(a>=12?"PM":"AM")}catch(e){return s.scheduledTime}})():(0,r.jsx)("span",{className:"text-muted-foreground",children:"Pick a time"})]})}),(0,r.jsx)(m.hl,{className:"w-auto p-4",align:"start",children:(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,r.jsxs)(c.l6,{value:s.scheduledTime?(()=>{let[e]=s.scheduledTime.split(":"),t=parseInt(e,10);return(0===t?12:t>12?t-12:t).toString()})():"9",onValueChange:e=>{h(t=>{let a=t.scheduledTime&&t.scheduledTime.split(":")[1]||"00",s=(t.scheduledTime?parseInt(t.scheduledTime.split(":")[0],10):9)>=12,r="12"===e?12*!!s:s?parseInt(e,10)+12:parseInt(e,10);return{...t,scheduledTime:"".concat(r.toString().padStart(2,"0"),":").concat(a)}})},children:[(0,r.jsx)(c.bq,{className:"w-full",children:(0,r.jsx)(c.yv,{placeholder:"Hour"})}),(0,r.jsx)(c.gC,{children:Array.from({length:12},(e,t)=>(0,r.jsx)(c.eb,{value:(t+1).toString(),children:t+1},t+1))})]}),(0,r.jsxs)(c.l6,{value:s.scheduledTime&&s.scheduledTime.split(":")[1]||"00",onValueChange:e=>{h(t=>{let a=t.scheduledTime?parseInt(t.scheduledTime.split(":")[0],10):9;return{...t,scheduledTime:"".concat(a.toString().padStart(2,"0"),":").concat(e.padStart(2,"0"))}})},children:[(0,r.jsx)(c.bq,{className:"w-full",children:(0,r.jsx)(c.yv,{placeholder:"Minute"})}),(0,r.jsx)(c.gC,{children:[0,15,30,45].map(e=>(0,r.jsx)(c.eb,{value:e.toString().padStart(2,"0"),children:e.toString().padStart(2,"0")},e))})]}),(0,r.jsxs)(c.l6,{value:s.scheduledTime?(()=>{let[e]=s.scheduledTime.split(":");return parseInt(e,10)>=12?"PM":"AM"})():"AM",onValueChange:e=>{h(t=>{let a=t.scheduledTime&&t.scheduledTime.split(":")[1]||"00",s=t.scheduledTime?parseInt(t.scheduledTime.split(":")[0],10):9,r=0===s?12:s>12?s-12:s;return{...t,scheduledTime:"".concat(("PM"===e?12===r?12:r+12:12===r?0:r).toString().padStart(2,"0"),":").concat(a)}})},children:[(0,r.jsx)(c.bq,{className:"w-full",children:(0,r.jsx)(c.yv,{placeholder:"AM/PM"})}),(0,r.jsxs)(c.gC,{children:[(0,r.jsx)(c.eb,{value:"AM",children:"AM"}),(0,r.jsx)(c.eb,{value:"PM",children:"PM"})]})]})]})})})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"duration",className:"text-sm",children:"Duration (minutes)"}),(0,r.jsx)(l.p,{id:"duration",type:"number",value:s.estimatedDuration,onChange:e=>{let t=""===e.target.value?"":parseInt(e.target.value);h({...s,estimatedDuration:""===t||isNaN(t)?120:t})},onBlur:e=>{let t=parseInt(e.target.value);(isNaN(t)||t<15)&&h({...s,estimatedDuration:15})},min:"15",step:"1",className:"h-11"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{className:"text-sm",children:"What media do you need? *"}),(0,r.jsx)(y.O,{type:"multiple",value:s.mediaType,onValueChange:e=>{h(t=>({...t,mediaType:e}))},className:"grid grid-cols-2 gap-3 w-full",children:N.H.map(e=>{let t=e.icon;return(0,r.jsxs)(y.d,{value:e.id,className:"flex items-center gap-3 p-4 h-auto data-[state=on]:bg-accent data-[state=on]:border-primary",children:[(0,r.jsx)("div",{className:"p-2.5 rounded-lg bg-primary",children:(0,r.jsx)(t,{className:"h-5 w-5 text-primary-foreground"})}),(0,r.jsx)("div",{className:"flex-1 text-left",children:(0,r.jsx)("div",{className:"text-sm font-medium",children:e.label})})]},e.id)})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"requirements",className:"text-sm",children:"Special Requirements"}),(0,r.jsx)(o.T,{id:"requirements",value:s.requirements,onChange:e=>h({...s,requirements:e.target.value}),placeholder:"Any special instructions, access codes, or details the technician should know...",rows:4,className:"resize-none"})]}),(0,r.jsx)(i.$,{type:"submit",variant:"default",className:"w-full h-12",children:"Create Job Request"})]})}var A=a(75548),_=a(94876);function z(e){let{title:t,items:a,itemCount:s=6,searchPlaceholder:n="Search by address, client name...",searchFields:i,filterOptions:l,onFilterChange:d,renderItem:o,emptyMessage:c="No items",emptyIcon:u,emptyTitle:m,emptyDescription:g,emptyAction:p,className:h="",horizontalLayout:x=!1,itemWidth:b="320px",onNavigateToFullView:f,useGridLayout:v=!0,onScrollControlsReady:j}=e;return 0===a.length?(0,r.jsx)(_.pp,{icon:u,title:m||c,description:g||"",action:p}):(0,r.jsx)("div",{className:h,children:(0,r.jsx)(A.q,{title:t,items:a,itemCount:s,searchPlaceholder:n,searchFields:i,filterOptions:l,onFilterChange:d,renderItem:o,emptyMessage:c,horizontalLayout:x,itemWidth:b,onNavigateToFullView:f,useGridLayout:v,onScrollControlsReady:x?j:void 0})})}var T=a(51631),D=a(86651),S=a(66955),I=a(93341),P=a(91456),M=a(80003),R=a(73344),E=a(96633),F=a(75417);function q(e){let{items:t,renderItem:a,renderTableRow:s,onItemClick:d,searchPlaceholder:o="Search...",searchFields:u,filterOptions:m=[],onFilterChange:g,emptyMessage:p="No items found",emptyIcon:h,emptyTitle:x,emptyDescription:b,emptyAction:f,itemsPerPage:v=12}=e,[j,y]=(0,n.useState)(""),[N,w]=(0,n.useState)("all"),[k,C]=(0,n.useState)("date-desc"),[A,_]=(0,n.useState)(1),[z,q]=(0,n.useState)(v),[V,L]=(0,n.useState)("grid");(0,n.useEffect)(()=>{q(v)},[v]);let $=(0,n.useMemo)(()=>{let e=[...t];if(j&&u){let t=j.toLowerCase();e=e.filter(e=>u(e).toLowerCase().includes(t))}if(g&&"all"!==N&&(e=g(N),j&&u)){let t=j.toLowerCase();e=e.filter(e=>u(e).toLowerCase().includes(t))}return e.sort((e,t)=>{switch(k){case"date-asc":if(e.scheduledDate&&t.scheduledDate)return new Date(e.scheduledDate).getTime()-new Date(t.scheduledDate).getTime();if(e.scheduledDate)return -1;if(t.scheduledDate)return 1;return 0;case"date-desc":if(e.scheduledDate&&t.scheduledDate)return new Date(t.scheduledDate).getTime()-new Date(e.scheduledDate).getTime();if(e.scheduledDate)return -1;if(t.scheduledDate)return 1;return 0;case"client-asc":if(e.clientName&&t.clientName)return e.clientName.localeCompare(t.clientName);return 0;case"client-desc":if(e.clientName&&t.clientName)return t.clientName.localeCompare(e.clientName);return 0;case"priority":let a={urgent:3,rush:2,standard:1},s=a[e.priority]||0;return(a[t.priority]||0)-s;default:return 0}}),e},[t,j,N,k,u,g]),G=Math.ceil($.length/z),O=(A-1)*z,U=O+z,H=$.slice(O,U);return(0,r.jsxs)("div",{className:"flex flex-col space-y-6",children:[(0,r.jsxs)("div",{className:"flex gap-3","data-tour":"jobs-filters",children:[(0,r.jsxs)("div",{className:"relative flex-1 min-w-0",children:[(0,r.jsx)(D.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground/60 "}),(0,r.jsx)(l.p,{type:"text",variant:"muted",placeholder:o,value:j,onChange:e=>{y(e.target.value),_(1)},className:"pl-10"})]}),m.length>0&&(0,r.jsxs)(c.l6,{value:N,onValueChange:e=>{w(e),_(1)},children:[(0,r.jsxs)(c.bq,{variant:"muted",className:"w-10 md:w-[180px] shrink-0 [&>svg:last-child]:hidden md:[&>svg:last-child]:block",children:[(0,r.jsx)(S.A,{className:"h-4 w-4 md:mr-2"}),(0,r.jsx)(c.yv,{placeholder:"All Items",className:"hidden md:inline"})]}),(0,r.jsxs)(c.gC,{children:[(0,r.jsx)(c.eb,{value:"all",children:"All Items"}),m.map(e=>(0,r.jsx)(c.eb,{value:e.value,children:e.label},e.value))]})]}),(0,r.jsxs)(c.l6,{value:k,onValueChange:e=>{C(e),_(1)},children:[(0,r.jsxs)(c.bq,{variant:"muted",className:"w-10 md:w-[180px] shrink-0 [&>svg:last-child]:hidden md:[&>svg:last-child]:block",children:[(0,r.jsx)(I.A,{className:"h-4 w-4 md:mr-2"}),(0,r.jsx)(c.yv,{placeholder:"Sort",className:"hidden md:inline"})]}),(0,r.jsxs)(c.gC,{children:[(0,r.jsx)(c.eb,{value:"date-asc",children:"Date (Earliest)"}),(0,r.jsx)(c.eb,{value:"date-desc",children:"Date (Latest)"}),(0,r.jsx)(c.eb,{value:"client-asc",children:"Client (A-Z)"}),(0,r.jsx)(c.eb,{value:"client-desc",children:"Client (Z-A)"}),(0,r.jsx)(c.eb,{value:"priority",children:"Priority"})]})]}),(0,r.jsxs)(F.e2,{className:"flex items-center shrink-0",children:[(0,r.jsx)(i.$,{variant:"grid"===V?"default":"muted",size:"sm",onClick:()=>L("grid"),className:"h-8 w-8 p-0","aria-label":"Grid view",children:(0,r.jsx)(P.A,{className:"h-4 w-4"})}),(0,r.jsx)(i.$,{variant:"list"===V?"default":"muted",size:"sm",onClick:()=>L("list"),className:"h-8 w-8 p-0","aria-label":"List view",children:(0,r.jsx)(M.A,{className:"h-4 w-4"})})]})]}),$.length>0&&(0,r.jsxs)(R.Oc,{className:"text-muted-foreground mb-4",children:["Showing ",O+1,"-",Math.min(U,$.length)," of ",$.length," jobs"]}),H.length>0?(0,r.jsxs)(r.Fragment,{children:["grid"===V?(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6","data-tour":"jobs-list",children:H.map((e,t)=>(0,r.jsx)("div",{className:"h-full flex",onClick:()=>null==d?void 0:d(e),role:d?"button":void 0,children:(0,r.jsx)("div",{className:"w-full",children:a(e,O+t,"grid")})},t))}):s?(0,r.jsxs)(E.XI,{"data-tour":"jobs-list",children:[(0,r.jsx)(E.A0,{children:(0,r.jsxs)(E.Hj,{children:[(0,r.jsx)(E.nd,{children:"Property"}),(0,r.jsx)(E.nd,{children:"Client"}),(0,r.jsx)(E.nd,{children:"Scheduled"}),(0,r.jsx)(E.nd,{children:"Media Types"}),(0,r.jsx)(E.nd,{children:"Priority"}),(0,r.jsx)(E.nd,{children:"Status"}),(0,r.jsx)(E.nd,{children:"Technician"}),(0,r.jsx)(E.nd,{className:"text-right",children:"Actions"})]})}),(0,r.jsx)(E.BF,{children:H.map((e,t)=>(0,r.jsx)(E.Hj,{onClick:()=>null==d?void 0:d(e),className:d?"cursor-pointer":void 0,children:s(e,O+t)},t))})]}):(0,r.jsx)("div",{className:"space-y-3","data-tour":"jobs-list",children:H.map((e,t)=>(0,r.jsx)("div",{className:"w-full",onClick:()=>null==d?void 0:d(e),role:d?"button":void 0,children:a(e,O+t,"list")},t))}),(0,r.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[G>1?(0,r.jsx)(T.dK,{children:(0,r.jsxs)(T.Iu,{children:[(0,r.jsx)(T.cU,{children:(0,r.jsx)(T.Eb,{onClick:()=>_(e=>Math.max(1,e-1)),className:1===A?"pointer-events-none opacity-50":"cursor-pointer"})}),(()=>{let e=[];if(G<=5)for(let t=1;t<=G;t++)e.push(t);else{e.push(1),A>3&&e.push("ellipsis");let t=Math.max(2,A-1),a=Math.min(G-1,A+1);for(let s=t;s<=a;s++)1!==s&&s!==G&&e.push(s);A<G-2&&e.push("ellipsis"),G>1&&e.push(G)}return e})().map((e,t)=>(0,r.jsx)(T.cU,{children:"ellipsis"===e?(0,r.jsx)(T.M_,{}):(0,r.jsx)(T.n$,{onClick:()=>_(e),isActive:A===e,className:"cursor-pointer",children:e})},t)),(0,r.jsx)(T.cU,{children:(0,r.jsx)(T.WA,{onClick:()=>_(e=>Math.min(G,e+1)),className:A===G?"pointer-events-none opacity-50":"cursor-pointer"})})]})}):(0,r.jsx)("div",{}),(0,r.jsxs)(c.l6,{value:z.toString(),onValueChange:e=>{q(Number(e)),_(1)},children:[(0,r.jsxs)(c.bq,{className:"w-10 md:w-[140px] shrink-0 [&>svg:last-child]:hidden md:[&>svg:last-child]:block",children:[(0,r.jsx)(M.A,{className:"h-4 w-4 md:mr-2"}),(0,r.jsx)(c.yv,{placeholder:"Per page",className:"hidden md:inline"})]}),(0,r.jsxs)(c.gC,{children:[(0,r.jsx)(c.eb,{value:"12",children:"12 per page"}),(0,r.jsx)(c.eb,{value:"24",children:"24 per page"}),(0,r.jsx)(c.eb,{value:"48",children:"48 per page"}),(0,r.jsx)(c.eb,{value:"100",children:"100 per page"})]})]})]})]}):(0,r.jsxs)("div",{className:"text-center py-12 text-muted-foreground","data-tour":"jobs-list",children:[h&&(0,r.jsx)(h,{className:"size-16 mx-auto mb-4 text-muted-foreground/40"}),(0,r.jsx)(R.H3,{className:"text-xl text-foreground mb-2",children:x||p}),(0,r.jsx)(R.QX,{className:"mb-6",children:b}),f&&(0,r.jsx)(i.$,{onClick:f.onClick,children:f.label})]})]})}var V=a(55678),L=a(32559),$=a(68122);function G(){return(0,r.jsx)("div",{className:"grid grid-cols-1 gap-4",children:Array.from({length:4}).map((e,t)=>(0,r.jsxs)("div",{className:"border rounded-lg p-4 space-y-3 bg-card",children:[(0,r.jsx)($.E,{className:"h-4 w-1/3"}),(0,r.jsx)($.E,{className:"h-6 w-1/2"}),(0,r.jsx)($.E,{className:"h-4 w-2/3"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)($.E,{className:"h-8 w-20"}),(0,r.jsx)($.E,{className:"h-8 w-24"})]})]},"job-skeleton-".concat(t)))})}function O(e){let{children:t,fallback:a}=e,{isLoadingJobs:s,jobsError:n,refreshJobs:l,jobs:d}=(0,V.w)(),o=d.length>0;return s&&!o?(0,r.jsx)(r.Fragment,{children:null!=a?a:(0,r.jsx)(G,{})}):n?(0,r.jsxs)(L.Fc,{variant:"destructive",children:[(0,r.jsx)(v.A,{className:"h-4 w-4"}),(0,r.jsx)(L.XL,{children:"Unable to load jobs"}),(0,r.jsxs)(L.TN,{className:"flex items-center justify-between gap-4",children:[(0,r.jsx)("span",{children:n.message}),(0,r.jsx)(i.$,{variant:"secondary",size:"sm",onClick:l,children:"Retry"})]})]}):(0,r.jsx)(r.Fragment,{children:t})}a(67812),a(82180)},71011:(e,t,a)=>{a.d(t,{R:()=>F});var s=a(95155),r=a(12115),n=a(33884),i=a(67812),l=a(97003),d=a(71163),o=a(95664),c=a(60890),u=a(54255),m=a(16140),g=a(23061),p=a(45221),h=a(6132),x=a(56154),b=a(26983),f=a(37772),v=a(16485),j=a(39347),y=a(7220),N=a(76202),w=a(64936);function k(e){return(0,s.jsx)(N.bL,{"data-slot":"context-menu",...e})}function C(e){let{...t}=e;return(0,s.jsx)(N.l9,{"data-slot":"context-menu-trigger",...t})}function A(e){let{className:t,...a}=e;return(0,s.jsx)(N.ZL,{children:(0,s.jsx)(N.UC,{"data-slot":"context-menu-content",className:(0,w.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...a})})}function _(e){let{className:t,inset:a,variant:r="default",...n}=e;return(0,s.jsx)(N.q7,{"data-slot":"context-menu-item","data-inset":a,"data-variant":r,className:(0,w.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-pointer items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n})}var z=a(74604);function T(e){let{...t}=e;return(0,s.jsx)(z.bL,{"data-slot":"hover-card",...t})}function D(e){let{...t}=e;return(0,s.jsx)(z.l9,{"data-slot":"hover-card-trigger",...t})}function S(e){let{className:t,align:a="center",sideOffset:r=4,...n}=e;return(0,s.jsx)(z.ZL,{"data-slot":"hover-card-portal",children:(0,s.jsx)(z.UC,{"data-slot":"hover-card-content",align:a,sideOffset:r,className:(0,w.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-64 origin-(--radix-hover-card-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...n})})}var I=a(82180),P=a(25016),M=a(73344),R=a(53594);let E=e=>{let{status:t,jobId:a,className:n}=e,i=(e=>{switch(e){case"pending":return{base:"bg-amber-100 dark:bg-amber-900",primary:"bg-amber-400/60",secondary:"bg-orange-400/50",accent:"bg-yellow-300/45",highlight:"bg-amber-500/40"};case"assigned":return{base:"bg-blue-100 dark:bg-blue-900",primary:"bg-blue-400/60",secondary:"bg-indigo-400/50",accent:"bg-cyan-300/45",highlight:"bg-blue-500/40"};case"in_progress":return{base:"bg-violet-100 dark:bg-violet-900",primary:"bg-violet-400/60",secondary:"bg-purple-400/50",accent:"bg-fuchsia-300/45",highlight:"bg-indigo-500/40"};case"editing":return{base:"bg-pink-100 dark:bg-pink-900",primary:"bg-pink-400/60",secondary:"bg-rose-400/50",accent:"bg-fuchsia-300/45",highlight:"bg-pink-500/40"};case"delivered":return{base:"bg-emerald-100 dark:bg-emerald-900",primary:"bg-emerald-400/60",secondary:"bg-teal-400/50",accent:"bg-green-300/45",highlight:"bg-emerald-500/40"};default:return{base:"bg-slate-200 dark:bg-slate-800",primary:"bg-slate-400/60",secondary:"bg-gray-400/50",accent:"bg-zinc-300/45",highlight:"bg-slate-500/40"}}})(t),l=(0,r.useMemo)(()=>{let e=(e=>{let t=0;for(let a=0;a<e.length;a++){let s=e.charCodeAt(a);t=(t<<5)-t+s,t&=t}return()=>(t=((t=Math.imul((t=Math.imul(t^t>>>16,0x85ebca6b))^t>>>13,0xc2b2ae35))^t>>>16)>>>0)%1e3/1e3})(a),t=()=>({top:"".concat(-30+80*e(),"%"),left:"".concat(-30+80*e(),"%")});return{blob1:{...t(),width:"".concat(65+15*e(),"%"),height:"".concat(65+15*e(),"%")},blob2:{...t(),width:"".concat(60+15*e(),"%"),height:"".concat(60+15*e(),"%")},blob3:{...t(),width:"".concat(40+15*e(),"%"),height:"".concat(40+15*e(),"%")},blob4:{...t(),width:"".concat(25+12*e(),"%"),height:"".concat(25+12*e(),"%")},rotation1:60*e(),rotation2:60*e(),rotation3:60*e(),rotation4:60*e()}},[a]);return(0,s.jsxs)("div",{className:(0,P.cn)("absolute inset-0 overflow-hidden",i.base,n),children:[(0,s.jsx)("div",{className:(0,P.cn)("absolute rounded-full blur-3xl",i.primary),style:{...l.blob1,transform:"rotate(".concat(l.rotation1,"deg)")}}),(0,s.jsx)("div",{className:(0,P.cn)("absolute rounded-full blur-3xl",i.secondary),style:{...l.blob2,transform:"rotate(".concat(l.rotation2,"deg)")}}),(0,s.jsx)("div",{className:(0,P.cn)("absolute rounded-full blur-2xl",i.accent),style:{...l.blob3,transform:"rotate(".concat(l.rotation3,"deg)")}}),(0,s.jsx)("div",{className:(0,P.cn)("absolute rounded-full blur-2xl",i.highlight),style:{...l.blob4,transform:"rotate(".concat(l.rotation4,"deg)")}})]})};function F(e){var t,a,N;let{job:w,technician:z,messages:F=[],onClick:q,onViewRankings:V,onJobClick:L,onChangeTechnician:$,disableContextMenu:G=!1}=e,[O,U]=(0,r.useState)(!1),[H,J]=(0,r.useState)(!1),B={projectManagerId:null!=(t=w.projectManagerId)?t:void 0,technicianId:null!=(a=w.assignedTechnicianId)?a:void 0,editorId:null!=(N=w.editorId)?N:void 0},{canAssignTechnician:W}=(0,R.FT)(B),Z=(e=>{let t=e=>{var t;return t="--status-".concat(e.replace("_","-")),getComputedStyle(document.documentElement).getPropertyValue(t).trim()||""},a=e=>{let a=t(e);return a?"".concat(a,"20"):""};switch(e){case"delivered":return{label:"Delivered",dotColor:t("delivered")||"oklch(0.60 0.15 142)",bgColor:a("delivered")||"oklch(0.60 0.15 142 / 0.2)",textColor:t("delivered")||"oklch(0.60 0.15 142)"};case"in_progress":return{label:"In Progress",dotColor:t("in-progress")||"oklch(0.60 0.15 280)",bgColor:a("in-progress")||"oklch(0.60 0.15 280 / 0.2)",textColor:t("in-progress")||"oklch(0.60 0.15 280)"};case"pending":case"assigned":return{label:"pending"===e?"Pending":"Assigned",dotColor:t(e)||"oklch(0.55 0.15 250)",bgColor:a(e)||"oklch(0.55 0.15 250 / 0.2)",textColor:t(e)||"oklch(0.55 0.15 250)"};case"editing":return{label:"Editing",dotColor:t("editing")||"oklch(0.65 0.15 60)",bgColor:a("editing")||"oklch(0.65 0.15 60 / 0.2)",textColor:t("editing")||"oklch(0.65 0.15 60)"};default:return{label:"Pending",dotColor:t("pending")||"oklch(0.65 0.15 60)",bgColor:a("pending")||"oklch(0.65 0.15 60 / 0.2)",textColor:t("pending")||"oklch(0.65 0.15 60)"}}})(w.status),X=(e=>{switch(e){case"urgent":return{priority:"urgent",icon:h.A,label:"Urgent"};case"rush":return{priority:"rush",icon:x.A,label:"Rush"};default:return{priority:"standard",icon:b.A,label:"Standard"}}})(w.priority),K=X.icon,Q=(()=>{try{let[e,t,a]=w.scheduledDate.split("-").map(Number),s=new Date(e,t-1,a);return(0,d.GP)(s,"dd MMM yyyy")}catch(e){return w.scheduledDate}})(),Y=z?[z]:[];F.filter(e=>e.jobId===w.id).length;let ee=(0,s.jsxs)("div",{className:(0,P.cn)("group relative w-full max-w-full rounded-md overflow-hidden transition-all duration-200",q||L?"cursor-pointer":""),onClick:e=>{let t=e.target;!(t.closest('[role="menu"]')||t.closest('[data-dropdown-trigger="true"]')||t.closest("[data-radix-dropdown-menu-trigger]")||t.closest("[data-radix-dropdown-menu-content]")||t.closest('button[aria-haspopup="menu"]')||t.closest("button[data-radix-dropdown-menu-trigger]")||t.closest("[data-radix-context-menu-trigger]")||t.closest("[data-radix-context-menu-content]")||t.closest('[data-slot="dropdown-menu-trigger"]')||t.closest('[data-slot="dropdown-menu-content"]')||t.closest('[data-slot="context-menu-trigger"]')||t.closest('[data-slot="context-menu-content"]'))&&(q?q():L&&L())},children:[(0,s.jsx)(E,{status:w.status,jobId:w.id,className:"group-hover:scale-[1.02] transition-transform duration-300 pointer-events-none"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-card/80 via-card/60 to-card/90"}),(0,s.jsxs)("div",{className:"relative z-10 flex flex-col justify-between h-full p-3 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5 flex-wrap",children:[(0,s.jsxs)(i.E,{variant:"secondary",className:(0,P.cn)("flex items-center gap-1 rounded-full backdrop-blur-md! bg-card/60! group-hover:bg-card! transition-colors duration-200","urgent"===X.priority&&"bg-priority-urgent/10 text-priority-urgent","rush"===X.priority&&"bg-priority-rush/10 text-priority-rush","standard"===X.priority&&"bg-priority-standard/10 text-priority-standard"),children:[(0,s.jsx)(K,{className:(0,P.cn)("size-3","urgent"===X.priority&&"text-priority-urgent","rush"===X.priority&&"text-priority-rush","standard"===X.priority&&"text-priority-standard")}),(0,s.jsx)("span",{className:(0,P.cn)("text-[10px] font-medium","urgent"===X.priority&&"text-priority-urgent","rush"===X.priority&&"text-priority-rush","standard"===X.priority&&"text-priority-standard"),children:X.label})]}),w.orderNumber&&(0,s.jsx)(i.E,{variant:"secondary",className:"rounded-full backdrop-blur-md! bg-card/60! group-hover:bg-card! transition-colors duration-200",children:(0,s.jsxs)("span",{className:"text-[10px] font-medium",children:["#",w.orderNumber]})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsxs)(i.E,{variant:"secondary",className:"flex items-center gap-1.5 rounded-full backdrop-blur-md! bg-card/60! group-hover:bg-card! transition-colors duration-200",children:[(0,s.jsx)("div",{className:(0,P.cn)("size-1.5 rounded-full","pending"===w.status&&"bg-status-pending","assigned"===w.status&&"bg-status-assigned","in_progress"===w.status&&"bg-status-in-progress","editing"===w.status&&"bg-status-editing","delivered"===w.status&&"bg-status-delivered","cancelled"===w.status&&"bg-status-cancelled")}),(0,s.jsx)("span",{className:(0,P.cn)("text-[10px] font-medium","pending"===w.status&&"text-status-pending","assigned"===w.status&&"text-status-assigned","in_progress"===w.status&&"text-status-in-progress","editing"===w.status&&"text-status-editing","delivered"===w.status&&"text-status-delivered","cancelled"===w.status&&"text-status-cancelled"),children:Z.label})]}),(0,s.jsx)("div",{className:"relative z-50",onClick:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation(),onMouseDown:e=>e.stopPropagation(),children:(0,s.jsxs)(y.rI,{open:O,onOpenChange:U,children:[(0,s.jsx)(y.ty,{asChild:!0,children:(0,s.jsxs)(l.$,{variant:"ghost",size:"icon",className:"h-6 w-6 rounded-full backdrop-blur-md! bg-card/60! hover:bg-card! transition-colors duration-200","data-dropdown-trigger":"true",children:[(0,s.jsx)(f.A,{className:"h-3.5 w-3.5"}),(0,s.jsx)("span",{className:"sr-only",children:"More options"})]})}),(0,s.jsxs)(y.SQ,{align:"end",className:"z-10000",onPointerDown:e=>e.stopPropagation(),onMouseDown:e=>e.stopPropagation(),children:[L&&(0,s.jsx)(y._2,{onSelect:e=>{e.preventDefault(),U(!1),L()},children:"View Details"}),V&&("pending"===w.status||"assigned"===w.status)&&!w.assignedTechnicianId&&W&&(0,s.jsx)(y._2,{onSelect:e=>{e.preventDefault(),U(!1),V()},children:"Find Technician"}),$&&w.assignedTechnicianId&&("assigned"===w.status||"in_progress"===w.status)&&W&&(0,s.jsx)(y._2,{onSelect:e=>{e.preventDefault(),U(!1),$()},children:"Change Technician"})]})]})})]})]}),(0,s.jsxs)("div",{className:"space-y-1 flex-1",children:[(0,s.jsxs)(I.m_,{children:[(0,s.jsx)(I.k$,{asChild:!0,children:(0,s.jsx)("h3",{className:"text-sm font-semibold text-foreground leading-tight line-clamp-2",children:w.propertyAddress})}),(0,s.jsx)(I.ZI,{side:"top",className:"max-w-xs",children:(0,s.jsx)(M.P,{className:"wrap-break-word",children:w.propertyAddress})})]}),w.clientName&&(0,s.jsx)("p",{className:"text-xs text-muted-foreground line-clamp-1",children:w.clientName})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,s.jsxs)("div",{className:"inline-flex items-center gap-1",children:[(0,s.jsx)(v.A,{className:"size-3"}),(0,s.jsx)("span",{children:Q})]}),w.scheduledTime&&(0,s.jsxs)("div",{className:"inline-flex items-center gap-1",children:[(0,s.jsx)(b.A,{className:"size-3"}),(0,s.jsx)("span",{children:w.scheduledTime})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[w.mediaType&&w.mediaType.length>0&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[w.mediaType.slice(0,3).map(e=>{let t=(e=>{let t=e.toLowerCase();return t.includes("photo")?o.A:t.includes("video")?c.A:t.includes("drone")||t.includes("aerial")?u.A:t.includes("3d")||t.includes("matterport")?m.A:t.includes("floor")?g.A:t.includes("virtual")||t.includes("tour")?p.A:o.A})(e);return(0,s.jsxs)(I.m_,{children:[(0,s.jsx)(I.k$,{asChild:!0,children:(0,s.jsx)("div",{className:"p-1 rounded-full backdrop-blur-md! bg-card/60! group-hover:bg-card! transition-colors duration-200",children:(0,s.jsx)(t,{className:"size-3 text-muted-foreground"})})}),(0,s.jsx)(I.ZI,{side:"top",className:"capitalize",children:e})]},e)}),w.mediaType.length>3&&(0,s.jsxs)("span",{className:"text-[10px] text-muted-foreground",children:["+",w.mediaType.length-3]})]}),Y.length>0&&(0,s.jsxs)(T,{children:[(0,s.jsx)(D,{asChild:!0,children:(0,s.jsx)("div",{className:"cursor-pointer",children:(0,s.jsxs)(n.eu,{className:"h-6 w-6 border-2 border-card",children:[(0,s.jsx)(n.BK,{src:Y[0].avatar,alt:Y[0].name}),(0,s.jsx)(n.q5,{className:"text-[10px] bg-muted text-muted-foreground",children:Y[0].name.split(" ").map(e=>e[0]).join("")})]})})}),(0,s.jsx)(S,{className:"w-80 p-0",align:"end",children:(0,s.jsxs)("div",{className:"p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)(n.eu,{className:"size-12 border-2 border-background",children:[(0,s.jsx)(n.BK,{src:Y[0].avatar,alt:Y[0].name}),(0,s.jsx)(n.q5,{className:"bg-primary text-primary-foreground text-sm",children:Y[0].name.split(" ").map(e=>e[0]).join("")})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"flex items-center gap-1.5 mb-1",children:(0,s.jsx)("span",{className:"font-semibold text-sm truncate",children:Y[0].name})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,s.jsx)(j.A,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),(0,s.jsx)("span",{className:"text-xs text-foreground",children:Y[0].rating.overall})]}),(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:[Y[0].reliability.totalJobs," jobs"]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded-lg",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"On-time"}),(0,s.jsxs)("span",{className:"text-foreground font-medium",children:[(100*Y[0].reliability.onTimeRate).toFixed(0),"%"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded-lg",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Delivery"}),(0,s.jsxs)("span",{className:"text-foreground font-medium",children:[Y[0].reliability.averageDeliveryTime,"h"]})]})]})]})})]})]})]})]})]});return G?ee:(0,s.jsxs)(k,{...{open:H,onOpenChange:J},children:[(0,s.jsx)(C,{asChild:!0,onContextMenu:e=>{let t=e.target;if(t.closest("[data-radix-dropdown-menu-trigger]")||t.closest('button[aria-haspopup="menu"]')||t.closest('[data-slot="dropdown-menu-trigger"]'))return void e.preventDefault()},children:ee}),(0,s.jsxs)(A,{className:"z-9999",onPointerDown:e=>{e.stopPropagation()},onMouseDown:e=>{e.stopPropagation()},children:[L&&(0,s.jsx)(_,{className:"cursor-pointer",onSelect:e=>{e.preventDefault(),e.stopPropagation(),J(!1),setTimeout(()=>{L()},0)},children:"View Details"}),V&&("pending"===w.status||"assigned"===w.status)&&!w.assignedTechnicianId&&W&&(0,s.jsx)(_,{className:"cursor-pointer",onSelect:e=>{e.preventDefault(),e.stopPropagation(),J(!1),setTimeout(()=>{V()},0)},children:"Find Technician"}),$&&w.assignedTechnicianId&&("assigned"===w.status||"in_progress"===w.status)&&W&&(0,s.jsx)(_,{className:"cursor-pointer",onSelect:e=>{e.preventDefault(),e.stopPropagation(),J(!1),setTimeout(()=>{$()},0)},children:"Change Technician"})]})]})}},75417:(e,t,a)=>{a.d(t,{e2:()=>l});var s=a(95155),r=a(83101),n=a(25016);a(54664);let i=(0,r.F)("flex w-fit items-stretch [&>*]:focus-visible:z-10 [&>*]:focus-visible:relative [&>[data-slot=select-trigger]:not([class*='w-'])]:w-fit [&>input]:flex-1 has-[select[aria-hidden=true]:last-child]:[&>[data-slot=select-trigger]:last-of-type]:rounded-r-md has-[>[data-slot=button-group]]:gap-2",{variants:{orientation:{horizontal:"[&>*:not(:first-child)]:rounded-l-none [&>*:not(:first-child)]:border-l-0 [&>*:not(:last-child)]:rounded-r-none",vertical:"flex-col [&>*:not(:first-child)]:rounded-t-none [&>*:not(:first-child)]:border-t-0 [&>*:not(:last-child)]:rounded-b-none"}},defaultVariants:{orientation:"horizontal"}});function l(e){let{className:t,orientation:a,...r}=e;return(0,s.jsx)("div",{role:"group","data-slot":"button-group","data-orientation":a,className:(0,n.cn)(i({orientation:a}),t),...r})}},86868:(e,t,a)=>{a.d(t,{H:()=>d});var s=a(95664),r=a(7217),n=a(60890),i=a(54255),l=a(26397);let d=[{id:"photo",label:"Photography",icon:s.A,color:""},{id:"measurement",label:"Measurements",icon:r.A,color:""},{id:"video",label:"Video",icon:n.A,color:""},{id:"aerial",label:"Aerial/Drone",icon:i.A,color:""},{id:"twilight",label:"Twilight",icon:l.A,color:""}]},96633:(e,t,a)=>{a.d(t,{A0:()=>i,BF:()=>l,Hj:()=>d,XI:()=>n,nA:()=>c,nd:()=>o});var s=a(95155);a(12115);var r=a(64936);function n(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,s.jsx)("table",{"data-slot":"table",className:(0,r.cn)("w-full caption-bottom text-sm",t),...a})})}function i(e){let{className:t,...a}=e;return(0,s.jsx)("thead",{"data-slot":"table-header",className:(0,r.cn)("[&_tr]:border-b",t),...a})}function l(e){let{className:t,...a}=e;return(0,s.jsx)("tbody",{"data-slot":"table-body",className:(0,r.cn)("[&_tr:last-child]:border-0",t),...a})}function d(e){let{className:t,...a}=e;return(0,s.jsx)("tr",{"data-slot":"table-row",className:(0,r.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...a})}function o(e){let{className:t,...a}=e;return(0,s.jsx)("th",{"data-slot":"table-head",className:(0,r.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}function c(e){let{className:t,...a}=e;return(0,s.jsx)("td",{"data-slot":"table-cell",className:(0,r.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}}}]);