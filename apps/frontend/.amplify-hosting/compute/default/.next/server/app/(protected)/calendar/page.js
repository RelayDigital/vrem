(()=>{var a={};a.id=6043,a.ids=[6043],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16773:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>af});var d=c(21124),e=c(38301),f=c(42378),g=c(85956),h=c(58207),i=c(70693),j=c(19217),k=c(77555),l=c(8294),m=c(59405),n=c(31115),o=c(99042);function p({currentDate:a,view:b,onPrev:c,onNext:e,onToday:f,onViewChange:g,onCreateJob:h}){return(0,d.jsxs)("div",{className:"flex md:flex-row flex-col items-center justify-between space-y-4 md:space-y-0 p-4 border-b bg-background",children:[(0,d.jsxs)("div",{className:"flex items-start justify-between md:items-center w-full md:w-auto gap-2",children:[(0,d.jsxs)(k.e2,{children:[(0,d.jsx)(j.$,{variant:"outline",size:"sm",onClick:c,children:(0,d.jsx)(l.A,{className:"h-4 w-4"})}),(0,d.jsx)(j.$,{variant:"outline",size:"sm",onClick:f,children:"Today"}),(0,d.jsx)(j.$,{variant:"outline",size:"sm",onClick:e,children:(0,d.jsx)(m.A,{className:"h-4 w-4"})})]}),(0,d.jsxs)("div",{className:"flex justify-end items-center w-full md:w-auto  md:gap-2",children:[(0,d.jsx)(o.H2,{className:"text-lg font-semibold ml-4",children:(()=>{switch(b){case"day":default:return(0,n.GP)(a,"MMM d, yyyy");case"week":{let b=new Date(a);b.setDate(a.getDate()-a.getDay());let c=new Date(b);return c.setDate(b.getDate()+6),`${(0,n.GP)(b,"MMM d")} â€“ ${(0,n.GP)(c,"MMM d, yyyy")}`}case"month":case"list":return(0,n.GP)(a,"MMMM yyyy")}})()}),(0,d.jsxs)("span",{className:"text-xs text-muted-foreground ml-2",children:["(",new Date().toLocaleTimeString("en-US",{timeZoneName:"short"}).split(" ").pop()||"Local",")"]})]})]}),(0,d.jsx)("div",{className:"flex items-start justify-between md:items-center w-full md:w-auto gap-2",children:(0,d.jsxs)(k.e2,{children:[(0,d.jsx)(j.$,{variant:"day"===b?"default":"outline",size:"sm",onClick:()=>g("day"),children:"Day"}),(0,d.jsx)(j.$,{variant:"week"===b?"default":"outline",size:"sm",onClick:()=>g("week"),children:"Week"}),(0,d.jsx)(j.$,{variant:"month"===b?"default":"outline",size:"sm",onClick:()=>g("month"),children:"Month"}),(0,d.jsx)(j.$,{variant:"list"===b?"default":"outline",size:"sm",onClick:()=>g("list"),children:"List"})]})})]})}var q=c(69643),r=c(92500),s=c(53199),t=c(28241),u=c(72966),v=c(8044),w=c(14263),x=c(89131);function y({canSeeTechnicians:a,currentDate:b,view:c,onDateSelect:f,filters:g,onFiltersChange:h,technicians:k,techniciansLoading:l=!1,technicianColors:m,territories:n,timezone:p,onTimezoneChange:y}){let[z,A]=(0,e.useState)(!0),B=(0,e.useMemo)(()=>"week"===c?(0,i.WA)(b):"month"===c?(0,i.A1)(b):"list"===c?(0,i.WA)(b):null,[b,c]),C=(a,b)=>{h({...g,eventTypes:{...g.eventTypes,[a]:b}})};return(0,d.jsx)(u.F,{className:"size-full",children:(0,d.jsxs)("div",{className:"p-4 space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(o.H3,{className:"mb-3 hidden md:block",children:"Mini Calendar"}),B?(0,d.jsx)(q.V,{mode:"range",selected:{from:B.start,to:B.end},onSelect:a=>{let b;a&&(a.from&&((0,x.r)(a.from,B.start)||(b=a.from)),!b&&a.to&&((0,x.r)(a.to,B.end)||(b=a.to)),!b&&a.from&&(b=a.from),b&&f(b))},className:"rounded-md border w-full"}):(0,d.jsx)(q.V,{mode:"single",selected:b,onSelect:a=>a&&f(a),className:"rounded-md border w-full"})]}),(0,d.jsx)(v.w,{}),(0,d.jsxs)("div",{children:[(0,d.jsx)(s.J,{className:"text-sm font-semibold mb-2 block",children:"Timezone"}),(0,d.jsxs)(t.l6,{value:p,onValueChange:y,children:[(0,d.jsx)(t.bq,{children:(0,d.jsx)(t.yv,{})}),(0,d.jsxs)(t.gC,{children:[(0,d.jsx)(t.eb,{value:"America/Edmonton",children:"Mountain Time (MT)"}),(0,d.jsx)(t.eb,{value:"America/Los_Angeles",children:"Pacific Time (PT)"}),(0,d.jsx)(t.eb,{value:"America/Chicago",children:"Central Time (CT)"}),(0,d.jsx)(t.eb,{value:"America/New_York",children:"Eastern Time (ET)"}),(0,d.jsx)(t.eb,{value:"UTC",children:"UTC"})]})]})]}),(0,d.jsx)(v.w,{}),(0,d.jsxs)("div",{children:[(0,d.jsx)(s.J,{className:"text-sm font-semibold mb-3 block",children:"Event Types"}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(r.S,{id:"filter-scheduled",checked:g.eventTypes.Scheduled,onCheckedChange:a=>C("Scheduled",a)}),(0,d.jsx)(s.J,{htmlFor:"filter-scheduled",className:"text-sm font-normal cursor-pointer",children:"Scheduled"})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(r.S,{id:"filter-unscheduled",checked:g.eventTypes.Unscheduled,onCheckedChange:a=>C("Unscheduled",a)}),(0,d.jsx)(s.J,{htmlFor:"filter-unscheduled",className:"text-sm font-normal cursor-pointer",children:"Unscheduled"})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(r.S,{id:"filter-external",checked:g.eventTypes.External,onCheckedChange:a=>C("External",a)}),(0,d.jsx)(s.J,{htmlFor:"filter-external",className:"text-sm font-normal cursor-pointer",children:"External"})]})]})]}),(0,d.jsx)(v.w,{}),n.length>0&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(s.J,{className:"text-sm font-semibold mb-3 block",children:"Territories"}),(0,d.jsx)("div",{className:"space-y-2",children:n.map(a=>(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(r.S,{id:`filter-territory-${a}`,checked:g.territories.includes(a),onCheckedChange:b=>{b?h({...g,territories:[...g.territories,a]}):h({...g,territories:g.territories.filter(b=>b!==a)})}}),(0,d.jsx)(s.J,{htmlFor:`filter-territory-${a}`,className:"text-sm font-normal cursor-pointer",children:a})]},a))})]}),(0,d.jsx)(v.w,{})]}),a&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,d.jsx)(s.J,{className:"text-sm font-semibold",children:"Technicians"}),(0,d.jsx)(j.$,{variant:"ghost",size:"sm",onClick:()=>{z?h({...g,technicians:[]}):h({...g,technicians:k.map(a=>a.id)}),A(!z)},className:"h-6 text-xs",disabled:l||0===k.length,children:z?"Hide All":"Show All"})]}),l&&(0,d.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[(0,d.jsx)(w.A,{className:"h-4 w-4 animate-spin"}),"Loading technicians..."]}),(0,d.jsx)("div",{className:"space-y-2",children:k.map(a=>{let b,c=(b=a.id,m.find(a=>a.technicianId===b)?.color||"#6b7280"),e=g.technicians.includes(a.id);return(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(r.S,{id:`filter-technician-${a.id}`,checked:e,onCheckedChange:b=>{var c;return c=a.id,void(b?h({...g,technicians:[...g.technicians,c]}):h({...g,technicians:g.technicians.filter(a=>a!==c)}))}}),(0,d.jsxs)(s.J,{htmlFor:`filter-technician-${a.id}`,className:"text-sm font-normal cursor-pointer flex items-center gap-2 flex-1",children:[(0,d.jsx)("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:c}}),(0,d.jsx)("span",{className:"truncate",children:a.name})]})]},a.id)})})]})]})})}var z=c(22544),A=c(67442),B=c(15303),C=c(69957);function D({event:a,technician:b,technicianColor:c,onClick:e,className:f}){let g=c||("External"===a.type?"#8b5cf6":void 0),h=g?`${g}15`:void 0;return(0,d.jsx)("div",{onClick:e,className:(0,A.cn)("p-3 rounded-lg border-2 cursor-pointer transition-all hover:shadow-md flex flex-col bg-muted/80!",a.hasConflict&&"border-red-500 border-dashed",f),style:{borderColor:g,backgroundColor:h},children:(0,d.jsxs)("div",{className:"space-y-1.5",children:[(0,d.jsx)("div",{className:"font-medium text-sm",children:a.title}),a.orderNumber&&(0,d.jsxs)("div",{className:"text-xs text-muted-foreground font-mono",children:["Order #",a.orderNumber]}),a.start&&a.end&&(0,d.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[(0,d.jsx)(B.A,{className:"h-3 w-3"}),(0,d.jsx)("span",{children:(0,i.sH)(a.start,a.end,!0)})]}),a.description&&(0,d.jsx)("div",{className:"text-xs text-muted-foreground line-clamp-2",children:a.description}),(0,d.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[b&&(0,d.jsx)(z.E,{variant:"secondary",className:"text-xs",children:b.name}),(0,d.jsx)(z.E,{variant:"External"===a.type?"outline":"default",className:"text-xs",children:a.type}),a.territory&&(0,d.jsxs)(z.E,{variant:"outline",className:"text-xs",children:[(0,d.jsx)(C.A,{className:"h-3 w-3 mr-1"}),a.territory]})]})]})})}var E=c(36326),F=c(96635);function G({currentDate:a,events:b,technicians:c,technicianColors:f,onEventClick:g,onEventDrag:h}){let j=(0,e.useMemo)(()=>(0,i.WA)(a),[a]),k=(0,e.useMemo)(()=>{let a=[],b=new Date(j.start);for(let c=0;c<7;c++){let d=new Date(b);d.setDate(b.getDate()+c),a.push(d)}return a},[j]);return(0,d.jsx)(u.F,{className:"flex-1 relative",children:(0,d.jsx)("div",{className:"absolute w-full",children:(0,d.jsx)("div",{className:"flex-1 flex flex-col overflow-x-auto",children:(0,d.jsxs)("div",{className:"min-w-[980px] flex flex-col h-full",children:[(0,d.jsx)("div",{className:"sticky top-0 z-10 grid grid-cols-7 border-b bg-muted shrink-0",children:k.map((a,b)=>(0,d.jsxs)("div",{className:(0,A.cn)("p-3 text-center border-r last:border-r-0",(0,n.GP)(a,"yyyy-MM-dd")===(0,n.GP)(new Date,"yyyy-MM-dd")&&"bg-primary/10"),children:[(0,d.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:(0,n.GP)(a,"EEE")}),(0,d.jsx)("div",{className:"text-sm font-semibold",children:(0,n.GP)(a,"d")})]},b))}),(0,d.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,d.jsx)("div",{className:"grid grid-cols-7 min-h-screen",children:k.map((a,e)=>{let h=(0,i.Jm)(b,a).sort((a,b)=>(0,F.H)(a.start).getTime()-(0,F.H)(b.start).getTime());return(0,d.jsx)("div",{className:(0,A.cn)("border-r last:border-r-0 p-2 space-y-2",(0,n.GP)(a,"yyyy-MM-dd")===(0,n.GP)(new Date,"yyyy-MM-dd")&&"bg-primary/5"),children:h.map(a=>{let b=(a=>{if(a)return c.find(b=>b.id===a)})(a.technicianId),e=(a=>{if(a)return f.find(b=>b.technicianId===a)?.color})(a.technicianId);return"External"===a.type||"Unscheduled"===a.type?(0,d.jsx)(E.Y,{event:a,technician:b,technicianColor:e,onOpenJob:()=>a.jobId&&g(a),onAssignTechnician:()=>a.jobId&&g(a),children:(0,d.jsx)("div",{children:(0,d.jsx)(D,{event:a,technician:b,technicianColor:e,onClick:()=>g(a)})})},a.id):(0,d.jsx)(D,{event:a,technician:b,technicianColor:e,onClick:()=>g(a)},a.id)})},e)})})})]})})})})}var H=c(36950),I=c(64936),J=c(674),K=c(23339);let L=(0,K.A)("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),M=(0,K.A)("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),N=Array.from({length:24},(a,b)=>b);function O({canSeeTechnicians:a,currentDate:b,events:c,technicians:f,technicianColors:g,onEventClick:h,onEventDrag:j,onCreateJob:k}){var l;let[m,o]=(0,e.useState)(!1),[p,q]=(0,e.useState)(null),[r,s]=(0,e.useState)(null),[t,v]=(0,e.useState)(new Date),w=(0,e.useRef)(null),y=(0,x.r)((0,H.w)(b,b),(0,I.A)(l?.in||b))?60*t.getHours()+t.getMinutes():null,z=()=>{if(m&&null!==p&&null!==r){if(o(!1),k){let a=Math.floor(p/60),c=`${a.toString().padStart(2,"0")}:${(p%60).toString().padStart(2,"0")}`,d=r-p;d>=15&&k({scheduledDate:(0,n.GP)(b,"yyyy-MM-dd"),scheduledTime:c,estimatedDuration:d})}q(null),s(null)}},A=(0,e.useMemo)(()=>(0,i.Jm)(c,b),[c,b]),B=(0,e.useMemo)(()=>{let a=new Set(A.map(a=>a.technicianId).filter(a=>!!a));return 0===a.size?f.slice(0,5):f.filter(b=>a.has(b.id))},[A,f]),C=a=>{if(a)return g.find(b=>b.technicianId===a)?.color},G=a||f.length>0;return(0,d.jsxs)("div",{className:G?"grid grid-cols-1 md:grid-cols-5 h-full":"grid grid-cols-1 h-full",children:[G&&(0,d.jsxs)("div",{className:"col-span-1 border-r bg-muted shrink-0 h-full hidden md:block",children:[(0,d.jsx)("div",{className:"h-12 border-b flex items-center px-4 font-semibold text-sm",children:"Technician"}),B.map(a=>{let c=C(a.id),e=a.availability.some(a=>a.date===(0,n.GP)(b,"yyyy-MM-dd")&&a.available);return(0,d.jsxs)("div",{className:"h-24 border-b p-3 flex items-center gap-3",children:[(0,d.jsx)("div",{className:"w-1 h-full rounded-full shrink-0",style:{backgroundColor:c||"#6b7280"}}),(0,d.jsxs)(J.eu,{className:"size-10 shrink-0",children:[(0,d.jsx)(J.BK,{src:a.avatar}),(0,d.jsx)(J.q5,{children:a.name.split(" ").map(a=>a[0]).join("").toUpperCase()})]}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("div",{className:"font-medium text-sm truncate",children:a.name}),(0,d.jsx)("div",{className:"text-xs text-muted-foreground truncate",children:a.companyName||"Independent"}),(0,d.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[e?(0,d.jsx)(L,{className:"h-3 w-3 text-green-500"}):(0,d.jsx)(M,{className:"h-3 w-3 text-muted-foreground"}),(0,d.jsx)("span",{className:"text-xs text-muted-foreground",children:e?"Available":"Unavailable"})]})]})]},a.id)})]}),(0,d.jsx)(u.F,{className:G?"col-span-4 relative overflow-y-auto":"col-span-1 relative overflow-y-auto",children:(0,d.jsxs)("div",{className:" absolute flex w-full",children:[(0,d.jsx)("div",{className:"w-16 border-r bg-muted shrink-0",style:{height:`${96*N.length}px`},children:N.map(a=>(0,d.jsx)("div",{className:"h-24 border-b flex items-start justify-end pr-2 pt-1",children:(0,d.jsx)("span",{className:"text-xs text-muted-foreground",children:(0,n.GP)(new Date().setHours(a,0,0,0),"h:mm a")})},a))}),(0,d.jsx)("div",{className:"flex-1 relative select-none",ref:w,onMouseDown:a=>{if(!k||!w.current||a.target.closest("[data-event-card]"))return;let b=w.current.getBoundingClientRect(),c=15*Math.round(Math.floor((a.clientY-b.top+w.current.scrollTop)/1.6)/15);o(!0),q(c),s(c+30)},onMouseMove:a=>{if(!m||null===p||!w.current)return;let b=w.current.getBoundingClientRect(),c=15*Math.round(Math.floor((a.clientY-b.top+w.current.scrollTop)/1.6)/15);c>p&&s(c)},onMouseUp:z,onMouseLeave:z,children:(0,d.jsxs)("div",{className:"absolute inset-0",style:{display:"grid",gridTemplateColumns:"1fr",height:`${96*N.length}px`},children:[N.map(a=>(0,d.jsx)("div",{className:"col-span-full border-b border-muted absolute w-full",style:{top:`${96*a}px`}},a)),(0,d.jsxs)("div",{className:"relative size-full",children:[(()=>{let a=(0,i.XE)(A);return A.map(b=>{let c=a.get(b.id);if(!c)return null;let e=(0,F.H)(b.start),g=(0,F.H)(b.end),i=60*e.getHours()+e.getMinutes(),j=Math.max(1.6*((g.getTime()-e.getTime())/6e4),24),k=(a=>{if(a)return f.find(b=>b.id===a)})(b.technicianId),l=C(b.technicianId);return(0,d.jsx)("div",{className:"absolute px-1 py-1","data-event-card":!0,style:{top:`${1.6*i}px`,height:`${j}px`,left:`${c.left}%`,width:`${c.width}%`,zIndex:20},children:"External"===b.type||"Unscheduled"===b.type?(0,d.jsx)(E.Y,{event:b,technician:k,technicianColor:l,onOpenJob:()=>b.jobId&&h(b),onAssignTechnician:()=>b.jobId&&h(b),children:(0,d.jsx)("div",{className:"h-full",children:(0,d.jsx)(D,{event:b,technician:k,technicianColor:l,onClick:()=>h(b),className:"text-xs h-full"})})}):(0,d.jsx)(D,{event:b,technician:k,technicianColor:l,onClick:()=>h(b),className:"text-xs h-full"})},b.id)})})(),null!==y&&(0,d.jsxs)("div",{className:"absolute left-0 right-0 z-30 pointer-events-none",style:{top:`${1.6*y}px`},children:[(0,d.jsx)("div",{className:"h-0.5 bg-red-500 w-full"}),(0,d.jsx)("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-2 h-2 bg-red-500 rounded-full -translate-x-1/2"})]}),m&&null!==p&&null!==r&&(0,d.jsx)("div",{className:"absolute left-0 right-0 bg-primary/20 border-2 border-primary rounded z-50 pointer-events-none",style:{top:`${1.6*p}px`,height:`${(r-p)*1.6}px`},children:(0,d.jsxs)("div",{className:"text-xs font-medium text-primary p-1",children:[Math.floor(p/60),":",String(p%60).padStart(2,"0")," - ",Math.floor(r/60),":",String(r%60).padStart(2,"0"),(0,d.jsxs)("span",{className:"ml-1",children:["(",r-p," min)"]})]})})]})]})})]})})]})}var P=c(69545);function Q({currentDate:a,events:b,technicians:c,technicianColors:f,onEventClick:g}){let h=(0,e.useMemo)(()=>(0,i.WA)(a),[a]),j=(0,e.useMemo)(()=>{let a={},c=[],d=new Date(h.start);for(;d<=h.end;)c.push(new Date(d)),d.setDate(d.getDate()+1);return c.forEach(c=>{let d=(0,n.GP)(c,"yyyy-MM-dd"),e=b.filter(a=>{let b=(0,F.H)(a.start),d=(0,F.H)(a.end);return(0,x.r)(b,c)||(0,x.r)(d,c)||b<=c&&d>=c});e.length>0&&(e.sort((a,b)=>(0,F.H)(a.start).getTime()-(0,F.H)(b.start).getTime()),a[d]=e)}),a},[b,h]),k=Object.keys(j).sort();return(0,d.jsx)(u.F,{className:"flex-1 relative",children:(0,d.jsx)("div",{className:"p-4 space-y-6 absolute w-full",children:0===k.length?(0,d.jsx)("div",{className:"text-center text-muted-foreground py-12",children:"No events in this period"}):k.map(a=>{let b=j[a],e=(0,F.H)(a),h=(0,x.r)(e,new Date);return(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("div",{className:(0,A.cn)("sticky top-0 bg-background z-10 py-2 border-b",h&&"text-primary font-semibold"),children:(0,d.jsx)("h3",{className:"text-lg font-semibold",children:(0,n.GP)(e,"EEEE, MMMM d, yyyy")})}),(0,d.jsx)("div",{className:"space-y-2",children:b.map(a=>{let b=(a=>{if(a)return c.find(b=>b.id===a)})(a.technicianId),e=(a=>{if(a)return f.find(b=>b.technicianId===a)?.color})(a.technicianId);return(0,d.jsx)(E.Y,{event:a,technician:b,technicianColor:e,onOpenJob:()=>a.jobId&&g(a),onAssignTechnician:()=>a.jobId&&g(a),children:(0,d.jsx)("div",{className:(0,A.cn)("p-4 border rounded-lg cursor-pointer hover:bg-muted/50 transition-colors",a.hasConflict&&"border-red-500 border-dashed"),children:(0,d.jsxs)("div",{className:"flex flex-col md:flex-row items-start justify-between gap-4",children:[(0,d.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,d.jsxs)("div",{className:"flex items-start md:items-center gap-2",children:[(0,d.jsx)("h4",{className:"font-semibold",children:a.title}),e&&(0,d.jsx)("div",{className:"w-3 h-3 rounded-full shrink-0",style:{backgroundColor:e}})]}),a.orderNumber&&(0,d.jsxs)("div",{className:"text-xs text-muted-foreground font-mono",children:["Order #",a.orderNumber]}),a.description&&(0,d.jsx)(o.P,{className:"text-sm text-muted-foreground",children:a.description}),(0,d.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[!a.allDay&&(0,d.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,d.jsx)(B.A,{className:"h-4 w-4"}),(0,d.jsx)("span",{children:(0,i.sH)(a.start,a.end,!0)})]}),a.territory&&(0,d.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,d.jsx)(C.A,{className:"h-4 w-4"}),(0,d.jsx)("span",{children:a.territory})]})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[b&&(0,d.jsx)(z.E,{variant:"secondary",className:"text-xs",children:b.name}),(0,d.jsx)(z.E,{variant:"External"===a.type?"outline":"default",className:"text-xs",children:a.type}),a.hasConflict&&(0,d.jsx)(z.E,{variant:"destructive",className:"text-xs",children:"Conflict"})]})]})})},a.id)})})]},a)})})})}var R=c(81947),S=c(1127),T=c(22595),U=c(67542),V=c(57991),W=c(46762),X=c(81925);function Y({canSeeTechnicians:a=!1,jobs:b=[],technicians:c=[],techniciansLoading:f=!1,onJobClick:g,onCreateJob:k}){let l=a&&c||[],[m,n]=(0,e.useState)(new Date),[o,q]=(0,e.useState)("week"),[r,s]=(0,e.useState)("America/Edmonton"),[t,u]=(0,e.useState)({eventTypes:{Scheduled:!0,Unscheduled:!0,External:!0},territories:[],technicians:[]}),[v,w]=(0,e.useState)(!1),x=(0,e.useMemo)(()=>(0,h.q)(l),[l]),z=(0,e.useMemo)(()=>b.map(a=>(0,i.Ve)(a)),[b]),A=(0,e.useMemo)(()=>z.filter(a=>!!t.eventTypes[a.type]&&(!(t.technicians.length>0)||!!a.technicianId&&!!t.technicians.includes(a.technicianId))&&(!(t.territories.length>0)||!!a.territory&&!!t.territories.includes(a.territory))),[z,t]),B=(0,e.useMemo)(()=>A.map(a=>{if(!a.technicianId)return a;let b=A.some(b=>{if(b.technicianId===a.technicianId&&b.id!==a.id){let c=(0,F.H)(a.start),d=(0,F.H)(a.end),e=(0,F.H)(b.start);return c<(0,F.H)(b.end)&&e<d}return!1});return{...a,hasConflict:b}}),[A]),C=(0,e.useMemo)(()=>{let a=new Set;return z.forEach(b=>{b.territory&&a.add(b.territory)}),Array.from(a)},[z]),D=a=>{if(a.jobId&&g){let c=b.find(b=>b.id===a.jobId);c&&g(c)}},E=a=>{n(a),q("day")},H=(0,d.jsx)(y,{canSeeTechnicians:a,currentDate:m,view:o,onDateSelect:a=>{n(a),(0,V.a)()&&w(!1)},filters:t,onFiltersChange:u,technicians:l,techniciansLoading:f,technicianColors:x,territories:C,timezone:r,onTimezoneChange:s});return(0,d.jsxs)("div",{className:"flex flex-col size-full",children:[(0,d.jsx)(p,{currentDate:m,view:o,onPrev:()=>{switch(o){case"day":n((0,R.f)(m,-1,void 0));break;case"week":case"list":n((0,S.J)(m,-1,void 0));break;case"month":n((0,T.P)(m,-1,void 0))}},onNext:()=>{switch(o){case"day":n((0,R.f)(m,1));break;case"week":case"list":n((0,S.J)(m,1));break;case"month":n((0,T.P)(m,1))}},onToday:()=>{n((0,U.o)(new Date))},onViewChange:q,onCreateJob:k}),(0,d.jsxs)("div",{className:"flex overflow-hidden relative h-full",children:[(0,d.jsx)("div",{className:"flex-1 min-w-0 overflow-auto",children:(()=>{let b={currentDate:m,events:B,technicians:l,technicianColors:x,onEventClick:D};switch(o){case"day":return(0,d.jsx)(O,{...b,onCreateJob:k,canSeeTechnicians:a});case"week":default:return(0,d.jsx)(G,{...b});case"month":return(0,d.jsx)(P.c,{...b,onDayClick:E});case"list":return(0,d.jsx)(Q,{...b})}})()}),(0,V.a)()?(0,d.jsxs)(W._s,{open:v,onOpenChange:w,children:[(0,d.jsx)(W.Uz,{asChild:!0,children:(0,d.jsx)(j.$,{variant:"default",size:"icon",className:"fixed bottom-[calc(var(--dock-h)+0.5rem)] right-2 z-50 rounded-full size-12 p-0",children:(0,d.jsx)(X.A,{className:"size-5"})})}),(0,d.jsxs)(W.zj,{children:[(0,d.jsx)(W.BE,{className:"sr-only",children:(0,d.jsx)(W.gk,{children:"Filters"})}),(0,d.jsx)("div",{className:"overflow-y-scroll size-full",children:H})]})]}):(0,d.jsx)("div",{className:"w-72 xl:w-80 shrink-0 border-l bg-background overflow-hidden",children:H})]})]})}var Z=c(97201),$=c(92172),_=c(85948),aa=c(52962),ab=c(35210),ac=c(92880),ad=c(21411),ae=c(27654);function af(){let a=(0,f.useRouter)(),{user:b,isLoading:c,organizationId:h,memberships:i}=(0,g.l)(["COMPANY","AGENT","TECHNICIAN","EDITOR","PROJECT_MANAGER"]),j=(0,_.w)(),k=(0,aa.I)(),l=(0,ab._)(),[m,n]=(0,e.useState)([]),[o,p]=(0,e.useState)(!1);(0,e.useRef)(new Set);let q=(0,e.useMemo)(()=>{if(!b)return[];let a=i.find(a=>a.orgId===h),c=(a?.role||a?.orgRole||"").toUpperCase();return"TECHNICIAN"===c?j.jobs.filter(a=>a.assignedTechnicianId===b.id):"EDITOR"===c?j.jobs.filter(a=>a.editorId===b.id):j.jobs},[j.jobs,i,h,b]);if((b?.accountType||"").toUpperCase(),!b)return null;let r=(0,ae.aJ)(b,i,h),s=i.find(a=>a.orgId===h),t=s?.organization?.type==="PERSONAL"||s?.organizationType==="PERSONAL",u=(s?.role||s?.orgRole||"").toUpperCase(),v=(0,ae.UD)(r)&&!("PROJECT_MANAGER"===u&&!t)&&!("EDITOR"===u&&!t),w=(0,ae.UD)(r)&&!t,x=j.openTaskView,y=j.openTaskDialog,z=j.handleTaskDialogClose,A=j.handleTaskViewClose,B=(a,b)=>{let c={pending:Z.Ks.BOOKED,assigned:Z.Ks.SHOOTING,in_progress:Z.Ks.SHOOTING,editing:Z.Ks.EDITING,delivered:Z.Ks.DELIVERED,cancelled:Z.Ks.BOOKED};j.changeJobStatus(a,c[b]||Z.Ks.BOOKED)};return(0,d.jsxs)("div",{className:"size-full overflow-x-hidden space-y-6",children:[(0,d.jsx)(ad.WT,{fallback:(0,d.jsx)($.a1,{}),children:(0,d.jsx)(Y,{canSeeTechnicians:w,jobs:q,technicians:m,techniciansLoading:o,onJobClick:x,onCreateJob:v?a=>{v&&l.openJobCreationDialog(a)}:void 0})}),(0,d.jsx)(ac.m,{job:j.selectedJob,messages:j.selectedJob?k.getMessagesForJob(j.selectedJob.id):[],currentUserId:b?.id||"current-user-id",currentUserName:b?.name||"Current User",currentUserAccountType:b?.accountType,isClient:!1,open:j.showTaskView,onOpenChange:A,onSendMessage:(a,b,c)=>k.sendMessage(j.selectedJob?.id||"",a,b,c),onEditMessage:(a,b)=>k.editMessage(a,b),onDeleteMessage:a=>k.deleteMessage(a),onStatusChange:a=>{j.selectedJob&&B(j.selectedJob.id,a)},onAssignTechnician:j.handleAssignTechnician,onChangeTechnician:j.handleChangeTechnician,variant:"sheet",onFullScreen:y,onOpenInNewPage:()=>{j.selectedJob&&a.push(`/jobs/${j.selectedJob.id}`)}}),(0,d.jsx)(ac.m,{job:j.selectedJob,messages:j.selectedJob?k.getMessagesForJob(j.selectedJob.id):[],currentUserId:b?.id||"current-user-id",currentUserName:b?.name||"Current User",currentUserAccountType:b?.accountType,isClient:!1,open:j.showTaskDialog,onOpenChange:z,onSendMessage:(a,b,c)=>k.sendMessage(j.selectedJob?.id||"",a,b,c),onEditMessage:(a,b)=>k.editMessage(a,b),onDeleteMessage:a=>k.deleteMessage(a),onStatusChange:a=>{j.selectedJob&&B(j.selectedJob.id,a)},onAssignTechnician:j.handleAssignTechnician,onChangeTechnician:j.handleChangeTechnician,variant:"dialog"})]})}c(61848)},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:a=>{"use strict";a.exports=require("os")},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},27910:a=>{"use strict";a.exports=require("stream")},28354:a=>{"use strict";a.exports=require("util")},29021:a=>{"use strict";a.exports=require("fs")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32582:(a,b,c)=>{Promise.resolve().then(c.bind(c,16773))},33110:(a,b,c)=>{"use strict";c.d(b,{k:()=>f});var d=c(44210),e=c(36950);function f(a,b){let{start:c,end:f}=(0,d.P)(b?.in,a),g=+c>+f,h=g?+c:+f,i=g?f:c;i.setHours(0,0,0,0);let j=b?.step??1;if(!j)return[];j<0&&(j=-j,g=!g);let k=[];for(;+i<=h;)k.push((0,e.w)(c,i)),i.setDate(i.getDate()+j),i.setHours(0,0,0,0);return g?k.reverse():k}},33873:a=>{"use strict";a.exports=require("path")},34631:a=>{"use strict";a.exports=require("tls")},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},55511:a=>{"use strict";a.exports=require("crypto")},55591:a=>{"use strict";a.exports=require("https")},58688:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>D.a,__next_app__:()=>J,handler:()=>L,pages:()=>I,routeModule:()=>K,tree:()=>H});var d=c(49754),e=c(9117),f=c(46595),g=c(32324),h=c(39326),i=c(38928),j=c(20175),k=c(12),l=c(54290),m=c(12696),n=c(82802),o=c(77533),p=c(45229),q=c(32822),r=c(261),s=c(26453),t=c(52474),u=c(26713),v=c(51356),w=c(62685),x=c(36225),y=c(63446),z=c(2762),A=c(45742),B=c(86439),C=c(81170),D=c.n(C),E=c(62506),F=c(91203),G={};for(let a in E)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(G[a]=()=>E[a]);c.d(b,G);let H={children:["",{children:["(protected)",{children:["calendar",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,69617)),"/Users/duro/Documents/Confidential/VREM/vrem/apps/frontend/app/(protected)/calendar/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(c.bind(c,95555)),"/Users/duro/Documents/Confidential/VREM/vrem/apps/frontend/app/(protected)/layout.tsx"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,87028,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,90461,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,32768,23)),"next/dist/client/components/builtin/unauthorized.js"],metadata:{icon:[async a=>(await Promise.resolve().then(c.bind(c,46055))).default(a)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(c.bind(c,16953)),"/Users/duro/Documents/Confidential/VREM/vrem/apps/frontend/app/layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,81170,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,87028,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,90461,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,32768,23)),"next/dist/client/components/builtin/unauthorized.js"],metadata:{icon:[async a=>(await Promise.resolve().then(c.bind(c,46055))).default(a)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,I=["/Users/duro/Documents/Confidential/VREM/vrem/apps/frontend/app/(protected)/calendar/page.tsx"],J={require:c,loadChunk:()=>Promise.resolve()},K=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/(protected)/calendar/page",pathname:"/calendar",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:H},distDir:".next",relativeProjectDir:""});async function L(a,b,d){var C;let G="/(protected)/calendar/page";"/index"===G&&(G="/");let M=(0,h.getRequestMeta)(a,"postponed"),N=(0,h.getRequestMeta)(a,"minimalMode"),O=await K.prepare(a,b,{srcPage:G,multiZoneDraftMode:!1});if(!O)return b.statusCode=400,b.end("Bad Request"),null==d.waitUntil||d.waitUntil.call(d,Promise.resolve()),null;let{buildId:P,query:Q,params:R,parsedUrl:S,pageIsDynamic:T,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,serverActionsManifest:X,clientReferenceManifest:Y,subresourceIntegrityManifest:Z,prerenderManifest:$,isDraftMode:_,resolvedPathname:aa,revalidateOnlyGenerated:ab,routerServerContext:ac,nextConfig:ad,interceptionRoutePatterns:ae}=O,af=S.pathname||"/",ag=(0,r.normalizeAppPath)(G),{isOnDemandRevalidate:ah}=O,ai=K.match(af,$),aj=!!$.routes[aa],ak=!!(ai||aj||$.routes[ag]),al=a.headers["user-agent"]||"",am=(0,u.getBotType)(al),an=(0,p.isHtmlBotRequest)(a),ao=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??"1"===a.headers[t.NEXT_ROUTER_PREFETCH_HEADER],ap=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[t.RSC_HEADER],aq=(0,s.getIsPossibleServerAction)(a),ar=(0,m.checkIsAppPPREnabled)(ad.experimental.ppr)&&(null==(C=$.routes[ag]??$.dynamicRoutes[ag])?void 0:C.renderingMode)==="PARTIALLY_STATIC",as=!1,at=!1,au=ar?M:void 0,av=ar&&ap&&!ao,aw=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),ax=!al||(0,p.shouldServeStreamingMetadata)(al,ad.htmlLimitedBots);an&&ar&&(ak=!1,ax=!1);let ay=!0===K.isDev||!ak||"string"==typeof M||av,az=an&&ar,aA=null;_||!ak||ay||aq||au||av||(aA=aa);let aB=aA;!aB&&K.isDev&&(aB=aa),K.isDev||_||!ak||!ap||av||(0,k.d)(a.headers);let aC={...E,tree:H,pages:I,GlobalError:D(),handler:L,routeModule:K,__next_app__:J};X&&Y&&(0,o.setReferenceManifestsSingleton)({page:G,clientReferenceManifest:Y,serverActionsManifest:X,serverModuleMap:(0,q.createServerModuleMap)({serverActionsManifest:X})});let aD=a.method||"GET",aE=(0,g.getTracer)(),aF=aE.getActiveScopeSpan();try{let f=K.getVaryHeader(aa,ae);b.setHeader("Vary",f);let k=async(c,d)=>{let e=new l.NodeNextRequest(a),f=new l.NodeNextResponse(b);return K.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aE.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aD} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aD} ${a.url}`)})},m=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:Q,params:R,page:ag,sharedContext:{buildId:P},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aC,Component:(0,j.T)(aC),params:R,routeModule:K,page:G,postponed:f,shouldWaitOnAllReady:az,serveStreamingMetadata:ax,supportsDynamicResponse:"string"==typeof f||ay,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,subresourceIntegrityManifest:Z,serverActionsManifest:X,clientReferenceManifest:Y,setIsrStatus:null==ac?void 0:ac.setIsrStatus,dir:c(33873).join(process.cwd(),K.relativeProjectDir),isDraftMode:_,isRevalidate:ak&&!f&&!av,botType:am,isOnDemandRevalidate:ah,isPossibleServerAction:aq,assetPrefix:ad.assetPrefix,nextConfigOutput:ad.output,crossOrigin:ad.crossOrigin,trailingSlash:ad.trailingSlash,previewProps:$.preview,deploymentId:ad.deploymentId,enableTainting:ad.experimental.taint,htmlLimitedBots:ad.htmlLimitedBots,devtoolSegmentExplorer:ad.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ad.reactMaxHeadersLength,multiZoneDraftMode:!1,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ad.experimental.cacheLife,basePath:ad.basePath,serverActions:ad.experimental.serverActions,...as?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:as}:{},experimental:{isRoutePPREnabled:ar,expireTime:ad.expireTime,staleTimes:ad.experimental.staleTimes,cacheComponents:!!ad.experimental.cacheComponents,clientSegmentCache:!!ad.experimental.clientSegmentCache,clientParamParsing:!!ad.experimental.clientParamParsing,dynamicOnHover:!!ad.experimental.dynamicOnHover,inlineCss:!!ad.experimental.inlineCss,authInterrupts:!!ad.experimental.authInterrupts,clientTraceMetadata:ad.experimental.clientTraceMetadata||[]},waitUntil:d.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>K.onRequestError(a,b,d,ac),err:(0,h.getRequestMeta)(a,"invokeError"),dev:K.isDev}},l=await k(e,i),{metadata:m}=l,{cacheControl:n,headers:o={},fetchTags:p}=m;if(p&&(o[y.NEXT_CACHE_TAGS_HEADER]=p),a.fetchMetrics=m.fetchMetrics,ak&&(null==n?void 0:n.revalidate)===0&&!K.isDev&&!ar){let a=m.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${aa}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:v.CachedRouteKind.APP_PAGE,html:l,headers:o,rscData:m.flightData,postponed:m.postponed,status:m.statusCode,segmentData:m.segmentData},cacheControl:n}},o=async({hasResolved:c,previousCacheEntry:f,isRevalidating:g,span:i})=>{let j,k=!1===K.isDev,l=c||b.writableEnded;if(ah&&ab&&!f&&!N)return(null==ac?void 0:ac.render404)?await ac.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ai&&(j=(0,w.parseFallbackField)(ai.fallback)),j===w.FallbackMode.PRERENDER&&(0,u.isBot)(al)&&(!ar||an)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),(null==f?void 0:f.isStale)===-1&&(ah=!0),ah&&(j!==w.FallbackMode.NOT_FOUND||f)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),!N&&j!==w.FallbackMode.BLOCKING_STATIC_RENDER&&aB&&!l&&!_&&T&&(k||!aj)){let b;if((k||ai)&&j===w.FallbackMode.NOT_FOUND)throw new B.NoFallbackError;if(ar&&!ap){let c="string"==typeof(null==ai?void 0:ai.fallback)?ai.fallback:k?ag:null;if(b=await K.handleResponse({cacheKey:c,req:a,nextConfig:ad,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:$,isRoutePPREnabled:ar,responseGenerator:async()=>m({span:i,postponed:void 0,fallbackRouteParams:k||at?(0,n.u)(ag):null}),waitUntil:d.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=ah||g||!au?void 0:au;if(as&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:v.CachedRouteKind.PAGES,html:x.default.EMPTY,pageData:{},headers:void 0,status:void 0}};let p=T&&ar&&((0,h.getRequestMeta)(a,"renderFallbackShell")||at)?(0,n.u)(af):null;return m({span:i,postponed:o,fallbackRouteParams:p})},p=async c=>{var f,g,i,j,k;let l,n=await K.handleResponse({cacheKey:aA,responseGenerator:a=>o({span:c,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:ah,isRoutePPREnabled:ar,req:a,nextConfig:ad,prerenderManifest:$,waitUntil:d.waitUntil});if(_&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),K.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!n){if(aA)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(f=n.value)?void 0:f.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(i=n.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof n.value.postponed;ak&&!av&&(!p||ao)&&(N||b.setHeader("x-nextjs-cache",ah?"REVALIDATED":n.isMiss?"MISS":n.isStale?"STALE":"HIT"),b.setHeader(t.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=n;if(au)l={revalidate:0,expire:void 0};else if(N&&ap&&!ao&&ar)l={revalidate:0,expire:void 0};else if(!K.isDev)if(_)l={revalidate:0,expire:void 0};else if(ak){if(n.cacheControl)if("number"==typeof n.cacheControl.revalidate){if(n.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${n.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});l={revalidate:n.cacheControl.revalidate,expire:(null==(j=n.cacheControl)?void 0:j.expire)??ad.expireTime}}else l={revalidate:y.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(l={revalidate:0,expire:void 0});if(n.cacheControl=l,"string"==typeof aw&&(null==q?void 0:q.kind)===v.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(k=q.headers)?void 0:k[y.NEXT_CACHE_TAGS_HEADER];N&&ak&&c&&"string"==typeof c&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(aw);return void 0!==d?(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(d,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl}):(b.statusCode=204,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:n.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...n,value:{...n.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&au)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(N&&ak||delete a[y.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let s=null==(g=q.headers)?void 0:g[y.NEXT_CACHE_TAGS_HEADER];if(N&&ak&&s&&"string"==typeof s&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,s),!q.status||ap&&ar||(b.statusCode=q.status),!N&&q.status&&F.RedirectStatusCode[q.status]&&ap&&(b.statusCode=200),p&&b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"1"),ap&&!_){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:q.html,cacheControl:av?{revalidate:0,expire:void 0}:n.cacheControl})}return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(q.rscData,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl})}let u=q.html;if(!p||N||ap)return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:n.cacheControl});if(as)return u.push(new ReadableStream({start(a){a.enqueue(z.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}});let w=new TransformStream;return u.push(w.readable),m({span:c,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(w.writable)}).catch(a=>{w.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}})};if(!aF)return await aE.withPropagatedContext(a.headers,()=>aE.trace(i.BaseServerSpan.handleRequest,{spanName:`${aD} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aD,"http.target":a.url}},p));await p(aF)}catch(b){throw b instanceof B.NoFallbackError||await K.onRequestError(a,b,{routerKind:"App Router",routePath:G,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ak,isOnDemandRevalidate:ah})},ac),b}}},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},69617:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/duro/Documents/Confidential/VREM/vrem/apps/frontend/app/(protected)/calendar/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/duro/Documents/Confidential/VREM/vrem/apps/frontend/app/(protected)/calendar/page.tsx","default")},73024:a=>{"use strict";a.exports=require("node:fs")},74075:a=>{"use strict";a.exports=require("zlib")},76760:a=>{"use strict";a.exports=require("node:path")},77598:a=>{"use strict";a.exports=require("node:crypto")},79428:a=>{"use strict";a.exports=require("buffer")},79551:a=>{"use strict";a.exports=require("url")},79646:a=>{"use strict";a.exports=require("child_process")},81630:a=>{"use strict";a.exports=require("http")},83997:a=>{"use strict";a.exports=require("tty")},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},91645:a=>{"use strict";a.exports=require("net")},92414:(a,b,c)=>{Promise.resolve().then(c.bind(c,69617))},92500:(a,b,c)=>{"use strict";c.d(b,{S:()=>E});var d=c(21124),e=c(38301),f=c(92808),g=c(2332),h=c(87868),i=c(11720),j=c(10350),k=c(96386),l=c(29988),m=c(99978),n="Checkbox",[o,p]=(0,g.A)(n),[q,r]=o(n);function s(a){let{__scopeCheckbox:b,checked:c,children:f,defaultChecked:g,disabled:h,form:j,name:k,onCheckedChange:l,required:m,value:o="on",internal_do_not_use_render:p}=a,[r,s]=(0,i.i)({prop:c,defaultProp:g??!1,onChange:l,caller:n}),[t,u]=e.useState(null),[v,w]=e.useState(null),x=e.useRef(!1),y=!t||!!j||!!t.closest("form"),z={checked:r,disabled:h,setChecked:s,control:t,setControl:u,name:k,form:j,value:o,hasConsumerStoppedPropagationRef:x,required:m,defaultChecked:!A(g)&&g,isFormControl:y,bubbleInput:v,setBubbleInput:w};return(0,d.jsx)(q,{scope:b,...z,children:"function"==typeof p?p(z):f})}var t="CheckboxTrigger",u=e.forwardRef(({__scopeCheckbox:a,onKeyDown:b,onClick:c,...g},i)=>{let{control:j,value:k,disabled:l,checked:n,required:o,setControl:p,setChecked:q,hasConsumerStoppedPropagationRef:s,isFormControl:u,bubbleInput:v}=r(t,a),w=(0,f.s)(i,p),x=e.useRef(n);return e.useEffect(()=>{let a=j?.form;if(a){let b=()=>q(x.current);return a.addEventListener("reset",b),()=>a.removeEventListener("reset",b)}},[j,q]),(0,d.jsx)(m.sG.button,{type:"button",role:"checkbox","aria-checked":A(n)?"mixed":n,"aria-required":o,"data-state":B(n),"data-disabled":l?"":void 0,disabled:l,value:k,...g,ref:w,onKeyDown:(0,h.mK)(b,a=>{"Enter"===a.key&&a.preventDefault()}),onClick:(0,h.mK)(c,a=>{q(a=>!!A(a)||!a),v&&u&&(s.current=a.isPropagationStopped(),s.current||a.stopPropagation())})})});u.displayName=t;var v=e.forwardRef((a,b)=>{let{__scopeCheckbox:c,name:e,checked:f,defaultChecked:g,required:h,disabled:i,value:j,onCheckedChange:k,form:l,...m}=a;return(0,d.jsx)(s,{__scopeCheckbox:c,checked:f,defaultChecked:g,disabled:i,required:h,onCheckedChange:k,name:e,form:l,value:j,internal_do_not_use_render:({isFormControl:a})=>(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u,{...m,ref:b,__scopeCheckbox:c}),a&&(0,d.jsx)(z,{__scopeCheckbox:c})]})})});v.displayName=n;var w="CheckboxIndicator",x=e.forwardRef((a,b)=>{let{__scopeCheckbox:c,forceMount:e,...f}=a,g=r(w,c);return(0,d.jsx)(l.C,{present:e||A(g.checked)||!0===g.checked,children:(0,d.jsx)(m.sG.span,{"data-state":B(g.checked),"data-disabled":g.disabled?"":void 0,...f,ref:b,style:{pointerEvents:"none",...a.style}})})});x.displayName=w;var y="CheckboxBubbleInput",z=e.forwardRef(({__scopeCheckbox:a,...b},c)=>{let{control:g,hasConsumerStoppedPropagationRef:h,checked:i,defaultChecked:l,required:n,disabled:o,name:p,value:q,form:s,bubbleInput:t,setBubbleInput:u}=r(y,a),v=(0,f.s)(c,u),w=(0,j.Z)(i),x=(0,k.X)(g);e.useEffect(()=>{if(!t)return;let a=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,b=!h.current;if(w!==i&&a){let c=new Event("click",{bubbles:b});t.indeterminate=A(i),a.call(t,!A(i)&&i),t.dispatchEvent(c)}},[t,w,i,h]);let z=e.useRef(!A(i)&&i);return(0,d.jsx)(m.sG.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??z.current,required:n,disabled:o,name:p,value:q,form:s,...b,tabIndex:-1,ref:v,style:{...b.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function A(a){return"indeterminate"===a}function B(a){return A(a)?"indeterminate":a?"checked":"unchecked"}z.displayName=y;var C=c(71613),D=c(15514);function E({className:a,...b}){return(0,d.jsx)(v,{"data-slot":"checkbox",className:(0,D.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...b,children:(0,d.jsx)(x,{"data-slot":"checkbox-indicator",className:"grid place-content-center text-current transition-none",children:(0,d.jsx)(C.A,{className:"size-3.5"})})})}},94735:a=>{"use strict";a.exports=require("events")},96635:(a,b,c)=>{"use strict";c.d(b,{H:()=>g});var d=c(32198),e=c(36950),f=c(58390);function g(a,b){let c,g,p=()=>(0,e.w)(b?.in,NaN),q=b?.additionalDigits??2,r=function(a){let b,c={},d=a.split(h.dateTimeDelimiter);if(d.length>2)return c;if(/:/.test(d[0])?b=d[0]:(c.date=d[0],b=d[1],h.timeZoneDelimiter.test(c.date)&&(c.date=a.split(h.timeZoneDelimiter)[0],b=a.substr(c.date.length,a.length))),b){let a=h.timezone.exec(b);a?(c.time=b.replace(a[1],""),c.timezone=a[1]):c.time=b}return c}(a);if(r.date){let a=function(a,b){let c=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+b)+"})|(\\d{2}|[+-]\\d{"+(2+b)+"})$)"),d=a.match(c);if(!d)return{year:NaN,restDateString:""};let e=d[1]?parseInt(d[1]):null,f=d[2]?parseInt(d[2]):null;return{year:null===f?e:100*f,restDateString:a.slice((d[1]||d[2]).length)}}(r.date,q);c=function(a,b){var c,d,e,f,g,h,j;if(null===b)return new Date(NaN);let k=a.match(i);if(!k)return new Date(NaN);let m=!!k[4],p=l(k[1]),q=l(k[2])-1,r=l(k[3]),s=l(k[4]),t=l(k[5])-1;if(m){return(c=s,d=t,c>=1&&c<=53&&d>=0&&d<=6)?function(a,b,c){let d=new Date(0);d.setUTCFullYear(a,0,4);let e=d.getUTCDay()||7;return d.setUTCDate(d.getUTCDate()+((b-1)*7+c+1-e)),d}(b,s,t):new Date(NaN)}{let a=new Date(0);return(e=b,f=q,g=r,f>=0&&f<=11&&g>=1&&g<=(n[f]||(o(e)?29:28))&&(h=b,(j=p)>=1&&j<=(o(h)?366:365)))?(a.setUTCFullYear(b,q,Math.max(p,r)),a):new Date(NaN)}}(a.restDateString,a.year)}if(!c||isNaN(+c))return p();let s=+c,t=0;if(r.time&&isNaN(t=function(a){var b,c,e;let f=a.match(j);if(!f)return NaN;let g=m(f[1]),h=m(f[2]),i=m(f[3]);return(b=g,c=h,e=i,24===b?0===c&&0===e:e>=0&&e<60&&c>=0&&c<60&&b>=0&&b<25)?g*d.s0+h*d.Cg+1e3*i:NaN}(r.time)))return p();if(r.timezone){if(isNaN(g=function(a){var b;if("Z"===a)return 0;let c=a.match(k);if(!c)return 0;let e="+"===c[1]?-1:1,f=parseInt(c[2]),g=c[3]&&parseInt(c[3])||0;return(b=g)>=0&&b<=59?e*(f*d.s0+g*d.Cg):NaN}(r.timezone)))return p()}else{let a=new Date(s+t),c=(0,f.a)(0,b?.in);return c.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),c.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),c}return(0,f.a)(s+t+g,b?.in)}let h={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},i=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,j=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,k=/^([+-])(\d{2})(?::?(\d{2}))?$/;function l(a){return a?parseInt(a):1}function m(a){return a&&parseFloat(a.replace(",","."))||0}let n=[31,null,31,30,31,30,31,31,30,31,30,31];function o(a){return a%400==0||a%4==0&&a%100!=0}}};var b=require("../../../webpack-runtime.js");b.C(a);var c=b.X(0,[5745,3236,3991,6355,517,7454,7848,3698,9912,8771,3742,2443,3277,2172,2880,1095],()=>b(b.s=58688));module.exports=c})();