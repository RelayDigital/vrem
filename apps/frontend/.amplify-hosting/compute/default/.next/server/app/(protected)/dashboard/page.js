(()=>{var a={};a.id=5311,a.ids=[5311],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},8946:(a,b,c)=>{"use strict";c.d(b,{N:()=>v});var d=c(21124),e=c(38301),f=c(21411),g=c(71870),h=c(69545),i=c(19217),j=c(67454),k=c(11489),l=c(99042),m=c(11534),n=c(70693),o=c(58207),p=c(88716),q=c(59268),r=c(30733),s=c(67748),t=c(76160),u=c(49037);function v({jobs:a,technicians:b,selectedJob:c,stats:v,onSelectJob:w,onNavigateToJobsView:x,onNavigateToMapView:y,onNavigateToCalendarView:z,onNavigateToJobInProjectManagement:A,onJobClick:B,currentUserId:C,selfTechnicianOverride:D}){let E=a.filter(a=>"assigned"===a.status),[F]=(0,e.useState)(new Date),G=E.slice(0,4),H=(0,e.useMemo)(()=>a.map(a=>(0,n.Ve)(a)),[a]),I=b??[],J=(0,e.useMemo)(()=>I.filter(a=>{if(!a?.homeLocation||"number"!=typeof a.homeLocation.lat||"number"!=typeof a.homeLocation.lng)return!1;let b=a.homeLocation.address||{};return[b.street,b.city,b.stateProvince,b.postalCode,b.country].some(Boolean)}),[I]),K=(0,e.useMemo)(()=>D||(C?J.find(a=>a.id===C):void 0),[J,C,D]),L=J.length>0?J:I,M=(0,e.useMemo)(()=>{let b=new Set(a.map(a=>a.assignedTechnicianId||a.assignedTechnicianId).filter(a=>!!a)),c=J.filter(a=>b.has(a.id));return c.length>0?c:K?[K]:J.length>0?[J[0]]:[]},[a,J,K]),N=(0,e.useMemo)(()=>(0,o.q)(M),[M]),{shouldShowGuide:O}=(0,u.Mw)();return(0,d.jsx)("main",{className:"container relative mx-auto",children:(0,d.jsxs)("article",{className:"flex flex-col gap-2xl md:gap-3xl px-md","data-tour":"dashboard-article",children:[O&&(0,d.jsx)("div",{className:"@container w-full mt-md","data-tour":"setup-guide",children:(0,d.jsx)(t.K,{})}),(0,d.jsx)("div",{className:`@container w-full ${O?"":"mt-md"}`,"data-tour":"dashboard-metrics",children:(0,d.jsx)(p.MD,{stats:[{icon:k.A,value:v.upcoming,label:"Upcoming Jobs",iconBgColor:"bg-accent",iconColor:"text-primary"},{icon:q.A,value:v.completed,label:"Total Completed",iconBgColor:"bg-emerald-100",iconColor:"text-emerald-600"},{icon:r.A,value:v.rating.toFixed(1),label:"Rating",iconBgColor:"bg-yellow-100",iconColor:"text-yellow-600"},{icon:s.A,value:v.onTimeRate,label:"On-Time Rate",valueSuffix:"%",iconBgColor:"bg-accent",iconColor:"text-primary"}]})}),(0,d.jsxs)("div",{className:"@container w-full","data-tour":"dashboard-calendar",children:[(0,d.jsxs)("div",{className:"mb-md flex items-baseline justify-between",children:[(0,d.jsx)(l.H2,{className:"text-lg border-0",children:"Schedule"}),(0,d.jsx)(i.$,{variant:"flat",className:"px-0",onClick:z,children:"View calendar"})]}),(0,d.jsx)("div",{className:"border rounded-md overflow-hidden",children:(0,d.jsx)(h.c,{currentDate:F,events:H,technicians:L,technicianColors:N,onEventClick:b=>{if(b.jobId&&B){let c=a.find(a=>a.id===b.jobId);c&&B(c)}},onDayClick:a=>{z&&z()},compact:!0})})]}),(0,d.jsxs)("div",{className:"@container w-full","data-tour":"dashboard-map",children:[(0,d.jsxs)("div",{className:"mb-md flex items-baseline justify-between",children:[(0,d.jsx)(l.H2,{className:"text-lg border-0",children:"Live Job Map"}),(0,d.jsx)(i.$,{variant:"flat",className:"px-0",onClick:y,children:"View map"})]}),(0,d.jsx)(g.n,{jobs:a,providers:M,selectedJob:c,onSelectJob:w,onNavigateToJobInProjectManagement:A,onJobAssign:void 0,isDispatcherView:!1})]}),(0,d.jsxs)("div",{className:"@container w-full mb-md","data-tour":"dashboard-jobs",children:[(0,d.jsxs)("div",{className:"mb-md flex items-baseline justify-between",children:[(0,d.jsx)(l.H2,{className:"text-lg",children:"Active Jobs"}),E.length>0&&x&&(0,d.jsx)(i.$,{variant:"flat",className:"px-0",onClick:x,children:"View all"})]}),E.length>0?(0,d.jsx)(j.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-4",children:G.map(a=>{let c=b.find(b=>b.id===a.assignedTechnicianId);return(0,d.jsx)(f.oe,{job:a,technician:c,onClick:B?()=>B(a):void 0},a.id)})})}):(0,d.jsx)(m.pp,{icon:k.A,title:"No Active Jobs",description:"There are currently no active jobs assigned to you.",action:x?{label:"View All Jobs",onClick:x}:void 0})]})]})})}},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},15004:(a,b,c)=>{Promise.resolve().then(c.bind(c,40403))},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:a=>{"use strict";a.exports=require("os")},24732:(a,b,c)=>{Promise.resolve().then(c.bind(c,84353))},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},27910:a=>{"use strict";a.exports=require("stream")},28354:a=>{"use strict";a.exports=require("util")},29021:a=>{"use strict";a.exports=require("fs")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32717:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(23339).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},33110:(a,b,c)=>{"use strict";c.d(b,{k:()=>f});var d=c(44210),e=c(36950);function f(a,b){let{start:c,end:f}=(0,d.P)(b?.in,a),g=+c>+f,h=g?+c:+f,i=g?f:c;i.setHours(0,0,0,0);let j=b?.step??1;if(!j)return[];j<0&&(j=-j,g=!g);let k=[];for(;+i<=h;)k.push((0,e.w)(c,i)),i.setDate(i.getDate()+j),i.setHours(0,0,0,0);return g?k.reverse():k}},33873:a=>{"use strict";a.exports=require("path")},34631:a=>{"use strict";a.exports=require("tls")},40403:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/duro/Documents/Confidential/VREM/vrem/apps/frontend/app/(protected)/dashboard/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/duro/Documents/Confidential/VREM/vrem/apps/frontend/app/(protected)/dashboard/page.tsx","default")},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},55511:a=>{"use strict";a.exports=require("crypto")},55591:a=>{"use strict";a.exports=require("https")},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73024:a=>{"use strict";a.exports=require("node:fs")},74075:a=>{"use strict";a.exports=require("zlib")},76760:a=>{"use strict";a.exports=require("node:path")},77598:a=>{"use strict";a.exports=require("node:crypto")},77666:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>D.a,__next_app__:()=>J,handler:()=>L,pages:()=>I,routeModule:()=>K,tree:()=>H});var d=c(49754),e=c(9117),f=c(46595),g=c(32324),h=c(39326),i=c(38928),j=c(20175),k=c(12),l=c(54290),m=c(12696),n=c(82802),o=c(77533),p=c(45229),q=c(32822),r=c(261),s=c(26453),t=c(52474),u=c(26713),v=c(51356),w=c(62685),x=c(36225),y=c(63446),z=c(2762),A=c(45742),B=c(86439),C=c(81170),D=c.n(C),E=c(62506),F=c(91203),G={};for(let a in E)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(G[a]=()=>E[a]);c.d(b,G);let H={children:["",{children:["(protected)",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,40403)),"/Users/duro/Documents/Confidential/VREM/vrem/apps/frontend/app/(protected)/dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(c.bind(c,95555)),"/Users/duro/Documents/Confidential/VREM/vrem/apps/frontend/app/(protected)/layout.tsx"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,87028,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,90461,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,32768,23)),"next/dist/client/components/builtin/unauthorized.js"],metadata:{icon:[async a=>(await Promise.resolve().then(c.bind(c,46055))).default(a)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(c.bind(c,16953)),"/Users/duro/Documents/Confidential/VREM/vrem/apps/frontend/app/layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,81170,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,87028,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,90461,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,32768,23)),"next/dist/client/components/builtin/unauthorized.js"],metadata:{icon:[async a=>(await Promise.resolve().then(c.bind(c,46055))).default(a)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,I=["/Users/duro/Documents/Confidential/VREM/vrem/apps/frontend/app/(protected)/dashboard/page.tsx"],J={require:c,loadChunk:()=>Promise.resolve()},K=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/(protected)/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:H},distDir:".next",relativeProjectDir:""});async function L(a,b,d){var C;let G="/(protected)/dashboard/page";"/index"===G&&(G="/");let M=(0,h.getRequestMeta)(a,"postponed"),N=(0,h.getRequestMeta)(a,"minimalMode"),O=await K.prepare(a,b,{srcPage:G,multiZoneDraftMode:!1});if(!O)return b.statusCode=400,b.end("Bad Request"),null==d.waitUntil||d.waitUntil.call(d,Promise.resolve()),null;let{buildId:P,query:Q,params:R,parsedUrl:S,pageIsDynamic:T,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,serverActionsManifest:X,clientReferenceManifest:Y,subresourceIntegrityManifest:Z,prerenderManifest:$,isDraftMode:_,resolvedPathname:aa,revalidateOnlyGenerated:ab,routerServerContext:ac,nextConfig:ad,interceptionRoutePatterns:ae}=O,af=S.pathname||"/",ag=(0,r.normalizeAppPath)(G),{isOnDemandRevalidate:ah}=O,ai=K.match(af,$),aj=!!$.routes[aa],ak=!!(ai||aj||$.routes[ag]),al=a.headers["user-agent"]||"",am=(0,u.getBotType)(al),an=(0,p.isHtmlBotRequest)(a),ao=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??"1"===a.headers[t.NEXT_ROUTER_PREFETCH_HEADER],ap=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[t.RSC_HEADER],aq=(0,s.getIsPossibleServerAction)(a),ar=(0,m.checkIsAppPPREnabled)(ad.experimental.ppr)&&(null==(C=$.routes[ag]??$.dynamicRoutes[ag])?void 0:C.renderingMode)==="PARTIALLY_STATIC",as=!1,at=!1,au=ar?M:void 0,av=ar&&ap&&!ao,aw=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),ax=!al||(0,p.shouldServeStreamingMetadata)(al,ad.htmlLimitedBots);an&&ar&&(ak=!1,ax=!1);let ay=!0===K.isDev||!ak||"string"==typeof M||av,az=an&&ar,aA=null;_||!ak||ay||aq||au||av||(aA=aa);let aB=aA;!aB&&K.isDev&&(aB=aa),K.isDev||_||!ak||!ap||av||(0,k.d)(a.headers);let aC={...E,tree:H,pages:I,GlobalError:D(),handler:L,routeModule:K,__next_app__:J};X&&Y&&(0,o.setReferenceManifestsSingleton)({page:G,clientReferenceManifest:Y,serverActionsManifest:X,serverModuleMap:(0,q.createServerModuleMap)({serverActionsManifest:X})});let aD=a.method||"GET",aE=(0,g.getTracer)(),aF=aE.getActiveScopeSpan();try{let f=K.getVaryHeader(aa,ae);b.setHeader("Vary",f);let k=async(c,d)=>{let e=new l.NodeNextRequest(a),f=new l.NodeNextResponse(b);return K.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aE.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aD} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aD} ${a.url}`)})},m=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:Q,params:R,page:ag,sharedContext:{buildId:P},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aC,Component:(0,j.T)(aC),params:R,routeModule:K,page:G,postponed:f,shouldWaitOnAllReady:az,serveStreamingMetadata:ax,supportsDynamicResponse:"string"==typeof f||ay,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,subresourceIntegrityManifest:Z,serverActionsManifest:X,clientReferenceManifest:Y,setIsrStatus:null==ac?void 0:ac.setIsrStatus,dir:c(33873).join(process.cwd(),K.relativeProjectDir),isDraftMode:_,isRevalidate:ak&&!f&&!av,botType:am,isOnDemandRevalidate:ah,isPossibleServerAction:aq,assetPrefix:ad.assetPrefix,nextConfigOutput:ad.output,crossOrigin:ad.crossOrigin,trailingSlash:ad.trailingSlash,previewProps:$.preview,deploymentId:ad.deploymentId,enableTainting:ad.experimental.taint,htmlLimitedBots:ad.htmlLimitedBots,devtoolSegmentExplorer:ad.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ad.reactMaxHeadersLength,multiZoneDraftMode:!1,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ad.experimental.cacheLife,basePath:ad.basePath,serverActions:ad.experimental.serverActions,...as?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:as}:{},experimental:{isRoutePPREnabled:ar,expireTime:ad.expireTime,staleTimes:ad.experimental.staleTimes,cacheComponents:!!ad.experimental.cacheComponents,clientSegmentCache:!!ad.experimental.clientSegmentCache,clientParamParsing:!!ad.experimental.clientParamParsing,dynamicOnHover:!!ad.experimental.dynamicOnHover,inlineCss:!!ad.experimental.inlineCss,authInterrupts:!!ad.experimental.authInterrupts,clientTraceMetadata:ad.experimental.clientTraceMetadata||[]},waitUntil:d.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>K.onRequestError(a,b,d,ac),err:(0,h.getRequestMeta)(a,"invokeError"),dev:K.isDev}},l=await k(e,i),{metadata:m}=l,{cacheControl:n,headers:o={},fetchTags:p}=m;if(p&&(o[y.NEXT_CACHE_TAGS_HEADER]=p),a.fetchMetrics=m.fetchMetrics,ak&&(null==n?void 0:n.revalidate)===0&&!K.isDev&&!ar){let a=m.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${aa}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:v.CachedRouteKind.APP_PAGE,html:l,headers:o,rscData:m.flightData,postponed:m.postponed,status:m.statusCode,segmentData:m.segmentData},cacheControl:n}},o=async({hasResolved:c,previousCacheEntry:f,isRevalidating:g,span:i})=>{let j,k=!1===K.isDev,l=c||b.writableEnded;if(ah&&ab&&!f&&!N)return(null==ac?void 0:ac.render404)?await ac.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ai&&(j=(0,w.parseFallbackField)(ai.fallback)),j===w.FallbackMode.PRERENDER&&(0,u.isBot)(al)&&(!ar||an)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),(null==f?void 0:f.isStale)===-1&&(ah=!0),ah&&(j!==w.FallbackMode.NOT_FOUND||f)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),!N&&j!==w.FallbackMode.BLOCKING_STATIC_RENDER&&aB&&!l&&!_&&T&&(k||!aj)){let b;if((k||ai)&&j===w.FallbackMode.NOT_FOUND)throw new B.NoFallbackError;if(ar&&!ap){let c="string"==typeof(null==ai?void 0:ai.fallback)?ai.fallback:k?ag:null;if(b=await K.handleResponse({cacheKey:c,req:a,nextConfig:ad,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:$,isRoutePPREnabled:ar,responseGenerator:async()=>m({span:i,postponed:void 0,fallbackRouteParams:k||at?(0,n.u)(ag):null}),waitUntil:d.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=ah||g||!au?void 0:au;if(as&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:v.CachedRouteKind.PAGES,html:x.default.EMPTY,pageData:{},headers:void 0,status:void 0}};let p=T&&ar&&((0,h.getRequestMeta)(a,"renderFallbackShell")||at)?(0,n.u)(af):null;return m({span:i,postponed:o,fallbackRouteParams:p})},p=async c=>{var f,g,i,j,k;let l,n=await K.handleResponse({cacheKey:aA,responseGenerator:a=>o({span:c,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:ah,isRoutePPREnabled:ar,req:a,nextConfig:ad,prerenderManifest:$,waitUntil:d.waitUntil});if(_&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),K.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!n){if(aA)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(f=n.value)?void 0:f.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(i=n.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof n.value.postponed;ak&&!av&&(!p||ao)&&(N||b.setHeader("x-nextjs-cache",ah?"REVALIDATED":n.isMiss?"MISS":n.isStale?"STALE":"HIT"),b.setHeader(t.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=n;if(au)l={revalidate:0,expire:void 0};else if(N&&ap&&!ao&&ar)l={revalidate:0,expire:void 0};else if(!K.isDev)if(_)l={revalidate:0,expire:void 0};else if(ak){if(n.cacheControl)if("number"==typeof n.cacheControl.revalidate){if(n.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${n.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});l={revalidate:n.cacheControl.revalidate,expire:(null==(j=n.cacheControl)?void 0:j.expire)??ad.expireTime}}else l={revalidate:y.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(l={revalidate:0,expire:void 0});if(n.cacheControl=l,"string"==typeof aw&&(null==q?void 0:q.kind)===v.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(k=q.headers)?void 0:k[y.NEXT_CACHE_TAGS_HEADER];N&&ak&&c&&"string"==typeof c&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(aw);return void 0!==d?(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(d,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl}):(b.statusCode=204,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:n.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...n,value:{...n.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&au)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(N&&ak||delete a[y.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let s=null==(g=q.headers)?void 0:g[y.NEXT_CACHE_TAGS_HEADER];if(N&&ak&&s&&"string"==typeof s&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,s),!q.status||ap&&ar||(b.statusCode=q.status),!N&&q.status&&F.RedirectStatusCode[q.status]&&ap&&(b.statusCode=200),p&&b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"1"),ap&&!_){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:q.html,cacheControl:av?{revalidate:0,expire:void 0}:n.cacheControl})}return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(q.rscData,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl})}let u=q.html;if(!p||N||ap)return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:n.cacheControl});if(as)return u.push(new ReadableStream({start(a){a.enqueue(z.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}});let w=new TransformStream;return u.push(w.readable),m({span:c,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(w.writable)}).catch(a=>{w.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}})};if(!aF)return await aE.withPropagatedContext(a.headers,()=>aE.trace(i.BaseServerSpan.handleRequest,{spanName:`${aD} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aD,"http.target":a.url}},p));await p(aF)}catch(b){throw b instanceof B.NoFallbackError||await K.onRequestError(a,b,{routerKind:"App Router",routePath:G,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ak,isOnDemandRevalidate:ah})},ac),b}}},79428:a=>{"use strict";a.exports=require("buffer")},79551:a=>{"use strict";a.exports=require("url")},79646:a=>{"use strict";a.exports=require("child_process")},81630:a=>{"use strict";a.exports=require("http")},83997:a=>{"use strict";a.exports=require("tty")},84353:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>N});var d=c(21124),e=c(38301),f=c(42378),g=c(85956),h=c(45119),i=c(36734),j=c(65893),k=c(15303),l=c(32717),m=c(59268),n=c(67748),o=c(88020),p=c(99042);function q({metrics:a}){let b=Math.round(100*a.technicians.utilization),c=Math.round(100*a.performance.onTimeRate);return(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,d.jsxs)(h.Zp,{variant:"muted",children:[(0,d.jsxs)(h.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,d.jsx)(h.ZB,{className:"text-sm",children:"Total Jobs (Week)"}),(0,d.jsx)(i.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,d.jsxs)(h.Wu,{children:[(0,d.jsx)("div",{className:"text-2xl",children:a.jobs.total}),(0,d.jsxs)("div",{className:"flex gap-3 mt-2 text-xs text-muted-foreground",children:[(0,d.jsxs)("span",{children:["Pending: ",a.jobs.pending]}),(0,d.jsxs)("span",{children:["Assigned: ",a.jobs.assigned]}),(0,d.jsxs)("span",{children:["Done: ",a.jobs.completed]})]})]})]}),(0,d.jsxs)(h.Zp,{variant:"muted",children:[(0,d.jsxs)(h.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,d.jsx)(h.ZB,{className:"text-sm",children:"Technician Utilization"}),(0,d.jsx)(j.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,d.jsxs)(h.Wu,{children:[(0,d.jsxs)("div",{className:"text-2xl",children:[b,"%"]}),(0,d.jsx)(o.k,{value:b,className:"mt-2"}),(0,d.jsxs)(p.P,{className:"text-xs text-muted-foreground mt-2",children:[a.technicians.available,"/",a.technicians.active," ","available"]})]})]}),(0,d.jsxs)(h.Zp,{variant:"muted",children:[(0,d.jsxs)(h.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,d.jsx)(h.ZB,{className:"text-sm",children:"Avg Delivery Time"}),(0,d.jsx)(k.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,d.jsxs)(h.Wu,{children:[(0,d.jsxs)("div",{className:"text-2xl",children:[a.performance.averageDeliveryTime,"h"]}),(0,d.jsxs)(p.P,{className:"text-xs text-muted-foreground mt-2",children:["Assignment: ",a.performance.averageAssignmentTime,"m"]})]})]}),(0,d.jsxs)(h.Zp,{variant:"muted",children:[(0,d.jsxs)(h.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,d.jsx)(h.ZB,{className:"text-sm",children:"Revenue (Week)"}),(0,d.jsx)(l.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,d.jsxs)(h.Wu,{children:[(0,d.jsxs)("div",{className:"text-2xl",children:["$",(a.revenue.total/1e3).toFixed(1),"k"]}),(0,d.jsxs)(p.P,{className:"text-xs text-muted-foreground mt-2",children:["$",a.revenue.perJob,"/job avg"]})]})]}),(0,d.jsxs)(h.Zp,{className:"md:col-span-2",variant:"muted",children:[(0,d.jsx)(h.aR,{children:(0,d.jsx)(h.ZB,{className:"text-sm",children:"On-Time Delivery Rate"})}),(0,d.jsxs)(h.Wu,{children:[(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("div",{className:"text-3xl",children:[c,"%"]}),(0,d.jsx)(o.k,{value:c,className:"mt-2"})]}),(0,d.jsx)(m.A,{className:"h-8 w-8 text-emerald-600"})]}),(0,d.jsxs)(p.P,{className:"text-xs text-muted-foreground mt-3",children:[Math.round(a.jobs.completed*a.performance.onTimeRate)," ","of ",a.jobs.completed," jobs delivered on time"]})]})]}),(0,d.jsxs)(h.Zp,{className:"md:col-span-2",variant:"muted",children:[(0,d.jsx)(h.aR,{children:(0,d.jsx)(h.ZB,{className:"text-sm",children:"Client Approval Rate"})}),(0,d.jsxs)(h.Wu,{children:[(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("div",{className:"text-3xl",children:[Math.round(100*a.performance.clientSatisfaction),"%"]}),(0,d.jsx)(o.k,{value:100*a.performance.clientSatisfaction,className:"mt-2"})]}),(0,d.jsx)(n.A,{className:"h-8 w-8 text-blue-600"})]}),(0,d.jsxs)(p.P,{className:"text-xs text-muted-foreground mt-3",children:[Math.round(a.jobs.completed*a.performance.clientSatisfaction)," of ",a.jobs.completed," jobs approved by clients"]})]})]})]})}var r=c(21411),s=c(71870),t=c(69545),u=c(19217),v=c(67454),w=c(11489),x=c(11534),y=c(70693),z=c(58207);function A({jobs:a,technicians:b,metrics:c,selectedJob:f,onViewRankings:g,onSelectJob:h,onNavigateToJobsView:i,onNavigateToMapView:j,onNavigateToCalendarView:k,onNavigateToJobInProjectManagement:l,onJobAssign:m,onJobClick:n}){let o=a.filter(a=>"assigned"===a.status),[A]=(0,e.useState)(new Date),B=o.slice(0,4),C=(0,e.useMemo)(()=>a.map(a=>(0,y.Ve)(a)),[a]),D=b??[],E=(0,e.useMemo)(()=>D.filter(a=>{if(!a?.homeLocation||"number"!=typeof a.homeLocation.lat||"number"!=typeof a.homeLocation.lng)return!1;let b=a.homeLocation.address||{};return[b.street,b.city,b.stateProvince,b.postalCode,b.country].some(Boolean)}),[D]),F=(0,e.useMemo)(()=>(0,z.q)(E),[E]);return(0,d.jsx)("main",{className:"container relative mx-auto",children:(0,d.jsxs)("article",{className:"flex flex-col gap-2xl md:gap-3xl px-md","data-tour":"dashboard-article",children:[(0,d.jsx)("div",{className:"@container w-full mt-md","data-tour":"dashboard-metrics",children:(0,d.jsx)(q,{metrics:c})}),(0,d.jsxs)("div",{className:"@container w-full","data-tour":"dashboard-calendar",children:[(0,d.jsxs)("div",{className:"mb-md flex items-baseline justify-between",children:[(0,d.jsx)(p.H2,{className:"text-lg border-0",children:"Schedule"}),(0,d.jsx)(u.$,{variant:"flat",className:"px-0",onClick:k,children:"View calendar"})]}),(0,d.jsx)("div",{className:"border rounded-md overflow-hidden",children:(0,d.jsx)(t.c,{currentDate:A,events:C,technicians:E,technicianColors:F,onEventClick:b=>{if(b.jobId&&n){let c=a.find(a=>a.id===b.jobId);c&&n(c)}},onDayClick:a=>{k&&k()},compact:!0})})]}),(0,d.jsxs)("div",{className:"@container w-full","data-tour":"dashboard-map",children:[(0,d.jsxs)("div",{className:"mb-md flex items-baseline justify-between",children:[(0,d.jsx)(p.H2,{className:"text-lg border-0",children:"Live Job Map"}),(0,d.jsx)(u.$,{variant:"flat",className:"px-0",onClick:j,children:"View map"})]}),(0,d.jsx)(s.n,{jobs:a,providers:D,selectedJob:f,onSelectJob:h,onNavigateToJobInProjectManagement:l,onJobAssign:m,isDispatcherView:!0})]}),(0,d.jsxs)("div",{className:"@container w-full mb-md","data-tour":"dashboard-jobs",children:[(0,d.jsxs)("div",{className:"mb-md flex items-baseline justify-between",children:[(0,d.jsx)(p.H2,{className:"text-lg",children:"Active Jobs"}),o.length>0&&i&&(0,d.jsx)(u.$,{variant:"flat",className:"px-0",onClick:i,children:"View all"})]}),o.length>0?(0,d.jsx)(v.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-4",children:B.map(a=>{let c=b.find(b=>b.id===a.assignedTechnicianId);return(0,d.jsx)(r.oe,{job:a,technician:c,onViewRankings:"pending"===a.status?()=>g(a):void 0,onClick:n?()=>n(a):void 0},a.id)})})}):(0,d.jsx)(x.pp,{icon:w.A,title:"No Active Jobs",description:"There are currently no active jobs assigned to technicians.",action:i?{label:"View All Jobs",onClick:i}:void 0})]})]})})}var B=c(8946),C=c(61854),D=c(92880),E=c(97201),F=c(92172),G=c(85948),H=c(52962),I=c(56663),J=c(79347),K=c(26519),L=c(18310);c(61848);var M=c(27654);function N(){let a=(0,f.useRouter)(),{user:b,isLoading:c,organizationId:h,memberships:i}=(0,g.l)(["COMPANY","AGENT","TECHNICIAN","EDITOR","PROJECT_MANAGER"]),j=(0,H.I)(),k=(0,G.w)(),l=(0,I.$)();(0,e.useRef)(new Set);let[m,n]=(0,e.useState)([]),[o,p]=(0,e.useState)(!1),[q,s]=(0,e.useState)(null),[t,v]=(0,e.useState)(null),w=(0,e.useMemo)(()=>(0,M.EL)(b,i,h),[b,i,h]),x=i.find(a=>a.orgId===h),y="PERSONAL"===x?.organization?.type||q?.type==="PERSONAL"||x?.organizationType==="PERSONAL",z=q?.lat,N=q?.lng,O="string"==typeof z?parseFloat(z):z,P="string"==typeof N?parseFloat(N):N,Q="number"==typeof O&&!Number.isNaN(O)&&"number"==typeof P&&!Number.isNaN(P),R=(0,e.useMemo)(()=>b&&y&&(Q||t)?{id:b.id,userId:b.id,orgMemberId:x?.id||b.id,orgId:h||x?.orgId||q?.id||b.organizationId||"",memberId:x?.id,organizationId:q?.id,role:"TECHNICIAN",name:b.name||"Me",email:b.email||"",phone:q?.phone||"",isIndependent:!0,companyId:void 0,companyName:void 0,homeLocation:{lat:Q?O:t?.lat,lng:Q?P:t?.lng,address:{street:q?.addressLine1||"",city:q?.city||"",stateProvince:q?.region||"",country:q?.countryCode||"",postalCode:q?.postalCode||""}},availability:[],reliability:{totalJobs:0,noShows:0,lateDeliveries:0,onTimeRate:0,averageDeliveryTime:0},skills:{residential:0,commercial:0,aerial:0,twilight:0,video:0},rating:{overall:0,count:0,recent:[]},preferredClients:[],status:"active",createdAt:new Date,avatar:b.avatarUrl,bio:"",services:{photography:!0,video:!1,aerial:!1,floorplan:!1,measurement:!1,twilight:!1,editing:!1,virtualStaging:!1},portfolio:[],certifications:[]}:null,[b,y,Q,t,x,h,q,O,P]),S=(x?.role||x?.orgRole||"").toUpperCase(),T=(0,e.useMemo)(()=>"EDITOR"===S?[]:m.filter(a=>"TECHNICIAN"===a.role),[m,S]),U=(0,e.useMemo)(()=>b&&m.find(a=>a.userId===b.id)||null,[m,b]);"AGENT"===(b?.accountType||"").toUpperCase()||["OWNER","ADMIN","PROJECT_MANAGER"].includes(S);let V=(0,e.useMemo)(()=>b?"EDITOR"===S?k.jobs.filter(a=>a.editorId===b.id):k.jobs.filter(a=>a.assignedTechnicianId===b.id):[],[k.jobs,b,S]),{metrics:W,stats:X,role:Y,isLoading:Z,error:$,refetch:_}=function(a){let[b,c]=(0,e.useState)(null),[d,f]=(0,e.useState)(null),[g,h]=(0,e.useState)(null),[i,j]=(0,e.useState)(a),[k,l]=(0,e.useState)(null);return{metrics:b,stats:d,role:g,isLoading:i,error:k,refetch:(0,e.useCallback)(async()=>{if(!a){c(null),f(null),h(null),j(!1),l(null);return}j(!0),l(null);try{let a=await J.F.dashboard.get();c(a.metrics),f(a.stats||null),h(a.role||null)}catch(a){l(a instanceof Error?a:Error("Failed to load dashboard metrics"))}finally{j(!1)}},[a])}}(!!b),aa=(0,e.useMemo)(()=>{if(X&&"upcomingJobs"in X)return{upcoming:X.upcomingJobs,completed:X.completedJobs,rating:U?.rating.overall??0,onTimeRate:(100*X.onTimeRate).toFixed(0)};let a=V.filter(a=>"assigned"===a.status||"pending"===a.status),b=V.filter(a=>"delivered"===a.status);return{upcoming:a.length,completed:b.length,rating:U?.rating.overall??0,onTimeRate:(100*(U?.reliability.onTimeRate||0)).toFixed(0)}},[V,U,X]);if(!b||!w)return null;let{showSidebar:ab,accountType:ac,orgType:ad,isElevatedRole:ae}=w;if("AGENT"===ac&&!ab){let c=k.handleTaskViewClose,e=k.openTaskDialog,f=k.handleTaskDialogClose;return(0,d.jsxs)("div",{className:"size-full overflow-x-hidden",children:[(0,d.jsx)(C.b,{jobs:k.jobCards,technicians:T,organizationId:b.organizationId||"",onNewJobClick:()=>a.push("/booking"),onJobClick:a=>{k.selectJob(a),k.openTaskView(a)}}),(0,d.jsx)(D.m,{job:k.selectedJob,messages:k.selectedJob?j.getMessagesForJob(k.selectedJob.id):[],currentUserId:b?.id||"current-user-id",currentUserName:b?.name||"Current User",currentUserAccountType:b?.accountType,isClient:!0,open:k.showTaskView,onOpenChange:c,onSendMessage:(a,b,c)=>j.sendMessage(k.selectedJob?.id||"",a,b,c),onEditMessage:(a,b)=>j.editMessage(a,b),onDeleteMessage:a=>j.deleteMessage(a),onStatusChange:()=>{},onAssignTechnician:()=>{},onChangeTechnician:()=>{},variant:"sheet",onFullScreen:e,onOpenInNewPage:()=>{k.selectedJob&&a.push(`/jobs/${k.selectedJob.id}`)}}),(0,d.jsx)(D.m,{job:k.selectedJob,messages:k.selectedJob?j.getMessagesForJob(k.selectedJob.id):[],currentUserId:b?.id||"current-user-id",currentUserName:b?.name||"Current User",currentUserAccountType:b?.accountType,isClient:!0,open:k.showTaskDialog,onOpenChange:f,onSendMessage:(a,b,c)=>j.sendMessage(k.selectedJob?.id||"",a,b,c),onEditMessage:(a,b)=>j.editMessage(a,b),onDeleteMessage:a=>j.deleteMessage(a),onStatusChange:()=>{},onAssignTechnician:()=>{},onChangeTechnician:()=>{},variant:"dialog"})]})}if(("PROVIDER"===ac||"COMPANY"===ac)&&!ab){let c=k.openTaskView,e=k.toggleJobSelection,f=k.openTaskDialog,g=k.handleTaskDialogClose,h=k.handleTaskViewClose;return(0,d.jsxs)("div",{className:"size-full overflow-x-hidden space-y-6","data-tour":"dashboard-header",children:[(0,d.jsx)(r.WT,{fallback:(0,d.jsx)(F.Eg,{}),children:(0,d.jsx)(B.N,{jobs:V,technicians:T,selectedJob:k.selectedJob,stats:aa,onSelectJob:e,onNavigateToJobsView:()=>a.push("/jobs/all-jobs"),onNavigateToMapView:()=>a.push("/map"),onNavigateToCalendarView:()=>a.push("/calendar"),onNavigateToJobInProjectManagement:b=>{k.selectJob(b),a.push(`/jobs/${b.id}`)},onJobClick:c,currentUserId:b?.id,selfTechnicianOverride:R})}),(0,d.jsx)(D.m,{job:k.selectedJob,messages:k.selectedJob?j.getMessagesForJob(k.selectedJob.id):[],currentUserId:b?.id||"current-user-id",currentUserName:b?.name||"Current User",currentUserAccountType:b?.accountType,isClient:!1,open:k.showTaskView,onOpenChange:h,onSendMessage:(a,b,c)=>j.sendMessage(k.selectedJob?.id||"",a,b,c),onEditMessage:(a,b)=>j.editMessage(a,b),onDeleteMessage:a=>j.deleteMessage(a),onStatusChange:a=>{if(k.selectedJob){let b={pending:E.Ks.BOOKED,assigned:E.Ks.SHOOTING,in_progress:E.Ks.SHOOTING,editing:E.Ks.EDITING,delivered:E.Ks.DELIVERED,cancelled:E.Ks.BOOKED};k.changeJobStatus(k.selectedJob.id,b[a]||E.Ks.BOOKED)}},onAssignTechnician:k.handleAssignTechnician,onChangeTechnician:k.handleChangeTechnician,variant:"sheet",onFullScreen:f,onOpenInNewPage:()=>{k.selectedJob&&a.push(`/jobs/${k.selectedJob.id}`)}}),(0,d.jsx)(D.m,{job:k.selectedJob,messages:k.selectedJob?j.getMessagesForJob(k.selectedJob.id):[],currentUserId:b?.id||"current-user-id",currentUserName:b?.name||"Current User",currentUserAccountType:b?.accountType,isClient:!1,open:k.showTaskDialog,onOpenChange:g,onSendMessage:(a,b,c)=>j.sendMessage(k.selectedJob?.id||"",a,b,c),onEditMessage:(a,b)=>j.editMessage(a,b),onDeleteMessage:a=>j.deleteMessage(a),onStatusChange:a=>{if(k.selectedJob){let b={pending:E.Ks.BOOKED,assigned:E.Ks.SHOOTING,in_progress:E.Ks.SHOOTING,editing:E.Ks.EDITING,delivered:E.Ks.DELIVERED,cancelled:E.Ks.BOOKED};k.changeJobStatus(k.selectedJob.id,b[a]||E.Ks.BOOKED)}},onAssignTechnician:k.handleAssignTechnician,onChangeTechnician:k.handleChangeTechnician,variant:"dialog"})]})}if(ab){let c=k.openRankings,e=k.assignJob,f=k.toggleJobSelection,g=k.openTaskView,h=k.openTaskDialog,i=k.handleTaskDialogClose,m=k.handleTaskViewClose,n=l.navigateToJobsView,o=l.navigateToMapView,p=l.navigateToCalendarView;return(0,d.jsxs)("div",{className:"size-full overflow-x-hidden space-y-6 pt-4","data-tour":"dashboard-header",children:[$&&(0,d.jsxs)(K.Fc,{variant:"destructive",children:[(0,d.jsx)(L.A,{className:"h-4 w-4"}),(0,d.jsx)(K.XL,{children:"Unable to load metrics"}),(0,d.jsxs)(K.TN,{className:"flex items-center justify-between gap-4",children:[(0,d.jsx)("span",{children:$.message}),(0,d.jsx)(u.$,{variant:"secondary",size:"sm",onClick:_,children:"Retry"})]})]}),(0,d.jsx)(r.WT,{fallback:(0,d.jsx)(F.Eg,{}),children:Z&&!W?(0,d.jsx)(F.Eg,{}):(0,d.jsx)(A,{jobs:k.jobs,technicians:T,metrics:W??{organizationId:"",period:"week",jobs:{total:0,pending:0,assigned:0,completed:0,cancelled:0},technicians:{active:0,available:0,utilization:0},performance:{averageAssignmentTime:0,averageDeliveryTime:0,onTimeRate:0,clientSatisfaction:0},revenue:{total:0,perJob:0}},selectedJob:k.selectedJob,onViewRankings:c,onSelectJob:f,onNavigateToJobsView:n,onNavigateToMapView:o,onNavigateToCalendarView:p,onNavigateToJobInProjectManagement:a=>{k.selectJob(a),l.navigateToJobInProjectManagement(a)},onJobAssign:e,onJobClick:g})}),(0,d.jsx)(D.m,{job:k.selectedJob,messages:k.selectedJob?j.getMessagesForJob(k.selectedJob.id):[],currentUserId:b?.id||"current-user-id",currentUserName:b?.name||"Current User",currentUserAccountType:b?.accountType,isClient:!1,open:k.showTaskView,onOpenChange:m,onSendMessage:(a,b,c)=>j.sendMessage(k.selectedJob?.id||"",a,b,c),onEditMessage:(a,b)=>j.editMessage(a,b),onDeleteMessage:a=>j.deleteMessage(a),onStatusChange:()=>{},onAssignTechnician:k.handleAssignTechnician,onChangeTechnician:k.handleChangeTechnician,variant:"sheet",onFullScreen:h,onOpenInNewPage:()=>{k.selectedJob&&a.push(`/jobs/${k.selectedJob.id}`)}}),(0,d.jsx)(D.m,{job:k.selectedJob,messages:k.selectedJob?j.getMessagesForJob(k.selectedJob.id):[],currentUserId:b?.id||"current-user-id",currentUserName:b?.name||"Current User",currentUserAccountType:b?.accountType,isClient:!1,open:k.showTaskDialog,onOpenChange:i,onSendMessage:(a,b,c)=>j.sendMessage(k.selectedJob?.id||"",a,b,c),onEditMessage:(a,b)=>j.editMessage(a,b),onDeleteMessage:a=>j.deleteMessage(a),onStatusChange:()=>{},onAssignTechnician:k.handleAssignTechnician,onChangeTechnician:k.handleChangeTechnician,variant:"dialog"})]})}return(0,d.jsxs)("div",{className:"size-full overflow-x-hidden p-6",children:[(0,d.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Dashboard"}),(0,d.jsx)("p",{className:"text-muted-foreground",children:"Dashboard view for your role is coming soon."})]})}},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},91645:a=>{"use strict";a.exports=require("net")},94735:a=>{"use strict";a.exports=require("events")},96635:(a,b,c)=>{"use strict";c.d(b,{H:()=>g});var d=c(32198),e=c(36950),f=c(58390);function g(a,b){let c,g,p=()=>(0,e.w)(b?.in,NaN),q=b?.additionalDigits??2,r=function(a){let b,c={},d=a.split(h.dateTimeDelimiter);if(d.length>2)return c;if(/:/.test(d[0])?b=d[0]:(c.date=d[0],b=d[1],h.timeZoneDelimiter.test(c.date)&&(c.date=a.split(h.timeZoneDelimiter)[0],b=a.substr(c.date.length,a.length))),b){let a=h.timezone.exec(b);a?(c.time=b.replace(a[1],""),c.timezone=a[1]):c.time=b}return c}(a);if(r.date){let a=function(a,b){let c=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+b)+"})|(\\d{2}|[+-]\\d{"+(2+b)+"})$)"),d=a.match(c);if(!d)return{year:NaN,restDateString:""};let e=d[1]?parseInt(d[1]):null,f=d[2]?parseInt(d[2]):null;return{year:null===f?e:100*f,restDateString:a.slice((d[1]||d[2]).length)}}(r.date,q);c=function(a,b){var c,d,e,f,g,h,j;if(null===b)return new Date(NaN);let k=a.match(i);if(!k)return new Date(NaN);let m=!!k[4],p=l(k[1]),q=l(k[2])-1,r=l(k[3]),s=l(k[4]),t=l(k[5])-1;if(m){return(c=s,d=t,c>=1&&c<=53&&d>=0&&d<=6)?function(a,b,c){let d=new Date(0);d.setUTCFullYear(a,0,4);let e=d.getUTCDay()||7;return d.setUTCDate(d.getUTCDate()+((b-1)*7+c+1-e)),d}(b,s,t):new Date(NaN)}{let a=new Date(0);return(e=b,f=q,g=r,f>=0&&f<=11&&g>=1&&g<=(n[f]||(o(e)?29:28))&&(h=b,(j=p)>=1&&j<=(o(h)?366:365)))?(a.setUTCFullYear(b,q,Math.max(p,r)),a):new Date(NaN)}}(a.restDateString,a.year)}if(!c||isNaN(+c))return p();let s=+c,t=0;if(r.time&&isNaN(t=function(a){var b,c,e;let f=a.match(j);if(!f)return NaN;let g=m(f[1]),h=m(f[2]),i=m(f[3]);return(b=g,c=h,e=i,24===b?0===c&&0===e:e>=0&&e<60&&c>=0&&c<60&&b>=0&&b<25)?g*d.s0+h*d.Cg+1e3*i:NaN}(r.time)))return p();if(r.timezone){if(isNaN(g=function(a){var b;if("Z"===a)return 0;let c=a.match(k);if(!c)return 0;let e="+"===c[1]?-1:1,f=parseInt(c[2]),g=c[3]&&parseInt(c[3])||0;return(b=g)>=0&&b<=59?e*(f*d.s0+g*d.Cg):NaN}(r.timezone)))return p()}else{let a=new Date(s+t),c=(0,f.a)(0,b?.in);return c.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),c.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),c}return(0,f.a)(s+t+g,b?.in)}let h={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},i=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,j=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,k=/^([+-])(\d{2})(?::?(\d{2}))?$/;function l(a){return a?parseInt(a):1}function m(a){return a&&parseFloat(a.replace(",","."))||0}let n=[31,null,31,30,31,30,31,31,30,31,30,31];function o(a){return a%400==0||a%4==0&&a%100!=0}}};var b=require("../../../webpack-runtime.js");b.C(a);var c=b.X(0,[5745,3236,3991,6355,517,7454,7848,3698,9912,8771,3742,2443,3277,2172,2880,5923,1095,154],()=>b(b.s=77666));module.exports=c})();