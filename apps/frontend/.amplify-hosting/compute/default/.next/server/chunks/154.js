"use strict";exports.id=154,exports.ids=[154],exports.modules={24101:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(23339).A)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]])},34941:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(23339).A)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},61854:(a,b,c)=>{c.d(b,{b:()=>F});var d=c(21124),e=c(21411),f=c(68877),g=c(36734),h=c(87278),i=c(52647),j=c(39983),k=c(18310),l=c(46422),m=c(15303),n=c(69957),o=c(72567),p=c(8849),q=c(11489),r=c(59268),s=c(88716);function t({pendingCount:a,assignedCount:b,inProgressCount:c,completedCount:e}){return(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,d.jsx)(s.CN,{icon:m.A,value:a,label:"Pending Assignment",iconBgColor:"bg-orange-100",iconColor:"text-orange-600"}),(0,d.jsx)(s.CN,{icon:q.A,value:b,label:"Assigned",iconBgColor:"bg-accent",iconColor:"text-primary"}),(0,d.jsx)(s.CN,{icon:q.A,value:c,label:"In Progress",iconBgColor:"bg-accent",iconColor:"text-primary"}),(0,d.jsx)(s.CN,{icon:r.A,value:e,label:"Completed",iconBgColor:"bg-emerald-100",iconColor:"text-emerald-600"})]})}var u=c(17677),v=c(22544),w=c(674),x=c(31115),y=c(36736),z=c(99042),A=c(19217),B=c(42378),C=c(85956),D=c(76160),E=c(49037);function F({jobs:a,technicians:b,organizationId:c,onNewJobClick:s,onJobClick:F}){let{user:G}=(0,C.l)(["AGENT","TECHNICIAN","EDITOR","PROJECT_MANAGER","COMPANY"]),H=(0,B.useRouter)(),{shouldShowGuide:I,isTourActive:J}=(0,E.Mw)(),K=b||b||[],L=a.filter(a=>"pending"===a.status),M=a.filter(a=>"assigned"===a.status),N=a.filter(a=>"in_progress"===a.status),O=a.filter(a=>"delivered"===a.status),P=a=>{F?(F(a),J&&setTimeout(()=>{window.dispatchEvent(new CustomEvent("jobTaskViewOpened",{detail:{id:a.id}}))},100)):H.push(`/jobs/${a.id}`)},Q=a=>{let b=a.assignedTechnicianId||a.assignedTechnicianId,c=b?K.find(a=>a.id===b):void 0,e=(a=>{switch(a){case"urgent":return{variant:"destructive",label:"Urgent",icon:k.A};case"rush":return{variant:"secondary",label:"Rush",icon:l.A};default:return{variant:"outline",label:"Standard",icon:m.A}}})(a.priority),f=(a=>{switch(a){case"pending":return{variant:"outline",label:"Pending"};case"assigned":return{variant:"secondary",label:"Assigned"};case"in_progress":return{variant:"default",label:"In Progress"};case"editing":return{variant:"secondary",label:"Editing"};case"delivered":return{variant:"default",label:"Delivered"};case"cancelled":return{variant:"destructive",label:"Cancelled"};default:return{variant:"outline",label:a}}})(a.status),p=e.icon;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u.nA,{children:(0,d.jsxs)("div",{className:"flex items-center gap-2 min-w-[200px]",children:[(0,d.jsx)(n.A,{className:"h-4 w-4 text-muted-foreground shrink-0"}),(0,d.jsxs)(y.m_,{children:[(0,d.jsx)(y.k$,{asChild:!0,children:(0,d.jsx)("span",{className:"truncate max-w-[180px]",children:a.propertyAddress})}),(0,d.jsx)(y.ZI,{children:(0,d.jsx)(z.P,{className:"max-w-xs",children:a.propertyAddress})})]})]})}),(0,d.jsx)(u.nA,{children:(0,d.jsx)("span",{className:"text-sm",children:a.clientName})}),(0,d.jsx)(u.nA,{children:(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(o.A,{className:"h-4 w-4 text-muted-foreground"}),(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsx)("span",{className:"text-sm",children:(0,x.GP)(new Date(a.scheduledDate),"MMM d, yyyy")}),a.scheduledTime&&(0,d.jsx)("span",{className:"text-xs text-muted-foreground",children:a.scheduledTime})]})]})}),(0,d.jsx)(u.nA,{children:(0,d.jsx)("div",{className:"flex items-center gap-1 flex-wrap",children:a.mediaType.map(a=>{let b=(a=>{switch(a){case"photo":default:return g.A;case"video":return h.A;case"aerial":return i.A;case"twilight":return j.A}})(a);return(0,d.jsxs)(y.m_,{children:[(0,d.jsx)(y.k$,{asChild:!0,children:(0,d.jsx)("div",{className:"p-1.5 rounded bg-muted",children:(0,d.jsx)(b,{className:"h-3 w-3"})})}),(0,d.jsx)(y.ZI,{children:(0,d.jsx)(z.P,{className:"capitalize",children:a})})]},a)})})}),(0,d.jsx)(u.nA,{children:(0,d.jsxs)(v.E,{variant:e.variant,className:"gap-1",children:[(0,d.jsx)(p,{className:"h-3 w-3"}),e.label]})}),(0,d.jsx)(u.nA,{children:(0,d.jsx)(v.E,{variant:f.variant,children:f.label})}),(0,d.jsx)(u.nA,{children:c?(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)(w.eu,{className:"h-6 w-6",children:[(0,d.jsx)(w.BK,{src:c.avatar,alt:c.name}),(0,d.jsx)(w.q5,{children:c.name.split(" ").map(a=>a[0]).join("")})]}),(0,d.jsx)("span",{className:"text-sm",children:c.name})]}):(0,d.jsx)("span",{className:"text-sm text-muted-foreground",children:"Unassigned"})}),(0,d.jsx)(u.nA,{className:"text-right"})]})};return(0,d.jsx)("main",{className:"container relative mx-auto",children:(0,d.jsxs)("article",{className:"flex flex-col gap-2xl md:gap-3xl px-md","data-tour":"dashboard-article",children:[I&&(0,d.jsx)("div",{className:"@container w-full mt-md","data-tour":"setup-guide",children:(0,d.jsx)(D.K,{})}),(0,d.jsxs)("div",{className:`@container w-full ${I?"":"mt-md"} mb-md`,"data-tour":"agent-dashboard",children:[(0,d.jsxs)("div",{className:"mb-md flex items-baseline justify-between","data-tour":"agent-header",children:[(0,d.jsx)(z.H2,{className:"text-4xl mb-xs",children:"My Jobs"}),(0,d.jsxs)(A.$,{variant:"default",onClick:s,"data-tour":"jobs-create-button",children:[(0,d.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"Create Order"]})]}),(0,d.jsx)("div",{className:"@container w-full mb-md","data-tour":"agent-stats",children:(0,d.jsx)(t,{pendingCount:L.length,assignedCount:M.length,inProgressCount:N.length,completedCount:O.length})}),(0,d.jsx)("div",{className:"@container w-full","data-tour":"agent-jobs-list",children:(0,d.jsxs)(f.tU,{defaultValue:"all",className:"w-full",children:[(0,d.jsxs)(f.j7,{className:"grid w-full grid-cols-5 rounded-md","data-tour":"jobs-tabs",children:[(0,d.jsxs)(f.Xi,{value:"all",children:["All (",a.length,")"]}),(0,d.jsxs)(f.Xi,{value:"pending",children:["Pending (",L.length,")"]}),(0,d.jsxs)(f.Xi,{value:"assigned",children:["Assigned (",M.length,")"]}),(0,d.jsxs)(f.Xi,{value:"in_progress",children:["In Progress (",N.length,")"]}),(0,d.jsxs)(f.Xi,{value:"completed",children:["Completed (",O.length,")"]})]}),(0,d.jsx)(f.av,{value:"all",className:"mt-6",children:(0,d.jsx)(e.rw,{items:a,searchPlaceholder:"Search by address, client, Order #...",searchFields:a=>`${a.propertyAddress} ${a.clientName} ${a.scheduledDate} ${a.orderNumber}`,filterOptions:[{label:"Urgent",value:"urgent"},{label:"Rush",value:"rush"},{label:"Standard",value:"standard"}],onItemClick:P,onFilterChange:b=>a.filter(a=>"all"===b||a.priority===b),renderItem:a=>{let b=a.assignedTechnicianId||a.assignedTechnicianId,c=b?K.find(a=>a.id===b):void 0;return(0,d.jsx)(e.oe,{job:a,technician:c,currentUserAccountType:G?.accountType},a.id)},renderTableRow:Q,emptyMessage:"No jobs yet",emptyIcon:q.A,emptyTitle:"No jobs yet",emptyDescription:"Create your first booking to get started",emptyAction:{label:"Create Order",onClick:s},itemsPerPage:12})}),(0,d.jsx)(f.av,{value:"pending",className:"mt-6",children:(0,d.jsx)(e.rw,{items:L,searchPlaceholder:"Search by address, client, Order #...",searchFields:a=>`${a.propertyAddress} ${a.clientName} ${a.scheduledDate} ${a.orderNumber}`,filterOptions:[{label:"Urgent",value:"urgent"},{label:"Rush",value:"rush"},{label:"Standard",value:"standard"}],onItemClick:P,onFilterChange:a=>L.filter(b=>"all"===a||b.priority===a),renderItem:a=>{let b=a.assignedTechnicianId||a.assignedTechnicianId,c=b?K.find(a=>a.id===b):void 0;return(0,d.jsx)(e.oe,{job:a,technician:c,currentUserAccountType:G?.accountType},a.id)},renderTableRow:Q,emptyMessage:"No pending jobs",emptyIcon:m.A,emptyTitle:"No pending jobs",emptyDescription:"All your jobs have been assigned",itemsPerPage:12})}),(0,d.jsx)(f.av,{value:"assigned",className:"mt-6",children:(0,d.jsx)(e.rw,{items:M,searchPlaceholder:"Search by address, client, Order #...",searchFields:a=>`${a.propertyAddress} ${a.clientName} ${a.scheduledDate} ${a.orderNumber}`,filterOptions:[{label:"Urgent",value:"urgent"},{label:"Rush",value:"rush"},{label:"Standard",value:"standard"}],onItemClick:P,onFilterChange:a=>M.filter(b=>"all"===a||b.priority===a),renderItem:a=>{let b=a.assignedTechnicianId||a.assignedTechnicianId,c=b?K.find(a=>a.id===b):void 0;return(0,d.jsx)(e.oe,{job:a,technician:c,currentUserAccountType:G?.accountType},a.id)},renderTableRow:Q,emptyMessage:"No assigned jobs",emptyIcon:q.A,emptyTitle:"No assigned jobs",emptyDescription:"Jobs will appear here once assigned to a technician",itemsPerPage:12})}),(0,d.jsx)(f.av,{value:"in_progress",className:"mt-6",children:(0,d.jsx)(e.rw,{items:N,searchPlaceholder:"Search by address, client, Order #...",searchFields:a=>`${a.propertyAddress} ${a.clientName} ${a.scheduledDate} ${a.orderNumber}`,filterOptions:[{label:"Urgent",value:"urgent"},{label:"Rush",value:"rush"},{label:"Standard",value:"standard"}],onItemClick:P,onFilterChange:a=>N.filter(b=>"all"===a||b.priority===a),renderItem:a=>{let b=a.assignedTechnicianId||a.assignedTechnicianId,c=b?K.find(a=>a.id===b):void 0;return(0,d.jsx)(e.oe,{job:a,technician:c,currentUserAccountType:G?.accountType},a.id)},renderTableRow:Q,emptyMessage:"No jobs in progress",emptyIcon:q.A,emptyTitle:"No jobs in progress",emptyDescription:"Active shoots will appear here",itemsPerPage:12})}),(0,d.jsx)(f.av,{value:"completed",className:"mt-6",children:(0,d.jsx)(e.rw,{items:O,searchPlaceholder:"Search by address, client, Order #...",searchFields:a=>`${a.propertyAddress} ${a.clientName} ${a.scheduledDate} ${a.orderNumber}`,filterOptions:[{label:"Urgent",value:"urgent"},{label:"Rush",value:"rush"},{label:"Standard",value:"standard"}],onItemClick:P,onFilterChange:a=>O.filter(b=>"all"===a||b.priority===a),renderItem:a=>{let b=a.assignedTechnicianId||a.assignedTechnicianId,c=b?K.find(a=>a.id===b):void 0;return(0,d.jsx)(e.oe,{job:a,technician:c},a.id)},renderTableRow:Q,emptyMessage:"No completed jobs",emptyIcon:r.A,emptyTitle:"No completed jobs",emptyDescription:"Finished jobs will appear here",itemsPerPage:12})})]})})]})]})})}}};