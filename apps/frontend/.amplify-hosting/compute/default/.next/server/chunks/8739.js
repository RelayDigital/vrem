"use strict";exports.id=8739,exports.ids=[8739],exports.modules={8946:(a,b,c)=>{c.d(b,{N:()=>v});var d=c(21124),e=c(38301),f=c(21411),g=c(71870),h=c(69545),i=c(19217),j=c(67454),k=c(11489),l=c(99042),m=c(11534),n=c(70693),o=c(58207),p=c(88716),q=c(59268),r=c(30733),s=c(67748),t=c(76160),u=c(49037);function v({jobs:a,technicians:b,selectedJob:c,stats:v,onSelectJob:w,onNavigateToJobsView:x,onNavigateToMapView:y,onNavigateToCalendarView:z,onNavigateToJobInProjectManagement:A,onJobClick:B,currentUserId:C,selfTechnicianOverride:D}){let E=a.filter(a=>"assigned"===a.status),[F]=(0,e.useState)(new Date),G=E.slice(0,4),H=(0,e.useMemo)(()=>a.map(a=>(0,n.Ve)(a)),[a]),I=b??[],J=(0,e.useMemo)(()=>I.filter(a=>{if(!a?.homeLocation||"number"!=typeof a.homeLocation.lat||"number"!=typeof a.homeLocation.lng)return!1;let b=a.homeLocation.address||{};return[b.street,b.city,b.stateProvince,b.postalCode,b.country].some(Boolean)}),[I]),K=(0,e.useMemo)(()=>D||(C?J.find(a=>a.id===C):void 0),[J,C,D]),L=J.length>0?J:I,M=(0,e.useMemo)(()=>{let b=new Set(a.map(a=>a.assignedTechnicianId||a.assignedTechnicianId).filter(a=>!!a)),c=J.filter(a=>b.has(a.id));return c.length>0?c:K?[K]:J.length>0?[J[0]]:[]},[a,J,K]),N=(0,e.useMemo)(()=>(0,o.q)(M),[M]),{shouldShowGuide:O}=(0,u.Mw)();return(0,d.jsx)("main",{className:"container relative mx-auto",children:(0,d.jsxs)("article",{className:"flex flex-col gap-2xl md:gap-3xl px-md","data-tour":"dashboard-article",children:[O&&(0,d.jsx)("div",{className:"@container w-full mt-md","data-tour":"setup-guide",children:(0,d.jsx)(t.K,{})}),(0,d.jsx)("div",{className:`@container w-full ${O?"":"mt-md"}`,"data-tour":"dashboard-metrics",children:(0,d.jsx)(p.MD,{stats:[{icon:k.A,value:v.upcoming,label:"Upcoming Jobs",iconBgColor:"bg-accent",iconColor:"text-primary"},{icon:q.A,value:v.completed,label:"Total Completed",iconBgColor:"bg-emerald-100",iconColor:"text-emerald-600"},{icon:r.A,value:v.rating.toFixed(1),label:"Rating",iconBgColor:"bg-yellow-100",iconColor:"text-yellow-600"},{icon:s.A,value:v.onTimeRate,label:"On-Time Rate",valueSuffix:"%",iconBgColor:"bg-accent",iconColor:"text-primary"}]})}),(0,d.jsxs)("div",{className:"@container w-full","data-tour":"dashboard-calendar",children:[(0,d.jsxs)("div",{className:"mb-md flex items-baseline justify-between",children:[(0,d.jsx)(l.H2,{className:"text-lg border-0",children:"Schedule"}),(0,d.jsx)(i.$,{variant:"flat",className:"px-0",onClick:z,children:"View calendar"})]}),(0,d.jsx)("div",{className:"border rounded-md overflow-hidden",children:(0,d.jsx)(h.c,{currentDate:F,events:H,technicians:L,technicianColors:N,onEventClick:b=>{if(b.jobId&&B){let c=a.find(a=>a.id===b.jobId);c&&B(c)}},onDayClick:a=>{z&&z()},compact:!0})})]}),(0,d.jsxs)("div",{className:"@container w-full","data-tour":"dashboard-map",children:[(0,d.jsxs)("div",{className:"mb-md flex items-baseline justify-between",children:[(0,d.jsx)(l.H2,{className:"text-lg border-0",children:"Live Job Map"}),(0,d.jsx)(i.$,{variant:"flat",className:"px-0",onClick:y,children:"View map"})]}),(0,d.jsx)(g.n,{jobs:a,providers:M,selectedJob:c,onSelectJob:w,onNavigateToJobInProjectManagement:A,onJobAssign:void 0,isDispatcherView:!1})]}),(0,d.jsxs)("div",{className:"@container w-full mb-md","data-tour":"dashboard-jobs",children:[(0,d.jsxs)("div",{className:"mb-md flex items-baseline justify-between",children:[(0,d.jsx)(l.H2,{className:"text-lg",children:"Active Jobs"}),E.length>0&&x&&(0,d.jsx)(i.$,{variant:"flat",className:"px-0",onClick:x,children:"View all"})]}),E.length>0?(0,d.jsx)(j.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-4",children:G.map(a=>{let c=b.find(b=>b.id===a.assignedTechnicianId);return(0,d.jsx)(f.oe,{job:a,technician:c,onClick:B?()=>B(a):void 0},a.id)})})}):(0,d.jsx)(m.pp,{icon:k.A,title:"No Active Jobs",description:"There are currently no active jobs assigned to you.",action:x?{label:"View All Jobs",onClick:x}:void 0})]})]})})}},17751:(a,b,c)=>{c.d(b,{$m:()=>j,As:()=>i,nD:()=>h,ub:()=>k});var d=c(21124);c(38301);var e=c(62225),f=c(85351),g=c(67442);function h({...a}){return(0,d.jsx)(e.bL,{"data-slot":"accordion",...a})}function i({className:a,...b}){return(0,d.jsx)(e.q7,{"data-slot":"accordion-item",className:(0,g.cn)("border-b last:border-b-0",a),...b})}function j({className:a,children:b,...c}){return(0,d.jsx)(e.Y9,{className:"flex",children:(0,d.jsxs)(e.l9,{"data-slot":"accordion-trigger",className:(0,g.cn)("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",a),...c,children:[b,(0,d.jsx)(f.A,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function k({className:a,children:b,...c}){return(0,d.jsx)(e.UC,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...c,children:(0,d.jsx)("div",{className:(0,g.cn)("pt-0 pb-4",a),children:b})})}},48101:(a,b,c)=>{c.d(b,{_:()=>y});var d=c(21124);c(8946);var e=c(45119),f=c(88716),g=c(21411),h=c(11534),i=c(11489),j=c(59268),k=c(30733),l=c(67748),m=c(72567);function n({upcomingJobs:a,totalJobs:b,rating:c,onTimeRate:n}){return(0,d.jsxs)("main",{className:"container mx-auto p-6 h-full space-y-6","data-tour":"jobs-view",children:[(0,d.jsx)(f.MD,{stats:[{icon:i.A,value:a.length,label:"Upcoming Jobs",iconBgColor:"bg-accent",iconColor:"text-primary"},{icon:j.A,value:b,label:"Total Completed",iconBgColor:"bg-emerald-100",iconColor:"text-emerald-600"},{icon:k.A,value:c.toFixed(1),label:"Rating",iconBgColor:"bg-yellow-100",iconColor:"text-yellow-600"},{icon:l.A,value:n,label:"On-Time Rate",valueSuffix:"%",iconBgColor:"bg-accent",iconColor:"text-primary"}]}),(0,d.jsxs)(e.Zp,{className:"p-6",children:[(0,d.jsx)("h2",{className:"text-xl mb-4",children:"Upcoming Shoots"}),(0,d.jsx)(g.bm,{title:"All Upcoming Shoots",items:a,itemCount:5,searchPlaceholder:"Search by address, client, Order #...",searchFields:a=>`${a.propertyAddress} ${a.clientName} ${a.scheduledDate} ${a.orderNumber}`,filterOptions:[{label:"Urgent",value:"urgent"},{label:"Rush",value:"rush"},{label:"Standard",value:"standard"}],onFilterChange:b=>a.filter(a=>"all"===b||a.priority===b),renderItem:a=>(0,d.jsx)(h.De,{job:a},a.id),emptyMessage:"No upcoming shoots",emptyIcon:m.A,emptyTitle:"No upcoming shoots",emptyDescription:"New jobs will appear here"})]})]})}var o=c(27176);function p({provider:a,onUpdateProfile:b,organizationSettingsPath:c}){return(0,d.jsx)("main",{className:"container mx-auto p-6 h-full space-y-6",children:(0,d.jsx)("div",{className:"container mx-auto px-6",style:{maxWidth:"896px",marginLeft:"auto",marginRight:"auto"},children:(0,d.jsx)(o.p,{provider:a,organizationSettingsPath:c,onSave:b})})})}var q=c(38301),r=c(19217),s=c(72966),t=c(33305),u=c(99042),v=c(88285),w=c(45334);function x({provider:a,companies:b,applications:c,onApplyToCompany:f}){let[g,i]=(0,q.useState)(!1),j=b.filter(a=>"COMPANY"===a.type),k=c.filter(b=>b.userId===a.userId&&"pending"===b.status);return(0,d.jsxs)("main",{className:"container mx-auto p-6 h-full space-y-6",children:[(0,d.jsxs)("div",{className:"container mx-auto px-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)(u.H2,{className:"text-2xl border-0",children:"Media Companies"}),a.isIndependent&&(0,d.jsxs)(r.$,{onClick:()=>i(!0),children:[(0,d.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Browse Companies"]})]}),k.length>0&&(0,d.jsxs)(e.Zp,{className:"p-6",children:[(0,d.jsx)(u.H3,{className:"text-lg mb-4",children:"Pending Applications"}),(0,d.jsx)("div",{className:"space-y-3",children:k.map(a=>(0,d.jsx)(h.XY,{application:a},a.id))})]}),!a.isIndependent&&a.companyId&&(0,d.jsx)(e.Zp,{className:"p-6",children:(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)("div",{className:"p-4 bg-primary rounded-xl",children:(0,d.jsx)(w.A,{className:"h-8 w-8 text-primary-foreground"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)(u.H3,{className:"text-lg",children:a.companyName}),(0,d.jsx)(u.Oc,{className:"text-muted-foreground",children:"Your current company"})]})]})})]}),(0,d.jsx)(t.lG,{open:g,onOpenChange:i,children:(0,d.jsxs)(t.Cf,{className:"max-w-4xl max-h-[90vh]",children:[(0,d.jsx)(t.c7,{children:(0,d.jsx)(t.L3,{children:"Browse Media Companies"})}),(0,d.jsx)(s.F,{className:"max-h-[calc(90vh-120px)]",children:(0,d.jsx)("div",{className:"space-y-4 p-1",children:j.map(b=>{let e=c.some(c=>c.userId===a.userId&&c.companyId===b.id&&"pending"===c.status);return(0,d.jsx)(h.I2,{company:b,onApply:f,isApplied:e,showApplyButton:!0},b.id)})})})]})})]})}function y({provider:a,jobs:b,companies:c,applications:e,onUpdateProfile:f,onApplyToCompany:g,activeView:h="jobs",organizationSettingsPath:i}){let j=b.filter(b=>b.assignedTechnicianId===a.userId).filter(a=>"assigned"===a.status);return(0,d.jsxs)("div",{className:"size-full overflow-x-hidden",children:["jobs"===h&&(0,d.jsx)(n,{upcomingJobs:j,totalJobs:a.reliability.totalJobs,rating:a.rating.overall,onTimeRate:100*a.reliability.onTimeRate}),"profile"===h&&(0,d.jsx)(p,{provider:a,onUpdateProfile:f,organizationSettingsPath:i}),"companies"===h&&(0,d.jsx)(x,{provider:a,companies:c,applications:e,onApplyToCompany:g})]})}}};